!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=172)}([function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(93))},function(e,t,n){var r=n(0),o=n(57),i=n(6),a=n(58),s=n(60),u=n(96),c=o("wks"),l=r.Symbol,h=u?l:l&&l.withoutSetter||a;e.exports=function(e){return i(c,e)&&(s||"string"==typeof c[e])||(s&&i(l,e)?c[e]=l[e]:c[e]=h("Symbol."+e)),c[e]}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(0),o=n(37).f,i=n(10),a=n(12),s=n(44),u=n(94),c=n(72);e.exports=function(e,t){var n,l,h,f,d,p=e.target,v=e.global,m=e.stat;if(n=v?r:m?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in t){if(f=t[l],h=e.noTargetGet?(d=o(n,l))&&d.value:n[l],!c(v?l:p+(m?".":"#")+l,e.forced)&&void 0!==h){if(typeof f==typeof h)continue;u(f,h)}(e.sham||h&&h.sham)&&i(f,"sham",!0),a(n,l,f,e)}}},function(e,t,n){var r=n(7);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var r=n(0),o=n(104),i=n(165),a=n(10);for(var s in o){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==i)try{a(c,"forEach",i)}catch(e){c.forEach=i}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";var r=n(3),o=n(79).map;r({target:"Array",proto:!0,forced:!n(117)("map")},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(2);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(9),o=n(11),i=n(28);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(9),o=n(68),i=n(4),a=n(38),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(0),o=n(10),i=n(6),a=n(44),s=n(49),u=n(24),c=u.get,l=u.enforce,h=String(String).split("String");(e.exports=function(e,t,n,s){var u,c=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),(u=l(n)).source||(u.source=h.join("string"==typeof t?t:""))),e!==r?(c?!d&&e[t]&&(f=!0):delete e[t],f?e[t]=n:o(e,t,n)):f?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(e,t,n){var r=n(31),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(204),n(205),n(8),n(110),n(32),n(90),n(109),n(5),n(145),n(107),n(169),n(168),n(87),n(88),n(26),n(89),n(30),n(23),n(41),n(146),n(17),n(131);var i=n(27),a=n(111);function s(e){return e.length?e.flatMap((function(t,n){return s(e.filter((function(e,t){return n!==t}))).map((function(e){return[t].concat(r(e))}))})):[[]]}var u=["bamboo","character","circle"],c=s(u),l=[1,3,5,7,9],h=[2,4,6,8],f=l.concat(h).sort(),d=["red","green","white"],p=s(d);function v(e,t){for(var n=[],o=function(o){var s=e[o],u=[],c=[];s.tiles.forEach((function(e){e.length<=2?c.push.apply(c,r(e)):u.push.apply(u,r(e))}));var l=0,h=void 0,f=[];function d(e){if("joker"===e.type)return++l,!0;var t=c.findIndex((function(t){return t.matches(e)}));if(-1!==t)return c.splice(t,1),!0;var n=u.findIndex((function(t){return t.matches(e)}));return-1!==n&&(u.splice(n,1),!0)}var p=function(e){var n=t[e];if(n instanceof a&&(n=n.tiles),n instanceof Array){!0===s.concealed&&0;var r=a.isValidMatch(n);if(!s.tiles.some((function(e){return!r||!(e.length!==n.length||!r.matches(a.findNonJoker(e)))})))return h=1/0,"break|processHandItems";for(var o=0;o<n.length;o++){if(!d(n[o]))return h=1/0,"break|processHandItems"}}};e:for(var v=0;v<t.length;v++){if("break|processHandItems"===p(v))break e}if(h!==1/0){for(var m=0;m<t.length;m++){var g=t[m];g instanceof a||g instanceof Array||d(g)||f.push(g)}h=c.length+Math.max(0,u.length-l),l>u.length&&(f.push(new i({type:"joker",value:""})),l--),n.push({diff:h,handOption:s,noFillJoker:c,canFillJoker:u,notUsed:f,jokerCount:l})}},s=0;s<e.length;s++)o(s);return n=n.sort((function(e,t){var n=e.diff,r=t.diff;function o(e){if(e.handOption.concealed)return Math.max(0,e.diff-1);if(void 0===e.uncallableTiles){var t=function(e){for(var t=0,r=function(r){var o=e[r];n.some((function(e){return o.matches(e[0])}))&&t++},o=0;o<e.length;o++)r(o);return t},n=e.handOption.tiles.filter((function(e){return e.length<3})),r=t(e.noFillJoker)+Math.max(0,t(e.canFillJoker)-e.jokerCount);e.uncallableTiles=Math.max(0,r-1)}return e.uncallableTiles}return n+=.15*o(e),r+=.15*o(t),n+=.15*e.noFillJoker.length,r+=.15*t.noFillJoker.length,e.weightedDiff=n,t.weightedDiff=r,n!==r?n-r:t.handOption.score-e.handOption.score}))}e.exports={createTiles:function(e){var t=e.type,n=e.value,r=e.amount,o=new i({type:t,value:n});return new Array(r).fill(o)},allSuits:u,allSuitArrangements:c,oddOptions:l,evenOptions:h,allOptions:f,windOptions:["north","east","west","south"],dragonOptions:d,dragonArrangments:p,suitDragonConversion:{character:"red",bamboo:"green",circle:"white"},outputExpander:function(e){console.time("Expand");var t=[],n=0;return e.forEach((function(e){var r=[];e.tiles.forEach((function(t){var n=Object.assign({},e);if(n.tiles=t,14!==n.tiles.flat().length)throw"Invalid Combo";r.push(n)}));for(var o=[],i=0;i<r.length;i++){var a,s=r[i];0===(null===(a=v(o,s.tiles)[0])||void 0===a?void 0:a.diff)?n++:o.push(s)}t.push.apply(t,o)})),console.timeEnd("Expand"),n&&console.warn("Removed "+n+" Duplicate Combos"),t},getTileDifferential:v}},function(e,t,n){var r=n(20);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(95),o=n(0),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},function(e,t,n){"use strict";var r=n(3),o=n(7),i=n(74),a=n(70),s=n(13),u=n(22),c=n(98),l=n(1),h=n(117)("slice"),f=l("species"),d=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(e,t){var n,r,l,h=u(this),v=s(h.length),m=a(e,v),g=a(void 0===t?v:t,v);if(i(h)&&("function"!=typeof(n=h.constructor)||n!==Array&&!i(n.prototype)?o(n)&&null===(n=n[f])&&(n=void 0):n=void 0,n===Array||void 0===n))return d.call(h,m,g);for(r=new(void 0===n?Array:n)(p(g-m,0)),l=0;m<g;m++,l++)m in h&&c(r,l,h[m]);return r.length=l,r}})},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return w}));var r=n(148),o=n(243),i={error:"cordova_not_available"},a={error:"plugin_not_installed"};function s(e){if("undefined"!=typeof window&&window.angular){var t=window.document,n=window.angular.element(t.querySelector("[ng-app]")||t.body).injector();if(n)return n.get("$q")((function(t,n){e(t,n)}));console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise((function(t,n){e(t,n)}));console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function u(e,t,n,r){var o,i;void 0===r&&(r={});var a=s((function(a,s){o=r.destruct?p(e,t,n,r,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(e)}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s(e)})):p(e,t,n,r,a,s),i=s}));return o&&o.error&&(a.catch((function(){})),"function"==typeof i&&i(o.error)),a}function c(e,t,n,r){return void 0===r&&(r={}),s((function(o,i){var a=p(e,t,n,r);a?a.error?i(a.error):a.then&&a.then(o).catch(i):i({error:"unexpected_error"})}))}function l(e,t,n,o){return void 0===o&&(o={}),new r.a((function(r){var i;return(i=o.destruct?p(e,t,n,o,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(e)}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.error(e)})):p(e,t,n,o,r.next.bind(r),r.error.bind(r)))&&i.error&&(r.error(i.error),r.complete()),function(){try{if(o.clearFunction)return o.clearWithArgs?p(e,o.clearFunction,n,o,r.next.bind(r),r.error.bind(r)):p(e,o.clearFunction,[])}catch(n){console.warn("Unable to clear the previous observable watch for",e.constructor.getPluginName(),t),console.warn(n)}}}))}function h(e,t){return t="undefined"!=typeof window&&t?g(window,t):t||("undefined"!=typeof window?window:{}),Object(o.a)(t,e)}function f(t,n,r){var o,s,u;return"string"==typeof t?o=t:(o=t.constructor.getPluginRef(),r=t.constructor.getPluginName(),u=t.constructor.getPluginInstallName()),!(!(s=m(o))||n&&void 0===s[n])||("undefined"!=typeof window&&window.cordova?(function(e,t,n){n?console.warn("Native: tried calling "+e+"."+n+", but the "+e+" plugin is not installed."):console.warn("Native: tried accessing the "+e+" plugin but it's not installed.");t&&console.warn("Install the "+e+" plugin: 'ionic cordova plugin add "+t+"'")}(r,u,n),a):(function(t,n){void 0===e&&(n?console.warn("Native: tried calling "+t+"."+n+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"):console.warn("Native: tried accessing the "+t+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"))}(r,n),i))}function d(e,t,n,r){if(void 0===t&&(t={}),t.sync)return e;if("reverse"===t.callbackOrder)e.unshift(r),e.unshift(n);else if("node"===t.callbackStyle)e.push((function(e,t){e?r(e):n(t)}));else if("object"===t.callbackStyle&&t.successName&&t.errorName){var o={};o[t.successName]=n,o[t.errorName]=r,e.push(o)}else if(void 0!==t.successIndex||void 0!==t.errorIndex){var i=function(){t.successIndex>e.length?e[t.successIndex]=n:e.splice(t.successIndex,0,n)},a=function(){t.errorIndex>e.length?e[t.errorIndex]=r:e.splice(t.errorIndex,0,r)};t.successIndex>t.errorIndex?(a(),i()):(i(),a())}else e.push(n),e.push(r);return e}function p(e,t,n,r,o,i){void 0===r&&(r={}),n=d(n,r,o,i);var a=f(e,t);if(!0===a){var s=m(e.constructor.getPluginRef());return s[t].apply(s,n)}return a}function v(e,t,n,r,o,i){if(void 0===r&&(r={}),n=d(n,r,o,i),function(e,t){return e._objectInstance&&(!t||void 0!==e._objectInstance[t])}(e,t))return e._objectInstance[t].apply(e._objectInstance,n)}function m(e){return"undefined"!=typeof window?g(window,e):null}function g(e,t){for(var n=t.split("."),r=e,o=0;o<n.length;o++){if(!r)return null;r=r[n[o]]}return r}var y=function(e,t,n){return void 0===n&&(n={}),function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n.sync?p(e,t,r,n):n.observable?l(e,t,r,n):n.eventObservable&&n.event?h(n.event,n.element):n.otherPromise?c(e,t,r,n):u(e,t,r,n)}};function w(e,t,n){return void 0===n&&(n={}),function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(n.sync)return v(e,t,o,n);if(n.observable)return new r.a((function(r){var i;return(i=n.destruct?v(e,t,o,n,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(e)}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.error(e)})):v(e,t,o,n,r.next.bind(r),r.error.bind(r)))&&i.error&&r.error(i.error),function(){try{return n.clearWithArgs?v(e,n.clearFunction,o,n,r.next.bind(r),r.error.bind(r)):v(e,n.clearFunction,[])}catch(n){console.warn("Unable to clear the previous observable watch for",e.constructor.getPluginName(),t),console.warn(n)}}}));if(n.otherPromise)return s((function(r,i){var a;(a=n.destruct?v(e,t,o,n,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(e)}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(e)})):v(e,t,o,n,r,i))&&a.then?a.then(r,i):i()}));var a,u,c=s((function(r,i){a=n.destruct?v(e,t,o,n,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(e)}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(e)})):v(e,t,o,n,r,i),u=i}));return a&&a.error&&(c.catch((function(){})),"function"==typeof u&&u(a.error)),c}}}).call(this,n(162))},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){"use strict";var r=n(3),o=n(83).includes,i=n(73);r({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},function(e,t,n){var r=n(43),o=n(20);e.exports=function(e){return r(o(e))}},function(e,t,n){"use strict";var r=n(22),o=n(73),i=n(33),a=n(24),s=n(118),u=a.set,c=a.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,t){u(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(e,t,n){var r,o,i,a=n(114),s=n(0),u=n(7),c=n(10),l=n(6),h=n(45),f=n(50),d=n(46),p=s.WeakMap;if(a){var v=h.state||(h.state=new p),m=v.get,g=v.has,y=v.set;r=function(e,t){return t.facade=e,y.call(v,e,t),t},o=function(e){return m.call(v,e)||{}},i=function(e){return g.call(v,e)}}else{var w=f("state");d[w]=!0,r=function(e,t){return t.facade=e,c(e,w,t),t},o=function(e){return l(e,w)?e[w]:{}},i=function(e){return l(e,w)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(47),o=n(12),i=n(122);r||o(Object.prototype,"toString",i,{unsafe:!0})},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(21),n(34),n(35);var i=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.type=t.type,this.value=t.value,this.getTileName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"chinese",t=this.value+" "+this.type;if("american"===e){var n={bamboo:"bam",character:"crak",circle:"dot"};t=["flower","season"].includes(this.type)?"flower":this.value+" "+(n[this.type]||this.type)}return this.faceDown&&(t=this.value&&this.type?"Face Down "+t:"Face Down Tile"),t}.bind(this),t.faceDown?(this.faceDown=!0,this.imageUrl="assets/tiles/face-down.png"):"joker"===this.type?this.imageUrl="assets/tiles/joker.png":this.imageUrl="assets/tiles/"+this.type+"s/"+this.value+".png",this.matches=function(t){return!this.faceDown&&(t instanceof e&&t.type===this.type&&t.value===this.value||!(!["flower","season"].includes(this.type)||!["flower","season"].includes(t.type)))},this.isDouble=function(e){return 0},this.getPoints=function(){return 0},this.toJSON=function(){var e={class:"Tile"};return e.type=this.type,e.value=this.value,this.faceDown&&(e.faceDown=this.faceDown),JSON.stringify(e)}.bind(this),this.isSequence=!1,this.isPongOrKong=!1,this.isPair=!1}var t,n,i;return t=e,i=[{key:"fromJSON",value:function(t){var n=JSON.parse(t);if("Tile"!==n.class)throw"String was not created by Tile.toJSON()";return new e(n)}}],(n=null)&&o(t.prototype,n),i&&o(t,i),e}();e.exports=i},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!1},function(e,t,n){"use strict";var r=n(75).charAt,o=n(24),i=n(118),a=o.set,s=o.getterFor("String Iterator");i(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=s(this),n=t.string,o=t.index;return o>=n.length?{value:void 0,done:!0}:(e=r(n,o),t.index+=e.length,{value:e,done:!1})}))},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(3),o=n(2),i=n(74),a=n(7),s=n(15),u=n(13),c=n(98),l=n(86),h=n(117),f=n(1),d=n(51),p=f("isConcatSpreadable"),v=d>=51||!o((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),m=h("concat"),g=function(e){if(!a(e))return!1;var t=e[p];return void 0!==t?!!t:i(e)};r({target:"Array",proto:!0,forced:!v||!m},{concat:function(e){var t,n,r,o,i,a=s(this),h=l(a,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(g(i=-1===t?a:arguments[t])){if(f+(o=u(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,f++)n in i&&c(h,f,i[n])}else{if(f>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(h,f++,i)}return h.length=f,h}})},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(3),o=n(2),i=n(15),a=n(38);r({target:"Date",proto:!0,forced:o((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=i(this),n=a(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){"use strict";n(3)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},function(e,t,n){var r=n(9),o=n(67),i=n(28),a=n(22),s=n(38),u=n(6),c=n(68),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),c)try{return l(e,t)}catch(e){}if(u(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t,n){var r=n(7);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(11).f,o=n(6),i=n(1)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(25);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(0),o=n(104),i=n(23),a=n(10),s=n(1),u=s("iterator"),c=s("toStringTag"),l=i.values;for(var h in o){var f=r[h],d=f&&f.prototype;if(d){if(d[u]!==l)try{a(d,u,l)}catch(e){d[u]=l}if(d[c]||a(d,c,h),o[h])for(var p in i)if(d[p]!==i[p])try{a(d,p,i[p])}catch(e){d[p]=i[p]}}}},function(e,t,n){var r=n(19),o=n(0);e.exports="process"==r(o.process)},function(e,t,n){var r=n(2),o=n(19),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(0),o=n(10);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(0),o=n(44),i=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},function(e,t){e.exports={}},function(e,t,n){var r={};r[n(1)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(21),n(8),n(90),n(34),n(35);var i=n(27),a=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),null==t.exposed)throw"Must specify either true or false for config.exposed. ";if(t.amount<2||t.amount>4)throw"config.mount must be either 2, 3, or 4. ";this.type=t.type,this.value=t.value,this.amount=t.amount,this.exposed=t.exposed,this.getTileName=function(){var e;return(e=this.getComponentTile()).getTileName.apply(e,arguments)}.bind(this),this.getComponentTile=function(){return new i({type:this.type,value:this.value})},this.getPoints=function(e){var t=0;if(["bamboo","character","circle"].includes(this.type)){if(t=2,(1===this.value||9===this.value)&&(t*=2,2===this.amount))return 2;if(2===this.amount)return 0}else if(t=4,2===this.amount)return"wind"===this.type&&this.value!==e?0:2;return 4===this.amount&&(t*=4),this.exposed||(t*=2),t},this.isDouble=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(2===this.amount&&!t)&&("dragon"===this.type||"wind"===this.type&&this.value===e)},Object.defineProperty(this,"tiles",{get:function(){var e=this;return new Array(this.amount).fill().map(function(){return e.getComponentTile()}.bind(this))}.bind(this)}),Object.defineProperty(this,"isPair",{get:function(){return 2===this.amount}}),Object.defineProperty(this,"isPongOrKong",{get:function(){return this.amount>=3}}),this.toJSON=function(){var e={class:"Match"};return e.type=this.type,e.value=this.value,e.amount=this.amount,e.exposed=this.exposed,JSON.stringify(e)}.bind(this),this.isSequence=!1}var t,n,a;return t=e,a=[{key:"isValidMatch",value:function(e){for(var t=0;t<e.length;t++)if(!e[0].matches(e[t]))return!1;return!0}},{key:"fromJSON",value:function(t){var n=JSON.parse(t);if("Match"!==n.class)throw"String was not created by Match.toJSON()";return new e(n)}}],(n=null)&&o(t.prototype,n),a&&o(t,a),e}();e.exports=a},function(e,t,n){var r=n(45),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(57),o=n(58),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t,n){var r,o,i=n(0),a=n(61),s=i.process,u=s&&s.versions,c=u&&u.v8;c?o=(r=c.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),e.exports=o&&+o},function(e,t,n){var r,o=n(4),i=n(116),a=n(59),s=n(46),u=n(97),c=n(56),l=n(50),h=l("IE_PROTO"),f=function(){},d=function(e){return"<script>"+e+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=r?function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=c("iframe")).style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};s[h]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=o(e),n=new f,f.prototype=null,n[h]=e):n=p(),void 0===t?n:i(n,t)}},function(e,t,n){"use strict";var r=n(3),o=n(173),i=n(20);r({target:"String",proto:!0,forced:!n(174)("includes")},{includes:function(e){return!!~String(i(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(55),o=n(33),i=n(1)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(47),o=n(19),i=n(1)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){var r=n(0),o=n(7),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(29),o=n(45);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(42),o=n(51),i=n(2);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!Symbol.sham&&(r?38===o:o>37&&o<41)}))},function(e,t,n){var r=n(16);e.exports=r("navigator","userAgent")||""},function(e,t,n){"use strict";var r,o,i=n(139),a=n(163),s=RegExp.prototype.exec,u=String.prototype.replace,c=s,l=(r=/a/,o=/b*/g,s.call(r,"a"),s.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),h=a.UNSUPPORTED_Y||a.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(l||f||h)&&(c=function(e){var t,n,r,o,a=this,c=h&&a.sticky,d=i.call(a),p=a.source,v=0,m=e;return c&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),m=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,v++),n=new RegExp("^(?:"+p+")",d)),f&&(n=new RegExp("^"+p+"$(?!\\s)",d)),l&&(t=a.lastIndex),r=s.call(c?n:a,m),c?r?(r.input=r.input.slice(v),r[0]=r[0].slice(v),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:l&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),f&&r&&r.length>1&&u.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=c},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(21),n(34),n(35);var i=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),!["season","flower"].includes(t.seasonOrFlower))throw"config.seasorOrFlower must either be 'season' or 'flower'";this.type="pretty",this.value=t.value,this.seasonOrFlower=t.seasonOrFlower,this.exposed=!0,this.getTileName=function(){return"Pretty"};var n=["east","south","west","north"];this.isDouble=function(e){return e===n[this.value-1]},this.getPoints=function(){return 4},this.imageUrl="assets/tiles/"+t.seasonOrFlower+"s/"+t.value+".png",this.toJSON=function(){var e={class:"Pretty"};return e.value=this.value,e.seasonOrFlower=this.seasonOrFlower,JSON.stringify(e)}.bind(this),this.isSequence=!1,this.isPongOrKong=!1,this.isPair=!1}var t,n,i;return t=e,i=[{key:"fromJSON",value:function(t){var n=JSON.parse(t);if("Pretty"!==n.class)throw"String was not created by Pretty.toJSON()";return new e(n)}}],(n=null)&&o(t.prototype,n),i&&o(t,i),e}();e.exports=i},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(107),n(66),n(5),n(90),n(21),n(109),n(34),n(35),n(110),n(145),n(8);var i=n(27),a=n(48),s=n(65),u=n(63),c=(n(80),n(111)),l=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function o(e){e.preventDefault()}function l(e){var t="randomClassForTransfer"+Math.pow(2,53)*Math.random();e.target.classList.add(t),e.dataTransfer.setData("randomClass",t)}r(this,e),this.handToRender=t.handToRender,this.handForExposed=t.handForExposed,this.tilePlacemat=t.tilePlacemat,this.interactive=t.interactive||!1,this.wind=t.wind,this.contents=[],this.inPlacemat=[],this.syncContents=n(182).bind(this),this.score=n(183).bind(this),this.getClearHandDoubles=n(184).bind(this),this.isMahjong=n(185).bind(this),this.isCalling=n(187).bind(this),Object.defineProperty(this,"placematLength",{get:function(){var e,t,n,r;return"american"===(null===(e=stateManager)||void 0===e||null===(t=e.lastState)||void 0===t||null===(n=t.message)||void 0===n||null===(r=n.settings)||void 0===r?void 0:r.gameStyle)?6:4}}),this.add=function(t){var n;n=t instanceof s||t instanceof c?e.getTileValue(t.tiles[0]):e.getTileValue(t);for(var r=0;r<this.contents.length;r++){var o=this.contents[r];if(o instanceof s&&(o=o.tiles[2]),o instanceof c&&(o=o.tiles[0]),n<e.getTileValue(o))return void this.contents.splice(r,0,t)}this.contents.push(t)}.bind(this),this.remove=function(e){var t=this.contents.indexOf(e),n=this.inPlacemat.indexOf(e);if(-1!==t)this.contents.splice(t,1);else{if(-1===n)throw e+" does not exist in hand. ";this.inPlacemat.splice(n,1)}}.bind(this),this.moveTile=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.inPlacemat.indexOf(e),o=this.contents.indexOf(e);if(console.log(n),r+o!==-2){this.inPlacemat,this.contents;if(t)if(-1===r){if(this.inPlacemat.length>=this.placematLength)return void alert("Placemat is already full. ");this.inPlacemat.push(this.contents.splice(o,1)[0])}else{if(0===r&&this.inPlacemat[0].evicting)return void alert("This tile was discarded. To claim it, select the tiles you would like to match with it, then hit proceed. ");var i=this.inPlacemat.splice(r,1)[0];isNaN(n)?this.add(i):this.contents.splice(n,0,i)}else isNaN(n)?console.error("Unable to determine how this tile should be moved. "):-1===o?console.error("Reordering in placemat is not supported. Must be in hand."):(n>o&&n--,this.contents.splice(n,0,this.contents.splice(o,1)[0]));this.renderTiles(),this.renderPlacemat()}else console.error("Tile does not exist. ")}.bind(this),this.removeMatchingTile=function(e){var t=this;if(!e instanceof i)throw"removeMatchingTile only supports Tiles";return this.inPlacemat.length>0&&console.warn("Hand.removeMatchingTile is intended for server side use only. "),!!this.contents.some(function(n,r){return!!e.matches(n)&&(t.contents.splice(r,1),!0)}.bind(this))},this.getExposedTiles=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.contents.forEach((function(n){n.exposed||n instanceof a&&4===n.amount?t.push(n):e&&t.push(new i({faceDown:!0}))})),t}.bind(this);var h=function(e){e.preventDefault();var t,n=e.dataTransfer.getData("randomClass"),r=document.getElementsByClassName(n)[0];r.classList.remove(n);for(var o=0;o<this.handToRender.children.length;o++){var i=this.handToRender.children[o],a=i.getBoundingClientRect();if(t=i.tileIndex+1,e.clientX<a.left+a.width/2){t--;break}}void 0!==r.placematIndex?this.moveTile(this.inPlacemat[r.placematIndex],!0,t):this.moveTile(this.contents[r.tileIndex],!1,t)}.bind(this),f=function(e){e.preventDefault();var t=e.dataTransfer.getData("randomClass"),n=document.getElementsByClassName(t)[0];n.classList.remove(t),this.moveTile(this.contents[n.tileIndex])}.bind(this);this.interactive&&(this.handToRender.addEventListener("dragover",o),this.handToRender.addEventListener("dragenter",o),this.handToRender.addEventListener("drop",h),this.tilePlacemat&&(this.tilePlacemat.addEventListener("dragover",o),this.tilePlacemat.addEventListener("dragenter",o),this.tilePlacemat.addEventListener("drop",f),this.tilePlacemat.addEventListener("dragover",(function(){this.style.backgroundColor="lightblue"})),this.tilePlacemat.addEventListener("dragleave",(function(){this.style.backgroundColor=""})),this.tilePlacemat.addEventListener("drop",(function(){this.style.backgroundColor=""})))),this.removeMatchingTilesFromHand=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e instanceof i)throw"You must send a tile. ";return this.removeTilesFromHand(new Array(t).fill(e),n)}.bind(this),this.removeTilesFromHand=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((e instanceof s||e instanceof c)&&(e=e.tiles),e instanceof i)e=[e];else if(!e instanceof Array)throw"Must send a Sequence, Tile, or Array. ";var r=[];e.forEach((function(e,n){if(!(e instanceof i))throw"Your Sequence or Array contains non-tiles. ";for(var o=t.contents.length-1;o>=0;o--)if(e.matches(t.contents[o])&&!r.includes(o))return void(r[n]=o)}));for(var o=!0,a=0;a<e.length;a++)void 0===r[a]&&(o=!1);return!!o&&(n||r.sort((function(e,t){return t-e})).forEach((function(e){t.contents.splice(e,1)})),!0)}.bind(this),this.renderPlacemat=function(e){var t,n,r=this;for(e=null!==(t=e)&&void 0!==t?t:null===(n=this.tilePlacemat.firstChild)||void 0===n?void 0:n.className;this.tilePlacemat.firstChild;)this.tilePlacemat.firstChild.remove();for(var o=function(t){var n,o,i,a,s=r.inPlacemat[t],u=document.createElement("img");(r.tilePlacemat.appendChild(u),0===t&&e&&(u.className=e),s)?(u.src=s.imageUrl,u.title=s.getTileName(null===(n=stateManager)||void 0===n||null===(o=n.lastState)||void 0===o||null===(i=o.message)||void 0===i||null===(a=i.settings)||void 0===a?void 0:a.gameStyle),u.draggable=!0,u.placematIndex=t,u.addEventListener("dragstart",l),u.addEventListener("click",function(){this.moveTile(s)}.bind(r))):u.src="assets/tiles/tile-outline.png"},i=0;i<this.placematLength;i++)o(i)}.bind(this),this.setEvictingThrownTile=function(e){for(var t=this.inPlacemat.length-1;t>=0;t--){this.inPlacemat[t].evicting&&this.inPlacemat.splice(t,1)}e&&(this.inPlacemat.length>=this.placematLength&&this.contents.push(this.inPlacemat.pop()),this.inPlacemat.unshift(e),e.evicting=!0)}.bind(this),this.renderTiles=function(e){if(!this.handToRender)throw"Unable to render hand. You must pass config.handToRender to the constructor. ";for(;this.handToRender.firstChild;)this.handToRender.firstChild.remove();if(this.handForExposed)for(;this.handForExposed.firstChild;)this.handForExposed.firstChild.remove();"string"==typeof e&&(e=i.fromJSON(e));for(var t=[],n=[],r=0;r<this.contents.length;r++){var o=this.contents[r];if(o instanceof i)t.push(o);else if(o instanceof u)n.push(o);else if(o instanceof a||o instanceof s){var h=o.tiles;o instanceof a&&4===o.amount&&(h[0].faceDown=!0,h[0]=i.fromJSON(h[0].toJSON())),o.exposed?n.push(h):o instanceof a&&4===o.amount?(h[3].faceDown=!0,h[3]=i.fromJSON(h[3].toJSON()),n.push(h)):(console.log(h),t.push(h))}else o instanceof c?n.push(o.tiles):console.error("Unknown item "+o)}var f=function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=function(t,o){var i,a,s,u,c=document.createElement("img");c.src=t.imageUrl,c.title=t.getTileName(null===(i=stateManager)||void 0===i||null===(a=i.lastState)||void 0===a||null===(s=a.message)||void 0===s||null===(u=s.settings)||void 0===u?void 0:u.gameStyle),o&&0!==o?c.style.setProperty("--negativeMarginMultiplier",2):0===o&&c.style.setProperty("--negativeMarginMultiplier",0),"exposed"===n&&this.handForExposed?this.handForExposed.appendChild(c):"exposed"===n?(r&&(c.style.filter="brightness(1.2)"),this.handToRender.appendChild(c)):"unexposed"===n&&(!this.handForExposed&&r&&(c.style.filter="brightness(0.8)"),this.interactive&&(e&&t.matches(e)&&(e=void 0,c.classList.add("animateTile")),c.draggable=!0,c.addEventListener("click",function(){this.moveTile(t)}.bind(this)),c.addEventListener("dragstart",l),c.tileIndex=this.contents.findIndex((function(e){return e===t}))),this.handToRender.appendChild(c))}.bind(this),i=0;i<t.length;i++){var a=t[i];if(a instanceof Array)for(var s=0;s<a.length;s++)o(a[s],s);else"unexposed"===n&&0===i?o(a,0):o(a)}function u(e){if(e.children.length>14){var t=parseFloat(document.documentElement.style.getPropertyValue("--vh"));t/=e.children.length/14;var n=parseFloat(document.documentElement.style.getPropertyValue("--vw"));n/=e.children.length/14,e.children.forEach((function(e){e.style.setProperty("--vh",t+"px"),e.style.setProperty("--vw",n+"px")}))}}u(this.handToRender),this.handForExposed&&u(this.handForExposed)}.bind(this),d=!1;(t.some((function(e){return!e.faceDown}))||0===t.length)&&(d=!0),f(n,"exposed",d),f(t,"unexposed",d),this.tilePlacemat&&this.renderPlacemat()}.bind(this),this.getStringContents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"contents";return this[e].map((function(e){return e.toJSON()}))}.bind(this),this.toJSON=function(){return JSON.stringify({wind:this.wind,contents:this.contents})}.bind(this)}var t,l,h;return t=e,h=[{key:"getTileValue",value:function(e){var t=0;return t+=100*["pretty","flower","season","circle","bamboo","character","wind","dragon","joker"].findIndex((function(t){return e.type===t})),"number"==typeof e.value?t+=e.value:"wind"===e.type?t+=10*["north","east","south","west"].findIndex((function(t){return e.value===t})):"dragon"===e.type?t+=10*["red","green","white"].findIndex((function(t){return e.value===t})):e.faceDown||"joker"===e.type||console.error("Couldn't fully calculate value for "+e),t}},{key:"sortTiles",value:function(t){return t.sort((function(t,n){return e.getTileValue(t)-e.getTileValue(n)}))}},{key:"convertStringsToTiles",value:function(e){return e.map((function(e){var t=JSON.parse(e);if("Pretty"===t.class)return u.fromJSON(e);if("Tile"===t.class)return i.fromJSON(e);if("Sequence"===t.class)return s.fromJSON(e);if("TileContainer"===t.class)return c.fromJSON(e);if("Match"===t.class)return a.fromJSON(e);throw"Unable to identify itemString "+e}))}},{key:"fromString",value:function(t){var n=JSON.parse(t),r=(n.wind,new e({wind:n.wind}));return r.contents=e.convertStringsToTiles(n.contents),r}}],(l=null)&&o(t.prototype,l),h&&o(t,h),e}();e.exports=l},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(109),n(34),n(35),n(21),n(8);var i=n(27),a=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),void 0===t.exposed)throw"config.exposed must not be undefined. ";if(this.isDouble=function(e){return!1},this.getPoints=function(){return 0},!t.tiles instanceof Array)throw"config.tiles must be an array of Tiles";if(!e.isValidSequence(t.tiles))throw"config.tiles is not a valid sequence. ";this.tiles=t.tiles,this.tiles=this.tiles.sort((function(e,t){return e.value-t.value})),this.exposed=t.exposed,this.isSequence=!0,this.isPongOrKong=!1,this.isPair=!1,this.toJSON=function(){var e={class:"Sequence"};return e.exposed=this.exposed,e.tiles=this.tiles,JSON.stringify(e)}.bind(this)}var t,n,a;return t=e,a=[{key:"isValidSequence",value:function(e){var t=e[0].type;if(!["bamboo","character","circle"].includes(t))return!1;e=e.sort((function(e,t){return e.value-t.value}));for(var n=1;n<e.length;n++){var r=e[n];if(r.type!==t)return!1;if(1!==Math.abs(e[n-1].value-r.value))return!1}return 3===e.length}},{key:"fromJSON",value:function(t){var n=JSON.parse(t);if("Sequence"!==n.class)throw"String was not created by Sequence.toJSON()";return n.tiles=n.tiles.map((function(e){return i.fromJSON(e)})),new e(n)}}],(n=null)&&o(t.prototype,n),a&&o(t,a),e}();e.exports=a},function(e,t,n){"use strict";var r=n(3),o=n(83).indexOf,i=n(84),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0,u=i("indexOf");r({target:"Array",proto:!0,forced:s||!u},{indexOf:function(e){return s?a.apply(this,arguments)||0:o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(9),o=n(2),i=n(56);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(82),o=n(59).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(31),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(2),o=/#|\.prototype\./,i=function(e,t){var n=s[a(e)];return n==c||n!=u&&("function"==typeof t?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},u=i.NATIVE="N",c=i.POLYFILL="P";e.exports=i},function(e,t,n){var r=n(1),o=n(52),i=n(11),a=r("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,n){var r=n(19);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(31),o=n(20),i=function(e){return function(t,n){var i,a,s=String(o(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u))<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){"use strict";var r=n(3),o=n(62);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,t,n){n(3)({global:!0},{globalThis:n(0)})},function(e,t,n){var r=n(40),o=n(43),i=n(15),a=n(13),s=n(86),u=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,l=4==e,h=6==e,f=7==e,d=5==e||h;return function(p,v,m,g){for(var y,w,b=i(p),S=o(b),E=r(v,m,3),T=a(S.length),x=0,C=g||s,k=t?C(p,T):n||f?C(p,0):void 0;T>x;x++)if((d||x in S)&&(w=E(y=S[x],x,b),e))if(t)k[x]=w;else if(w)switch(e){case 3:return!0;case 5:return y;case 6:return x;case 2:u.call(k,y)}else switch(e){case 4:return!1;case 7:u.call(k,y)}return h?-1:c||l?l:k}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(32),n(34),n(35),n(106),n(77),n(5);var i=n(27),a=n(63),s=n(181),u=function(){"use strict";function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random(),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,e),this.drawFirst=function(){return this.tiles.pop()},this.tiles=[],this.tiles=this.tiles.concat(e.getNonPrettyTiles()),o.noPrettys||[!1,!0].forEach((function(e){for(var n=1;n<=4;n++)o.prettysAsTiles?t.tiles.push(new i({value:n,type:e?"season":"flower"})):t.tiles.push(new a({value:n,seasonOrFlower:e?"season":"flower"}))})),o.includeJokers)for(var s=0;s<o.includeJokers;s++)this.tiles.push(new i({type:"joker",value:""}));e.shuffleArray(this.tiles,n),this.toJSON=function(){return n}.bind(this)}var t,n,u;return t=e,u=[{key:"getNonPrettyTiles",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t=[],n=function(n){for(var r=0;r<e;r++)["bamboo","character","circle"].forEach((function(e){t.push(new i({type:e,value:n}))}))},r=1;r<=9;r++)n(r);return["red","green","white"].forEach((function(n){for(var r=0;r<e;r++)t.push(new i({type:"dragon",value:n}))})),["north","south","east","west"].forEach((function(n){for(var r=0;r<e;r++)t.push(new i({type:"wind",value:n}))})),t}},{key:"shuffleArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random(),n=s(t),r=e.length-1;r>0;r--){var o=Math.floor(n()*(r+1)),i=[e[o],e[r]];e[r]=i[0],e[o]=i[1]}}},{key:"renderWall",value:function(e,t){for(;e.firstChild;)e.firstChild.remove();for(var n=0;n<t.length;n++){var r,o,i,a,s=t[n],u=document.createElement("img");u.src=s.imageUrl,u.title=s.getTileName(null===(r=stateManager)||void 0===r||null===(o=r.lastState)||void 0===o||null===(i=o.message)||void 0===i||null===(a=i.settings)||void 0===a?void 0:a.gameStyle),e.appendChild(u)}0!==t.length&&String(t.length).split("").forEach((function(t){var n=document.createElement("p");n.innerHTML=t,e.appendChild(n)}))}},{key:"fromJSON",value:function(t){return new e(t)}}],(n=null)&&o(t.prototype,n),u&&o(t,u),e}();e.exports=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(132),o=n(91),i=n(112),a=n(147);var s=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),u=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n,r=this._parentOrParents,i=this._ctorUnsubscribe,u=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var h=0;h<r.length;++h){r[h].remove(this)}if(Object(o.a)(u)){i&&(this._unsubscribe=void 0);try{u.call(this)}catch(e){t=e instanceof s?c(e.errors):[e]}}if(Object(a.a)(l)){h=-1;for(var f=l.length;++h<f;){var d=l[h];if(null!==(n=d)&&"object"==typeof n)try{d.unsubscribe()}catch(e){t=t||[],e instanceof s?t=t.concat(c(e.errors)):t.push(e)}}}if(t)throw new s(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof e){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function c(e){return e.reduce((function(e,t){return e.concat(t instanceof s?t.errors:t)}),[])}var l=n(133),h=n(36),f=n(92),d=function(e){function t(n,r,o){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=i.a;break;case 1:if(!n){a.destination=i.a;break}if("object"==typeof n){n instanceof t?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new p(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new p(a,n,r,o)}return a}return r.a(t,e),t.prototype[l.a]=function(){return this},t.create=function(e,n,r){var o=new t(e,n,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(u),p=function(e){function t(t,n,r,a){var s,u=e.call(this)||this;u._parentSubscriber=t;var c=u;return Object(o.a)(n)?s=n:n&&(s=n.next,r=n.error,a=n.complete,n!==i.a&&(c=Object.create(n),Object(o.a)(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=s,u._error=r,u._complete=a,u}return r.a(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;h.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=h.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(f.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(f.a)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};h.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),h.a.useDeprecatedSynchronousErrorHandling)throw e;Object(f.a)(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!h.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return h.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Object(f.a)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(d)},function(e,t,n){var r=n(6),o=n(22),i=n(83).indexOf,a=n(46);e.exports=function(e,t){var n,s=o(e),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(c,n)||c.push(n));return c}},function(e,t,n){var r=n(22),o=n(13),i=n(70),a=function(e){return function(t,n,a){var s,u=r(t),c=o(u.length),l=i(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){var r=n(82),o=n(59);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(7),o=n(74),i=n(1)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){"use strict";var r=n(3),o=n(0),i=n(16),a=n(29),s=n(9),u=n(60),c=n(96),l=n(2),h=n(6),f=n(74),d=n(7),p=n(4),v=n(15),m=n(22),g=n(38),y=n(28),w=n(52),b=n(85),S=n(69),E=n(202),T=n(71),x=n(37),C=n(11),k=n(67),O=n(10),M=n(12),A=n(57),I=n(50),j=n(46),P=n(58),N=n(1),L=n(179),R=n(180),D=n(39),H=n(24),F=n(79).forEach,_=I("hidden"),B=N("toPrimitive"),U=H.set,J=H.getterFor("Symbol"),G=Object.prototype,q=o.Symbol,Y=i("JSON","stringify"),V=x.f,W=C.f,z=E.f,X=k.f,K=A("symbols"),$=A("op-symbols"),Q=A("string-to-symbol-registry"),Z=A("symbol-to-string-registry"),ee=A("wks"),te=o.QObject,ne=!te||!te.prototype||!te.prototype.findChild,re=s&&l((function(){return 7!=w(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=V(G,t);r&&delete G[t],W(e,t,n),r&&e!==G&&W(G,t,r)}:W,oe=function(e,t){var n=K[e]=w(q.prototype);return U(n,{type:"Symbol",tag:e,description:t}),s||(n.description=t),n},ie=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof q},ae=function(e,t,n){e===G&&ae($,t,n),p(e);var r=g(t,!0);return p(n),h(K,r)?(n.enumerable?(h(e,_)&&e[_][r]&&(e[_][r]=!1),n=w(n,{enumerable:y(0,!1)})):(h(e,_)||W(e,_,y(1,{})),e[_][r]=!0),re(e,r,n)):W(e,r,n)},se=function(e,t){p(e);var n=m(t),r=b(n).concat(he(n));return F(r,(function(t){s&&!ue.call(n,t)||ae(e,t,n[t])})),e},ue=function(e){var t=g(e,!0),n=X.call(this,t);return!(this===G&&h(K,t)&&!h($,t))&&(!(n||!h(this,t)||!h(K,t)||h(this,_)&&this[_][t])||n)},ce=function(e,t){var n=m(e),r=g(t,!0);if(n!==G||!h(K,r)||h($,r)){var o=V(n,r);return!o||!h(K,r)||h(n,_)&&n[_][r]||(o.enumerable=!0),o}},le=function(e){var t=z(m(e)),n=[];return F(t,(function(e){h(K,e)||h(j,e)||n.push(e)})),n},he=function(e){var t=e===G,n=z(t?$:m(e)),r=[];return F(n,(function(e){!h(K,e)||t&&!h(G,e)||r.push(K[e])})),r};(u||(M((q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=P(e),n=function(e){this===G&&n.call($,e),h(this,_)&&h(this[_],t)&&(this[_][t]=!1),re(this,t,y(1,e))};return s&&ne&&re(G,t,{configurable:!0,set:n}),oe(t,e)}).prototype,"toString",(function(){return J(this).tag})),M(q,"withoutSetter",(function(e){return oe(P(e),e)})),k.f=ue,C.f=ae,x.f=ce,S.f=E.f=le,T.f=he,L.f=function(e){return oe(N(e),e)},s&&(W(q.prototype,"description",{configurable:!0,get:function(){return J(this).description}}),a||M(G,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:q}),F(b(ee),(function(e){R(e)})),r({target:"Symbol",stat:!0,forced:!u},{for:function(e){var t=String(e);if(h(Q,t))return Q[t];var n=q(t);return Q[t]=n,Z[n]=t,n},keyFor:function(e){if(!ie(e))throw TypeError(e+" is not a symbol");if(h(Z,e))return Z[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:function(e,t){return void 0===t?w(e):se(w(e),t)},defineProperty:ae,defineProperties:se,getOwnPropertyDescriptor:ce}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:le,getOwnPropertySymbols:he}),r({target:"Object",stat:!0,forced:l((function(){T.f(1)}))},{getOwnPropertySymbols:function(e){return T.f(v(e))}}),Y)&&r({target:"JSON",stat:!0,forced:!u||l((function(){var e=q();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))}))},{stringify:function(e,t,n){for(var r,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=t,(d(t)||void 0!==e)&&!ie(e))return f(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!ie(t))return t}),o[1]=t,Y.apply(null,o)}});q.prototype[B]||O(q.prototype,B,q.prototype.valueOf),D(q,"Symbol"),j[_]=!0},function(e,t,n){"use strict";var r=n(3),o=n(9),i=n(0),a=n(6),s=n(7),u=n(11).f,c=n(94),l=i.Symbol;if(o&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new l(e):void 0===e?l():l(e);return""===e&&(h[t]=!0),t};c(f,l);var d=f.prototype=l.prototype;d.constructor=f;var p=d.toString,v="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;u(d,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(a(h,e))return"";var n=v?t.slice(7,-1):t.replace(m,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(e,t,n){n(180)("iterator")},function(e,t,n){var r=n(3),o=n(203),i=n(73);r({target:"Array",proto:!0},{fill:o}),i("fill")},function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){setTimeout((function(){throw e}),0)}n.d(t,"a",(function(){return r}))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(6),o=n(115),i=n(37),a=n(11);e.exports=function(e,t){for(var n=o(t),s=a.f,u=i.f,c=0;c<n.length;c++){var l=n[c];r(e,l)||s(e,l,u(t,l))}}},function(e,t,n){var r=n(0);e.exports=r},function(e,t,n){var r=n(60);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(16);e.exports=r("document","documentElement")},function(e,t,n){"use strict";var r=n(38),o=n(11),i=n(28);e.exports=function(e,t,n){var a=r(t);a in e?o.f(e,a,i(0,n)):e[a]=n}},function(e,t,n){"use strict";n(30);var r,o=n(3),i=n(9),a=n(121),s=n(0),u=n(116),c=n(12),l=n(76),h=n(6),f=n(137),d=n(138),p=n(75).codeAt,v=n(151),m=n(39),g=n(152),y=n(24),w=s.URL,b=g.URLSearchParams,S=g.getState,E=y.set,T=y.getterFor("URL"),x=Math.floor,C=Math.pow,k=/[A-Za-z]/,O=/[\d+-.A-Za-z]/,M=/\d/,A=/^(0x|0X)/,I=/^[0-7]+$/,j=/^\d+$/,P=/^[\dA-Fa-f]+$/,N=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,L=/[\u0000\t\u000A\u000D #/:?@[\\]]/,R=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,D=/[\t\u000A\u000D]/g,H=function(e,t){var n,r,o;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=_(t.slice(1,-1))))return"Invalid host";e.host=n}else if(W(e)){if(t=v(t),N.test(t))return"Invalid host";if(null===(n=F(t)))return"Invalid host";e.host=n}else{if(L.test(t))return"Invalid host";for(n="",r=d(t),o=0;o<r.length;o++)n+=Y(r[o],U);e.host=n}},F=function(e){var t,n,r,o,i,a,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(o=u[r]))return e;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=A.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?j:8==i?I:P).test(o))return e;a=parseInt(o,i)}n.push(a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=C(256,5-t))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*C(256,3-r);return s},_=function(e){var t,n,r,o,i,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,f=function(){return e.charAt(h)};if(":"==f()){if(":"!=e.charAt(1))return;h+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&P.test(f());)t=16*t+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,c>6)return;for(r=0;f();){if(o=null,r>0){if(!("."==f()&&r<4))return;h++}if(!M.test(f()))return;for(;M.test(f());){if(i=parseInt(f(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;h++}u[c]=256*u[c]+o,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[c++]=t}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u},B=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=x(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(t=r,n=o),t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},U={},J=f({},U,{" ":1,'"':1,"<":1,">":1,"`":1}),G=f({},J,{"#":1,"?":1,"{":1,"}":1}),q=f({},G,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Y=function(e,t){var n=p(e,0);return n>32&&n<127&&!h(t,e)?e:encodeURIComponent(e)},V={ftp:21,file:null,http:80,https:443,ws:80,wss:443},W=function(e){return h(V,e.scheme)},z=function(e){return""!=e.username||""!=e.password},X=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},K=function(e,t){var n;return 2==e.length&&k.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},$=function(e){var t;return e.length>1&&K(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Q=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&K(t[0],!0)||t.pop()},Z=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},ne={},re={},oe={},ie={},ae={},se={},ue={},ce={},le={},he={},fe={},de={},pe={},ve={},me={},ge={},ye={},we={},be={},Se=function(e,t,n,o){var i,a,s,u,c,l=n||ee,f=0,p="",v=!1,m=!1,g=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(R,"")),t=t.replace(D,""),i=d(t);f<=i.length;){switch(a=i[f],l){case ee:if(!a||!k.test(a)){if(n)return"Invalid scheme";l=ne;continue}p+=a.toLowerCase(),l=te;break;case te:if(a&&(O.test(a)||"+"==a||"-"==a||"."==a))p+=a.toLowerCase();else{if(":"!=a){if(n)return"Invalid scheme";p="",l=ne,f=0;continue}if(n&&(W(e)!=h(V,p)||"file"==p&&(z(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void(W(e)&&V[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?l=de:W(e)&&o&&o.scheme==e.scheme?l=re:W(e)?l=se:"/"==i[f+1]?(l=oe,f++):(e.cannotBeABaseURL=!0,e.path.push(""),l=ye)}break;case ne:if(!o||o.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(o.cannotBeABaseURL&&"#"==a){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment="",e.cannotBeABaseURL=!0,l=be;break}l="file"==o.scheme?de:ie;continue;case re:if("/"!=a||"/"!=i[f+1]){l=ie;continue}l=ue,f++;break;case oe:if("/"==a){l=ce;break}l=ge;continue;case ie:if(e.scheme=o.scheme,a==r)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if("/"==a||"\\"==a&&W(e))l=ae;else if("?"==a)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query="",l=we;else{if("#"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),l=ge;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment="",l=be}break;case ae:if(!W(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,l=ge;continue}l=ce}else l=ue;break;case se:if(l=ue,"/"!=a||"/"!=p.charAt(f+1))continue;f++;break;case ue:if("/"!=a&&"\\"!=a){l=ce;continue}break;case ce:if("@"==a){v&&(p="%40"+p),v=!0,s=d(p);for(var y=0;y<s.length;y++){var w=s[y];if(":"!=w||g){var b=Y(w,q);g?e.password+=b:e.username+=b}else g=!0}p=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&W(e)){if(v&&""==p)return"Invalid authority";f-=d(p).length+1,p="",l=le}else p+=a;break;case le:case he:if(n&&"file"==e.scheme){l=ve;continue}if(":"!=a||m){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&W(e)){if(W(e)&&""==p)return"Invalid host";if(n&&""==p&&(z(e)||null!==e.port))return;if(u=H(e,p))return u;if(p="",l=me,n)return;continue}"["==a?m=!0:"]"==a&&(m=!1),p+=a}else{if(""==p)return"Invalid host";if(u=H(e,p))return u;if(p="",l=fe,n==he)return}break;case fe:if(!M.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&W(e)||n){if(""!=p){var S=parseInt(p,10);if(S>65535)return"Invalid port";e.port=W(e)&&S===V[e.scheme]?null:S,p=""}if(n)return;l=me;continue}return"Invalid port"}p+=a;break;case de:if(e.scheme="file","/"==a||"\\"==a)l=pe;else{if(!o||"file"!=o.scheme){l=ge;continue}if(a==r)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if("?"==a)e.host=o.host,e.path=o.path.slice(),e.query="",l=we;else{if("#"!=a){$(i.slice(f).join(""))||(e.host=o.host,e.path=o.path.slice(),Q(e)),l=ge;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment="",l=be}}break;case pe:if("/"==a||"\\"==a){l=ve;break}o&&"file"==o.scheme&&!$(i.slice(f).join(""))&&(K(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),l=ge;continue;case ve:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&K(p))l=ge;else if(""==p){if(e.host="",n)return;l=me}else{if(u=H(e,p))return u;if("localhost"==e.host&&(e.host=""),n)return;p="",l=me}continue}p+=a;break;case me:if(W(e)){if(l=ge,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(l=ge,"/"!=a))continue}else e.fragment="",l=be;else e.query="",l=we;break;case ge:if(a==r||"/"==a||"\\"==a&&W(e)||!n&&("?"==a||"#"==a)){if(".."===(c=(c=p).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(Q(e),"/"==a||"\\"==a&&W(e)||e.path.push("")):Z(p)?"/"==a||"\\"==a&&W(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&K(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(a==r||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",l=we):"#"==a&&(e.fragment="",l=be)}else p+=Y(a,G);break;case ye:"?"==a?(e.query="",l=we):"#"==a?(e.fragment="",l=be):a!=r&&(e.path[0]+=Y(a,U));break;case we:n||"#"!=a?a!=r&&("'"==a&&W(e)?e.query+="%27":e.query+="#"==a?"%23":Y(a,U)):(e.fragment="",l=be);break;case be:a!=r&&(e.fragment+=Y(a,J))}f++}},Ee=function(e){var t,n,r=l(this,Ee,"URL"),o=arguments.length>1?arguments[1]:void 0,a=String(e),s=E(r,{type:"URL"});if(void 0!==o)if(o instanceof Ee)t=T(o);else if(n=Se(t={},String(o)))throw TypeError(n);if(n=Se(s,a,null,t))throw TypeError(n);var u=s.searchParams=new b,c=S(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},i||(r.href=xe.call(r),r.origin=Ce.call(r),r.protocol=ke.call(r),r.username=Oe.call(r),r.password=Me.call(r),r.host=Ae.call(r),r.hostname=Ie.call(r),r.port=je.call(r),r.pathname=Pe.call(r),r.search=Ne.call(r),r.searchParams=Le.call(r),r.hash=Re.call(r))},Te=Ee.prototype,xe=function(){var e=T(this),t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,a=e.path,s=e.query,u=e.fragment,c=t+":";return null!==o?(c+="//",z(e)&&(c+=n+(r?":"+r:"")+"@"),c+=B(o),null!==i&&(c+=":"+i)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Ce=function(){var e=T(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&W(e)?t+"://"+B(e.host)+(null!==n?":"+n:""):"null"},ke=function(){return T(this).scheme+":"},Oe=function(){return T(this).username},Me=function(){return T(this).password},Ae=function(){var e=T(this),t=e.host,n=e.port;return null===t?"":null===n?B(t):B(t)+":"+n},Ie=function(){var e=T(this).host;return null===e?"":B(e)},je=function(){var e=T(this).port;return null===e?"":String(e)},Pe=function(){var e=T(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ne=function(){var e=T(this).query;return e?"?"+e:""},Le=function(){return T(this).searchParams},Re=function(){var e=T(this).fragment;return e?"#"+e:""},De=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(i&&u(Te,{href:De(xe,(function(e){var t=T(this),n=String(e),r=Se(t,n);if(r)throw TypeError(r);S(t.searchParams).updateSearchParams(t.query)})),origin:De(Ce),protocol:De(ke,(function(e){var t=T(this);Se(t,String(e)+":",ee)})),username:De(Oe,(function(e){var t=T(this),n=d(String(e));if(!X(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=Y(n[r],q)}})),password:De(Me,(function(e){var t=T(this),n=d(String(e));if(!X(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=Y(n[r],q)}})),host:De(Ae,(function(e){var t=T(this);t.cannotBeABaseURL||Se(t,String(e),le)})),hostname:De(Ie,(function(e){var t=T(this);t.cannotBeABaseURL||Se(t,String(e),he)})),port:De(je,(function(e){var t=T(this);X(t)||(""==(e=String(e))?t.port=null:Se(t,e,fe))})),pathname:De(Pe,(function(e){var t=T(this);t.cannotBeABaseURL||(t.path=[],Se(t,e+"",me))})),search:De(Ne,(function(e){var t=T(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Se(t,e,we)),S(t.searchParams).updateSearchParams(t.query)})),searchParams:De(Le),hash:De(Re,(function(e){var t=T(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Se(t,e,be)):t.fragment=null}))}),c(Te,"toJSON",(function(){return xe.call(this)}),{enumerable:!0}),c(Te,"toString",(function(){return xe.call(this)}),{enumerable:!0}),w){var He=w.createObjectURL,Fe=w.revokeObjectURL;He&&c(Ee,"createObjectURL",(function(e){return He.apply(w,arguments)})),Fe&&c(Ee,"revokeObjectURL",(function(e){return Fe.apply(w,arguments)}))}m(Ee,"URL"),o({global:!0,forced:!a,sham:!i},{URL:Ee})},function(e,t,n){var r=n(6),o=n(15),i=n(50),a=n(135),s=i("IE_PROTO"),u=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},function(e,t,n){var r=n(4);e.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},function(e,t,n){var r=n(1),o=n(33),i=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},function(e,t,n){var r=n(12);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var r=n(3),o=n(43),i=n(22),a=n(84),s=[].join,u=o!=Object,c=a("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(e){return s.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(141),o=n(134),i=n(4),a=n(20),s=n(124),u=n(142),c=n(13),l=n(143),h=n(62),f=n(2),d=[].push,p=Math.min,v=!f((function(){return!RegExp(4294967295,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(a(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!o(e))return t.call(r,e,i);for(var s,u,c,l=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,v=new RegExp(e.source,f+"g");(s=h.call(v,r))&&!((u=v.lastIndex)>p&&(l.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&d.apply(l,s.slice(1)),c=s[0].length,p=u,l.length>=i));)v.lastIndex===s.index&&v.lastIndex++;return p===r.length?!c&&v.test("")||l.push(""):l.push(r.slice(p)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=a(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,n):r.call(String(o),t,n)},function(e,o){var a=n(r,e,this,o,r!==t);if(a.done)return a.value;var h=i(e),f=String(this),d=s(h,RegExp),m=h.unicode,g=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(v?"y":"g"),y=new d(v?h:"^(?:"+h.source+")",g),w=void 0===o?4294967295:o>>>0;if(0===w)return[];if(0===f.length)return null===l(y,f)?[f]:[];for(var b=0,S=0,E=[];S<f.length;){y.lastIndex=v?S:0;var T,x=l(y,v?f:f.slice(S));if(null===x||(T=p(c(y.lastIndex+(v?0:S)),f.length))===b)S=u(f,S,m);else{if(E.push(f.slice(b,S)),E.length===w)return E;for(var C=1;C<=x.length-1;C++)if(E.push(x[C]),E.length===w)return E;S=b=T}}return E.push(f.slice(b)),E}]}),!v)},function(e,t,n){"use strict";var r=n(3),o=n(70),i=n(31),a=n(13),s=n(15),u=n(86),c=n(98),l=n(117)("splice"),h=Math.max,f=Math.min;r({target:"Array",proto:!0,forced:!l},{splice:function(e,t){var n,r,l,d,p,v,m=s(this),g=a(m.length),y=o(e,g),w=arguments.length;if(0===w?n=r=0:1===w?(n=0,r=g-y):(n=w-2,r=f(h(i(t),0),g-y)),g+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=u(m,r),d=0;d<r;d++)(p=y+d)in m&&c(l,d,m[p]);if(l.length=r,n<r){for(d=y;d<g-r;d++)v=d+n,(p=d+r)in m?m[v]=m[p]:delete m[v];for(d=g;d>g-r+n;d--)delete m[d-1]}else if(n>r)for(d=g-r;d>y;d--)v=d+n-1,(p=d+r-1)in m?m[v]=m[p]:delete m[v];for(d=0;d<n;d++)m[d+y]=arguments[d+2];return m.length=g-r+n,l}})},function(e,t,n){var r=n(3),o=n(15),i=n(85);r({target:"Object",stat:!0,forced:n(2)((function(){i(1)}))},{keys:function(e){return i(o(e))}})},function(e,t,n){"use strict";var r=n(3),o=n(25),i=n(15),a=n(2),s=n(84),u=[],c=u.sort,l=a((function(){u.sort(void 0)})),h=a((function(){u.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:l||!h||!f},{sort:function(e){return void 0===e?c.call(i(this)):c.call(i(this),o(e))}})},function(e,t,n){"use strict";var r=n(3),o=n(79).filter;r({target:"Array",proto:!0,forced:!n(117)("filter")},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(34),n(35),n(166),n(8);var i=n(27),a=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),this.isDouble=function(e){return!1},this.getPoints=function(){return 0},!t.tiles instanceof Array)throw"config.tiles must be an array of Tiles";this.tiles=t.tiles,this.exposed=!0,this.isSequence=!1,this.isPongOrKong=!1,this.isPair=!1,this.toJSON=function(){var e={class:"TileContainer"};return e.exposed=this.exposed,e.tiles=this.tiles,JSON.stringify(e)}.bind(this)}var t,n,a;return t=e,a=[{key:"findNonJoker",value:function(e){return e.find((function(e){return"joker"!==e.type}))}},{key:"isValidMatch",value:function(t,n){return new e({tiles:t}).isValidMatch(n)}},{key:"fromJSON",value:function(t){var n=JSON.parse(t);if("TileContainer"!==n.class)throw"String was not created by TileContainer.toJSON()";return n.tiles=n.tiles.map((function(e){return i.fromJSON(e)})),new e(n)}}],(n=[{key:"isValidMatch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.findNonJoker(this.tiles);return!!n&&!!this.tiles.every((function(e){if(e.matches(n)||t&&"joker"===e.type)return!0}))&&n}}])&&o(t.prototype,n),a&&o(t,a),e}();e.exports=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(36),o=n(92),i={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(o.a)(e)},complete:function(){}}},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),a=new T(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};p[o]=function(){return this};var v=Object.getPrototypeOf,m=v&&v(v(x([])));m&&m!==t&&n.call(m,o)&&(p=m);var g=d.prototype=h.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var r;this._invoke=function(o,i){function a(){return new t((function(r,a){!function r(o,i,a,s){var u=c(e[o],e,i);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=g.constructor=d,d.constructor=f,f.displayName=s(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(w.prototype),w.prototype[i]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new w(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(g),s(g,a,"Generator"),g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(0),o=n(49),i=r.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,t,n){var r=n(16),o=n(69),i=n(71),a=n(4);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(9),o=n(11),i=n(4),a=n(85);e.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),s=r.length,u=0;s>u;)o.f(e,n=r[u++],t[n]);return e}},function(e,t,n){var r=n(2),o=n(1),i=n(51),a=o("species");e.exports=function(e){return i>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){"use strict";var r=n(3),o=n(119),i=n(100),a=n(136),s=n(39),u=n(10),c=n(12),l=n(1),h=n(29),f=n(33),d=n(120),p=d.IteratorPrototype,v=d.BUGGY_SAFARI_ITERATORS,m=l("iterator"),g=function(){return this};e.exports=function(e,t,n,l,d,y,w){o(n,t,l);var b,S,E,T=function(e){if(e===d&&M)return M;if(!v&&e in k)return k[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},x=t+" Iterator",C=!1,k=e.prototype,O=k[m]||k["@@iterator"]||d&&k[d],M=!v&&O||T(d),A="Array"==t&&k.entries||O;if(A&&(b=i(A.call(new e)),p!==Object.prototype&&b.next&&(h||i(b)===p||(a?a(b,p):"function"!=typeof b[m]&&u(b,m,g)),s(b,x,!0,!0),h&&(f[x]=g))),"values"==d&&O&&"values"!==O.name&&(C=!0,M=function(){return O.call(this)}),h&&!w||k[m]===M||u(k,m,M),f[t]=M,d)if(S={values:T("values"),keys:y?M:T("keys"),entries:T("entries")},w)for(E in S)(v||C||!(E in k))&&c(k,E,S[E]);else r({target:t,proto:!0,forced:v||C},S);return S}},function(e,t,n){"use strict";var r=n(120).IteratorPrototype,o=n(52),i=n(28),a=n(39),s=n(33),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=o(r,{next:i(1,n)}),a(e,c,!1,!0),s[c]=u,e}},function(e,t,n){"use strict";var r,o,i,a=n(2),s=n(100),u=n(10),c=n(6),l=n(1),h=n(29),f=l("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(r=o):d=!0);var p=null==r||a((function(){var e={};return r[f].call(e)!==e}));p&&(r={}),h&&!p||c(r,f)||u(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},function(e,t,n){var r=n(2),o=n(1),i=n(29),a=o("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(e,t,n){"use strict";var r=n(47),o=n(55);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,t,n){"use strict";var r,o,i,a,s=n(3),u=n(29),c=n(0),l=n(16),h=n(154),f=n(12),d=n(103),p=n(39),v=n(155),m=n(7),g=n(25),y=n(76),w=n(49),b=n(156),S=n(140),E=n(124),T=n(125).set,x=n(157),C=n(159),k=n(160),O=n(127),M=n(161),A=n(24),I=n(72),j=n(1),P=n(42),N=n(51),L=j("species"),R="Promise",D=A.get,H=A.set,F=A.getterFor(R),_=h,B=c.TypeError,U=c.document,J=c.process,G=l("fetch"),q=O.f,Y=q,V=!!(U&&U.createEvent&&c.dispatchEvent),W="function"==typeof PromiseRejectionEvent,z=I(R,(function(){if(!(w(_)!==String(_))){if(66===N)return!0;if(!P&&!W)return!0}if(u&&!_.prototype.finally)return!0;if(N>=51&&/native code/.test(_))return!1;var e=_.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[L]=t,!(e.then((function(){}))instanceof t)})),X=z||!S((function(e){_.all(e).catch((function(){}))})),K=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},$=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;x((function(){for(var r=e.value,o=1==e.state,i=0;n.length>i;){var a,s,u,c=n[i++],l=o?c.ok:c.fail,h=c.resolve,f=c.reject,d=c.domain;try{l?(o||(2===e.rejection&&te(e),e.rejection=1),!0===l?a=r:(d&&d.enter(),a=l(r),d&&(d.exit(),u=!0)),a===c.promise?f(B("Promise-chain cycle")):(s=K(a))?s.call(a,h,f):h(a)):f(r)}catch(e){d&&!u&&d.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Z(e)}))}},Q=function(e,t,n){var r,o;V?((r=U.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!W&&(o=c["on"+e])?o(r):"unhandledrejection"===e&&k("Unhandled promise rejection",n)},Z=function(e){T.call(c,(function(){var t,n=e.facade,r=e.value;if(ee(e)&&(t=M((function(){P?J.emit("unhandledRejection",r,n):Q("unhandledrejection",n,r)})),e.rejection=P||ee(e)?2:1,t.error))throw t.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e){T.call(c,(function(){var t=e.facade;P?J.emit("rejectionHandled",t):Q("rejectionhandled",t,e.value)}))},ne=function(e,t,n){return function(r){e(t,r,n)}},re=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,$(e,!0))},oe=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw B("Promise can't be resolved itself");var r=K(t);r?x((function(){var n={done:!1};try{r.call(t,ne(oe,n,e),ne(re,n,e))}catch(t){re(n,t,e)}})):(e.value=t,e.state=1,$(e,!1))}catch(t){re({done:!1},t,e)}}};z&&(_=function(e){y(this,_,R),g(e),r.call(this);var t=D(this);try{e(ne(oe,t),ne(re,t))}catch(e){re(t,e)}},(r=function(e){H(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(_.prototype,{then:function(e,t){var n=F(this),r=q(E(this,_));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=P?J.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&$(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,t=D(e);this.promise=e,this.resolve=ne(oe,t),this.reject=ne(re,t)},O.f=q=function(e){return e===_||e===i?new o(e):Y(e)},u||"function"!=typeof h||(a=h.prototype.then,f(h.prototype,"then",(function(e,t){var n=this;return new _((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof G&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return C(_,G.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:z},{Promise:_}),p(_,R,!1,!0),v(R),i=l(R),s({target:R,stat:!0,forced:z},{reject:function(e){var t=q(this);return t.reject.call(void 0,e),t.promise}}),s({target:R,stat:!0,forced:u||z},{resolve:function(e){return C(u&&this===i?_:this,e)}}),s({target:R,stat:!0,forced:X},{all:function(e){var t=this,n=q(t),r=n.resolve,o=n.reject,i=M((function(){var n=g(t.resolve),i=[],a=0,s=1;b(e,(function(e){var u=a++,c=!1;i.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,i[u]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=q(t),r=n.reject,o=M((function(){var o=g(t.resolve);b(e,(function(e){o.call(t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},function(e,t,n){var r=n(4),o=n(25),i=n(1)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[i])?t:o(n)}},function(e,t,n){var r,o,i,a=n(0),s=n(2),u=n(40),c=n(97),l=n(56),h=n(126),f=n(42),d=a.location,p=a.setImmediate,v=a.clearImmediate,m=a.process,g=a.MessageChannel,y=a.Dispatch,w=0,b={},S=function(e){if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},E=function(e){return function(){S(e)}},T=function(e){S(e.data)},x=function(e){a.postMessage(e+"",d.protocol+"//"+d.host)};p&&v||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++w]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(w),w},v=function(e){delete b[e]},f?r=function(e){m.nextTick(E(e))}:y&&y.now?r=function(e){y.now(E(e))}:g&&!h?(i=(o=new g).port2,o.port1.onmessage=T,r=u(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&d&&"file:"!==d.protocol&&!s(x)?(r=x,a.addEventListener("message",T,!1)):r="onreadystatechange"in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),S(e)}}:function(e){setTimeout(E(e),0)}),e.exports={set:p,clear:v}},function(e,t,n){var r=n(61);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,t,n){"use strict";var r=n(25),o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n(105),n(106),n(77),n(123),n(26),n(32);var o=new Promise((function(e){e()})),i=0,a=0,s=function(){"use strict";return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3200,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e);var u=document.createElement("div");u.classList.add("blocklessAlertCover"),u.style.display="none",document.body.appendChild(u);var c=document.createElement("p");c.innerHTML=t,u.appendChild(c);var l=o;return o=new Promise((function(e){i++,a=Math.max(i,a),o.then((function(){if(a>6&&s.optional)return console.log("Skipping optional message due to time. "),i--,e();console.log(i+" messages remaining to be posted. ");var t=n/Math.min(2.5,Math.max(1,Math.pow((i+(a>6?i:a))/2,.7))||1);console.log("Adjusting duration from ".concat(n," to ").concat(t)),n=t,u.style.animation="fadeInAndOut "+n+"ms ease-in",u.style.display="",setTimeout((function(){u.remove(),i--,e()}),n)}))})),{onStart:l,onEnd:o}}}();e.exports={Notification:function e(t,n){"use strict";r(this,e);var o=document.createElement("div");o.id="errorPopupCover",o.style.display="none",document.body.appendChild(o);var i=document.createElement("div");i.id="errorPopup",o.appendChild(i);var a=document.createElement("p");if(a.innerHTML=t,a.id="errorText",i.appendChild(a),"string"==typeof n){var s=document.createElement("p");s.innerHTML=n.split("\n").join("<br>"),s.id="messageText",i.appendChild(s)}else i.appendChild(n),n.id="messageText";var u=document.createElement("button");u.id="dismissButton",u.innerHTML="Dismiss",i.appendChild(u);var c=function(e){this.ondismissed&&this.ondismissed(),o.remove()}.bind(this);setTimeout((function(){u.addEventListener("click",c),o.addEventListener("click",(function(e){e.target===o&&c()}))}),500),this.show=function(){o.style.display=""},this.dismiss=c},MessageBar:function e(t){"use strict";r(this,e);var n=document.createElement("div");n.id="notificationBar";var o=document.createElement("p");o.innerHTML=t,n.appendChild(o),this.show=function(e){document.body.appendChild(n),setTimeout((function(){n.remove()}),e)},this.dismiss=function(){n.remove()}},BlocklessAlert:s}},function(e,t,n){"use strict";var r=n(3),o=n(176).trim;r({target:"String",proto:!0,forced:n(198)("trim")},{trim:function(){return o(this)}})},function(e,t,n){"use strict";var r=n(9),o=n(0),i=n(72),a=n(12),s=n(6),u=n(19),c=n(201),l=n(38),h=n(2),f=n(52),d=n(69).f,p=n(37).f,v=n(11).f,m=n(176).trim,g=o.Number,y=g.prototype,w="Number"==u(f(y)),b=function(e){var t,n,r,o,i,a,s,u,c=l(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=m(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(a=(i=c.slice(2)).length,s=0;s<a;s++)if((u=i.charCodeAt(s))<48||u>o)return NaN;return parseInt(i,r)}return+c};if(i("Number",!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var S,E=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof E&&(w?h((function(){y.valueOf.call(n)})):"Number"!=u(n))?c(new g(b(t)),n,E):b(t)},T=r?d(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;T.length>x;x++)s(g,S=T[x])&&!s(E,S)&&v(E,S,p(g,S));E.prototype=y,y.constructor=E,a(o,"Number",E)}},function(e,t,n){var r=n(9),o=n(11).f,i=Function.prototype,a=i.toString,s=/^\s*function ([^ (]*)/;r&&!("name"in i)&&o(i,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},function(e,t,n){var r=n(7),o=n(19),i=n(1)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(2);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(4),o=n(149);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n),o(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},function(e,t,n){"use strict";var r=n(9),o=n(2),i=n(85),a=n(71),s=n(67),u=n(15),c=n(43),l=Object.assign,h=Object.defineProperty;e.exports=!l||o((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||"abcdefghijklmnopqrst"!=i(l({},t)).join("")}))?function(e,t){for(var n=u(e),o=arguments.length,l=1,h=a.f,f=s.f;o>l;)for(var d,p=c(arguments[l++]),v=h?i(p).concat(h(p)):i(p),m=v.length,g=0;m>g;)d=v[g++],r&&!f.call(p,d)||(n[d]=p[d]);return n}:l},function(e,t,n){"use strict";var r=n(40),o=n(15),i=n(150),a=n(102),s=n(13),u=n(98),c=n(54);e.exports=function(e){var t,n,l,h,f,d,p=o(e),v="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:void 0,y=void 0!==g,w=c(p),b=0;if(y&&(g=r(g,m>2?arguments[2]:void 0,2)),null==w||v==Array&&a(w))for(n=new v(t=s(p.length));t>b;b++)d=y?g(p[b],b):p[b],u(n,b,d);else for(f=(h=w.call(p)).next,n=new v;!(l=f.call(h)).done;b++)d=y?i(h,g,[l.value,b],!0):l.value,u(n,b,d);return n.length=b,n}},function(e,t,n){"use strict";var r=n(4);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(1)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},function(e,t,n){"use strict";n(77);var r=n(12),o=n(2),i=n(1),a=n(62),s=n(10),u=i("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l="$0"==="a".replace(/./,"$0"),h=i("replace"),f=!!/./[h]&&""===/./[h]("a","$0"),d=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,h){var p=i(e),v=!o((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),m=v&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!v||!m||"replace"===e&&(!c||!l||f)||"split"===e&&!d){var g=/./[p],y=n(p,""[e],(function(e,t,n,r,o){return t.exec===a?v&&!o?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),w=y[0],b=y[1];r(String.prototype,e,w),r(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}h&&s(RegExp.prototype[p],"sham",!0)}},function(e,t,n){"use strict";var r=n(75).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(19),o=n(62);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){n(99),n(26),n(30),n(23),n(41);try{if(window.Capacitor){var r=function(e){console.log("Current URL: "+window.location.href);var t=new URL(e);t.hash===window.location.hash&&t.pathname===window.location.pathname?console.log("Same URLs. Skipping"):t.pathname===window.location.pathname?(console.log("Same pathname. Setting and reloading. "),window.location.hash=t.hash,window.location.reload()):(console.log("Different pathname. Setting"),window.location.hash=t.hash,window.location.pathname=t.pathname)};Capacitor.Plugins.App.addListener("appUrlOpen",(function(e){console.log("App opened with URL: "+e.url),r(e.url)})),Capacitor.Plugins.App.getLaunchUrl().then((function(e){e&&e.url&&(console.log("Launch url: ",e.url),r(e.url))}))}}catch(e){console.error(e)}},function(e,t,n){"use strict";var r=n(3),o=n(79).findIndex,i=n(73),a=!0;"findIndex"in[]&&Array(1).findIndex((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},function(e,t,n){var r=n(3),o=n(138);r({target:"Array",stat:!0,forced:!n(140)((function(e){Array.from(e)}))},{from:o})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(81);var o=n(133),i=n(112);var a=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function s(e){return e}function u(e){return 0===e.length?s:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var c=n(36),l=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var a=this.operator,s=function(e,t,n){if(e){if(e instanceof r.a)return e;if(e[o.a])return e[o.a]()}return e||t||n?new r.a(e,t,n):new r.a(i.a)}(e,t,n);if(a?s.add(a.call(s,this.source)):s.add(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),c.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){c.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,o=t.destination,i=t.isStopped;if(n||i)return!1;e=o&&o instanceof r.a?o:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=h(t))((function(t,r){var o;o=n.subscribe((function(t){try{e(t)}catch(e){r(e),o&&o.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[a]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:u(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=h(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function h(e){if(e||(e=c.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},function(e,t,n){var r=n(7);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var r=n(4),o=n(101);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){throw o(e),t}}},function(e,t,n){"use strict";var r=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,u=function(e){return e+22+75*(e<26)},c=function(e,t,n){var r=0;for(e=n?a(e/700):e>>1,e+=a(e/t);e>455;r+=36)e=a(e/35);return a(r+36*e/(e+38))},l=function(e){var t,n,r=[],o=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)}else t.push(o)}return t}(e)).length,l=128,h=0,f=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(s(n));var d=r.length,p=d;for(d&&r.push("-");p<o;){var v=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=l&&n<v&&(v=n);var m=p+1;if(v-l>a((2147483647-h)/m))throw RangeError(i);for(h+=(v-l)*m,l=v,t=0;t<e.length;t++){if((n=e[t])<l&&++h>2147483647)throw RangeError(i);if(n==l){for(var g=h,y=36;;y+=36){var w=y<=f?1:y>=f+26?26:y-f;if(g<w)break;var b=g-w,S=36-w;r.push(s(u(w+b%S))),g=a(b/S)}r.push(s(u(g))),f=c(h,m,p==d),h=0,++p}}++h,++l}return r.join("")};e.exports=function(e){var t,n,i=[],a=e.toLowerCase().replace(o,".").split(".");for(t=0;t<a.length;t++)n=a[t],i.push(r.test(n)?"xn--"+l(n):n);return i.join(".")}},function(e,t,n){"use strict";n(23);var r=n(3),o=n(16),i=n(121),a=n(12),s=n(103),u=n(39),c=n(119),l=n(24),h=n(76),f=n(6),d=n(40),p=n(55),v=n(4),m=n(7),g=n(52),y=n(28),w=n(153),b=n(54),S=n(1),E=o("fetch"),T=o("Headers"),x=S("iterator"),C=l.set,k=l.getterFor("URLSearchParams"),O=l.getterFor("URLSearchParamsIterator"),M=/\+/g,A=Array(4),I=function(e){return A[e-1]||(A[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},j=function(e){try{return decodeURIComponent(e)}catch(t){return e}},P=function(e){var t=e.replace(M," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(I(n--),j);return t}},N=/[!'()~]|%20/g,L={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},R=function(e){return L[e]},D=function(e){return encodeURIComponent(e).replace(N,R)},H=function(e,t){if(t)for(var n,r,o=t.split("&"),i=0;i<o.length;)(n=o[i++]).length&&(r=n.split("="),e.push({key:P(r.shift()),value:P(r.join("="))}))},F=function(e){this.entries.length=0,H(this.entries,e)},_=function(e,t){if(e<t)throw TypeError("Not enough arguments")},B=c((function(e,t){C(this,{type:"URLSearchParamsIterator",iterator:w(k(e).entries),kind:t})}),"Iterator",(function(){var e=O(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),U=function(){h(this,U,"URLSearchParams");var e,t,n,r,o,i,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(C(l,{type:"URLSearchParams",entries:d,updateURL:function(){},updateSearchParams:F}),void 0!==c)if(m(c))if("function"==typeof(e=b(c)))for(n=(t=e.call(c)).next;!(r=n.call(t)).done;){if((a=(i=(o=w(v(r.value))).next).call(o)).done||(s=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");d.push({key:a.value+"",value:s.value+""})}else for(u in c)f(c,u)&&d.push({key:u,value:c[u]+""});else H(d,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},J=U.prototype;s(J,{append:function(e,t){_(arguments.length,2);var n=k(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){_(arguments.length,1);for(var t=k(this),n=t.entries,r=e+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;t.updateURL()},get:function(e){_(arguments.length,1);for(var t=k(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){_(arguments.length,1);for(var t=k(this).entries,n=e+"",r=[],o=0;o<t.length;o++)t[o].key===n&&r.push(t[o].value);return r},has:function(e){_(arguments.length,1);for(var t=k(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){_(arguments.length,1);for(var n,r=k(this),o=r.entries,i=!1,a=e+"",s=t+"",u=0;u<o.length;u++)(n=o[u]).key===a&&(i?o.splice(u--,1):(i=!0,n.value=s));i||o.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,n,r=k(this),o=r.entries,i=o.slice();for(o.length=0,n=0;n<i.length;n++){for(e=i[n],t=0;t<n;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===n&&o.push(e)}r.updateURL()},forEach:function(e){for(var t,n=k(this).entries,r=d(e,arguments.length>1?arguments[1]:void 0,3),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new B(this,"keys")},values:function(){return new B(this,"values")},entries:function(){return new B(this,"entries")}},{enumerable:!0}),a(J,x,J.entries),a(J,"toString",(function(){for(var e,t=k(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(D(e.key)+"="+D(e.value));return n.join("&")}),{enumerable:!0}),u(U,"URLSearchParams"),r({global:!0,forced:!i},{URLSearchParams:U}),i||"function"!=typeof E||"function"!=typeof T||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,o=[e];return arguments.length>1&&(m(t=arguments[1])&&(n=t.body,"URLSearchParams"===p(n)&&((r=t.headers?new T(t.headers):new T).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:y(0,String(n)),headers:y(0,r)}))),o.push(t)),E.apply(this,o)}}),e.exports={URLSearchParams:U,getState:k}},function(e,t,n){var r=n(4),o=n(54);e.exports=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,n){var r=n(0);e.exports=r.Promise},function(e,t,n){"use strict";var r=n(16),o=n(11),i=n(1),a=n(9),s=i("species");e.exports=function(e){var t=r(e),n=o.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(4),o=n(102),i=n(13),a=n(40),s=n(54),u=n(101),c=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var l,h,f,d,p,v,m,g=n&&n.that,y=!(!n||!n.AS_ENTRIES),w=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),S=a(t,g,1+y+b),E=function(e){return l&&u(l),new c(!0,e)},T=function(e){return y?(r(e),b?S(e[0],e[1],E):S(e[0],e[1])):b?S(e,E):S(e)};if(w)l=e;else{if("function"!=typeof(h=s(e)))throw TypeError("Target is not iterable");if(o(h)){for(f=0,d=i(e.length);d>f;f++)if((p=T(e[f]))&&p instanceof c)return p;return new c(!1)}l=h.call(e)}for(v=l.next;!(m=v.call(l)).done;){try{p=T(m.value)}catch(e){throw u(l),e}if("object"==typeof p&&p&&p instanceof c)return p}return new c(!1)}},function(e,t,n){var r,o,i,a,s,u,c,l,h=n(0),f=n(37).f,d=n(125).set,p=n(126),v=n(158),m=n(42),g=h.MutationObserver||h.WebKitMutationObserver,y=h.document,w=h.process,b=h.Promise,S=f(h,"queueMicrotask"),E=S&&S.value;E||(r=function(){var e,t;for(m&&(e=w.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},p||m||v||!g||!y?b&&b.resolve?(c=b.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=m?function(){w.nextTick(r)}:function(){d.call(h,r)}:(s=!0,u=y.createTextNode(""),new g(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),e.exports=E||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},function(e,t,n){var r=n(61);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,t,n){var r=n(4),o=n(7),i=n(127);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(0);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(2);function o(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){function r(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,u,"next",e)}function u(e){r(a,o,i,s,u,"throw",e)}s(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n(123),n(26),n(78),n(107),n(5),n(99),n(30),n(23),n(41),n(17),n(113);var u=n(128),c=function(){"use strict";function e(t){i(this,e);var r,a=function(e){var t=JSON.parse(e.data);console.log(t),"joinRoom"===t.type?l(t):"createRoom"===t.type?c(t):"roomActionState"===t.type?v(t):"roomActionKickFromRoom"===t.type||("roomActionLeaveRoom"===t.type?h(t):"getCurrentRoom"===t.type?m(t):"displayMessage"===t.type?new u.Notification(t.message.title,t.message.body).show():"roomActionStartGame"===t.type?d(t):"roomActionEndGame"===t.type?p(t):"roomActionPlaceTiles"===t.type?this.onPlaceTiles instanceof Function&&this.onPlaceTiles(t):"roomActionGameplayAlert"===t.type?this.onGameplayAlert instanceof Function&&this.onGameplayAlert(t):console.log("Unknown Type "+t.type))}.bind(this);this.createWebsocket=function(){var e=o(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.websocket=new WebSocket(t),this.websocket.addEventListener("message",a),this.websocket.addEventListener("open",(function(){window.setConnectionStatus&&window.setConnectionStatus({connected:!0}),r&&(r.dismiss(),r=null)})),this.websocket.addEventListener("error",function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}().bind(this)),this.websocket.addEventListener("close",function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.setConnectionStatus&&window.setConnectionStatus({connected:!1}),console.warn(t),1e3===t.code){e.next=8;break}return e.next=5,new Promise((function(e,t){setTimeout(e,1e3)}));case 5:this.createWebsocket(),stateManager.offlineMode||this.getCurrentRoom(),!1===stateManager.offlineMode&&(r&&(r.dismiss(),r=null),(r=new u.MessageBar("You Disconnected from the Server. Attempting to Reconnect...")).show(8e3));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(this)),c=new(function(){function e(){i(this,e)}return s(e,[{key:"on",value:function(e,t){console.log(e),this.onmessage=t}},{key:"send",value:function(e){console.log(e),a({data:e})}}]),e}()),this.sendMessage=function(){var e=o(regeneratorRuntime.mark((function e(t){var r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.offlineMode){e.next=7;break}this.localServer||(r=n(197),globalThis.serverStateManager=new r,this.localServer=n(234),console.log(this.localServer),this.localServer(c)),console.log(c),c.onmessage||(console.log(c),this.localServer(c)),c.onmessage(t),e.next=12;break;case 7:if(0!==this.websocket.readyState){e.next=10;break}return e.next=10,new Promise((function(e,t){o.websocket.onopen=e,o.websocket.onerror=t}));case 10:console.log(t),this.websocket.send(t);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}().bind(this),this.createWebsocket(),this.inRoom=!1,this.isHost=!1,this.inGame=!1,this.joinRoom=function(e,t){this.sendMessage(JSON.stringify({type:"joinRoom",clientId:window.clientId,roomId:e,nickname:t}))},this.createRoom=function(e,t){this.sendMessage(JSON.stringify({type:"createRoom",clientId:window.clientId,roomId:e,nickname:t}))},this.kickUser=function(e,t){this.sendMessage(JSON.stringify({type:"roomActionKickFromRoom",clientId:window.clientId,id:t}))},this.leaveRoom=function(e){this.sendMessage(JSON.stringify({type:"roomActionLeaveRoom",clientId:window.clientId}))},this.closeRoom=function(e){this.sendMessage(JSON.stringify({type:"roomActionCloseRoom",clientId:window.clientId}))},this.startGame=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sendMessage(JSON.stringify({type:"roomActionStartGame",clientId:window.clientId,settings:e}))},this.endGame=function(){this.sendMessage(JSON.stringify({type:"roomActionEndGame",clientId:window.clientId}))},this.placeTiles=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.sendMessage(JSON.stringify({type:"roomActionPlaceTiles",clientId:window.clientId,mahjong:t,message:e,swapJoker:n.swapJoker}))},this.addBot=function(e){this.sendMessage(JSON.stringify({type:"roomActionAddBot",clientId:window.clientId,botName:e}))},this.setNickname=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.clientId;this.sendMessage(JSON.stringify({type:"roomActionChangeNickname",clientId:window.clientId,nickname:e,targetId:t}))},this.getCurrentRoom=function(){this.sendMessage(JSON.stringify({type:"getCurrentRoom",clientId:window.clientId}))}.bind(this),this.revertState=function(e){this.sendMessage(JSON.stringify({type:"roomActionRevertState",message:e,clientId:window.clientId}))}.bind(this),this.createRoomFromState=function(e){this.sendMessage(JSON.stringify({type:"createRoomFromState",saveId:e,clientId:window.clientId}))}.bind(this),this.getState=function(e){console.log("Getting state..."),this.sendMessage(JSON.stringify({type:"roomActionState",clientId:window.clientId}))},this.callServerSave=function(e,t){this.sendMessage(JSON.stringify({type:"callServerSave",auth:e,saveName:t})),console.warn("You will need to manually kill the server on reboot and reload from save. ")},this.messageAllServerClients=function(e,t,n){this.sendMessage(JSON.stringify({type:"messageAllServerClients",auth:e,title:t,body:n}))};var c=function(e){"success"===e.status&&(this.inRoom=e.message,this.isHost=!0),this.onCreateRoom instanceof Function&&this.onCreateRoom(e)}.bind(this),l=function(e){"success"===e.status&&(this.inRoom=e.message),this.onJoinRoom instanceof Function&&this.onJoinRoom(e)}.bind(this),h=function(e){"success"===e.status&&(this.inRoom=!1,this.isHost=!1,!0===this.inGame&&(this.inGame=!1,p({status:"success",message:"State Sync"}))),this.onLeaveRoom instanceof Function&&this.onLeaveRoom(e)}.bind(this),f={onStartGame:[],onEndGame:[],onStateUpdate:[]};this.addEventListener=function(e,t){if(!f[e])throw e+" is not supported by this addEventListener";f[e].push(t)}.bind(this),this.removeEventListener=function(e,t){if(!f[e])throw e+" is not supported by this addEventListener";if(-1===f.indexOf(t))throw"Unable to find listener";f[e].splice(f.indexOf(t),1)}.bind(this);var d=function(e){"success"===e.status&&(this.inGame=!0),this.onStartGame instanceof Function&&this.onStartGame(e),f.onStartGame.forEach((function(t){t(e)}))}.bind(this),p=function(e){"success"===e.status&&(this.inGame=!1),this.onEndGame instanceof Function&&this.onEndGame(e),f.onEndGame.forEach((function(t){t(e)}))}.bind(this),v=function(e){this.lastState=e,this.isHost=e.message.isHost,!1===this.inGame&&!0===e.message.inGame?d({status:"success",message:"State Sync"}):!0===this.inGame&&!1===e.message.inGame&&p({status:"success",message:"State Sync"}),this.currentTurn=e.message.currentTurn,this.onStateUpdate instanceof Function&&this.onStateUpdate(e),f.onStateUpdate.forEach((function(t){t(e)}))}.bind(this),m=function(e){this.inRoom=e.message||!1,this.inRoom&&(l(e),this.getState(this.inRoom))}.bind(this)}return s(e,null,[{key:"setClientId",value:function(e){window.clientId=e,localStorage.setItem("clientId",window.clientId);var t=new URLSearchParams("?"+window.location.hash.slice(1));t.has("clientId")&&(window.clientId=t.get("clientId"))}},{key:"createNewClientId",value:function(){return"user"+Math.random()*Math.pow(2,53)}},{key:"getClientId",value:function(){var t=localStorage.getItem("clientId");return null===t&&(t=e.createNewClientId()),t}}]),e}();c.setClientId(c.getClientId()),e.exports=c},function(e,t,n){"use strict";var r=n(79).forEach,o=n(84)("forEach");e.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){"use strict";var r=n(3),o=n(79).find,i=n(73),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("find")},function(e,t,n){"use strict";var r=n(3),o=n(200).left,i=n(84),a=n(51),s=n(42);r({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(3),o=n(186),i=n(15),a=n(13),s=n(31),u=n(86);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),n=a(t.length),r=u(t,0);return r.length=o(r,t,t,n,0,void 0===e?1:s(e)),r}})},function(e,t,n){var r=n(3),o=n(137);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,o="/"===a.charAt(0))}return(o?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!o).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),a="/"===o(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&a&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),a=Math.min(o.length,i.length),s=a,u=0;u<a;u++)if(o[u]!==i[u]){s=u;break}var c=[];for(u=s;u<o.length;u++)c.push("..");return(c=c.concat(i.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){r=i;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){n=t+1;break}}else-1===r&&(o=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,o=!0,i=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(o=!1,r=a+1),46===s?-1===t?t=a:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){n=a+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(162))},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o;n(17),n(129),n(78),n(21),n(53),n(34),n(35);var i=function(){"use strict";function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clientId=t,this.nickname=t.slice(0,7),this.websocket=n,this.setWebsocket=function(e){this.websocket=e}.bind(this),this.setNickname=function(e){e.trim()&&(this.nickname=e.slice(0,14))}.bind(this),this.getNickname=function(){return this.nickname},this.suppressed=!1,this.suppress=function(){this.suppressed=!0},this.unsuppress=function(){this.suppressed=!1},this.message=function(e,t,n){if(!this.suppressed&&this.websocket)try{return this.websocket.send(JSON.stringify({type:e,message:t,status:n}))}catch(e){console.error(e)}}.bind(this),this.delete=function(e){try{n.close(1e3)}catch(e){}globalThis.serverStateManager.deleteClient(t)}.bind(this),this.setRoomId=function(e){this.roomId=e},this.getRoomId=function(){var e=globalThis.serverStateManager.getRoom(this.roomId);if(e&&e.clientIds.includes(this.clientId))return this.roomId},this.getRoom=function(){return globalThis.serverStateManager.getRoom(this.getRoomId())},this.toJSON=function(){var e={clientId:this.clientId,nickname:this.nickname,roomId:this.roomId,isBot:this.isBot};return JSON.stringify(e)}.bind(this)}var t,i,a;return t=e,a=[{key:"fromJSON",value:function(t){var r,i=JSON.parse(t);return i.isBot?(o||(o=n(189)),r=new o(i.clientId)):r=new e(i.clientId),r.setNickname(i.nickname),r.setRoomId(i.roomId),r}}],(i=null)&&r(t.prototype,i),a&&r(t,a),e}();e.exports=i},function(e,t,n){"use strict";n.r(t);n(113),n(66),n(21),n(53),n(32),n(99),n(26),n(30),n(23),n(41),n(175),n(196),n(123);var r,o=n(194);function i(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}try{if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)||navigator.userAgent.indexOf("Trident/")>-1){var a=document.createElement("h2");a.innerHTML="Internet Explorer is NOT Supported. Choose a different browser (Chrome, Firefox, Edge, Safari, Opera, and most other browsers should work)",document.body.insertBefore(a,document.body.firstChild)}}catch(e){console.error(e)}if("serviceWorker"in navigator)try{navigator.serviceWorker.register("packagedsw.js")}catch(e){console.error(e)}if(document.title="Mahjong 4 Friends - Free Multiplayer Mahjong",window.isAndroid=!1,document.referrer&&document.referrer.includes("android-app://com.mahjong4friends.twa")&&(window.isAndroid=!0),window.Capacitor)try{(r=regeneratorRuntime.mark((function e(){var t,r,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=1.2,e.prev=1,window.HTTP=n(242).HTTP,e.next=5,HTTP.get("https://itunes.apple.com/lookup?bundleId=com.mahjong4friends.twa",{},{});case 5:return r=e.sent,e.next=8,JSON.parse(r.data);case 8:o=e.sent,t=o.results[0].version,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.warn("Potential Error fetching latest version code",e.t0);case 15:return e.next=17,window.Capacitor.Plugins.Device.getInfo();case 17:i=e.sent,a=i.appVersion,parseFloat(a)<parseFloat(t)&&new(n(128).Notification)("App Update","There is a Mahjong 4 Friends <a href='https://apps.apple.com/us/app/mahjong-4-friends/id1552704332' target='_blank'>app update</a>. Downloading it is recommended. You may experience minor issues if you do not update. ").show();case 20:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))})()}catch(e){console.error(e)}n(144);[16,24,32,64,96,160,196].forEach((function(e){var t=document.createElement("link");t.rel="shortcut icon",t.type="image/png",t.sizes=e+"x"+e,t.href="assets/icons/".concat(e,"x").concat(e,"-green-dragon.png"),document.head.appendChild(t)}));var s=n(164);(0,n(235).polyfill)({dragImageTranslateOverride:o.scrollBehaviourDragImageTranslateOverride});var u=new URL(window.location.origin+window.location.pathname);u.pathname="/node","https:"===window.location.protocol?u.protocol="wss:":u.protocol="ws:",("127.0.0.1"===window.location.hostname||window.location.hostname.startsWith("192.168.1")||window.location.hostname.startsWith("10."))&&(u.port=7591);var c=u.toString();window.isNative&&(c="wss://mahjong4friends.com/node"),window.stateManager=new s(c),["Hand","Tile","Sequence","Pretty","Match","Wall","Popups"].forEach((function(e){window[e]=n(236)("./"+e+".js")}));n(191),n(190);function l(){document.documentElement.style.setProperty("--vh","".concat(window.innerHeight/100,"px")),document.documentElement.style.setProperty("--vw","".concat(window.innerWidth/100,"px"));var e=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--sal"));e-=10,document.documentElement.style.setProperty("--shiftPercentageLeft","".concat(Math.max(0,e/window.innerWidth)));var t=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--sar"));t-=10,document.documentElement.style.setProperty("--shiftPercentageRight","".concat(Math.max(0,t/window.innerWidth)))}window.addEventListener("resize",l),window.addEventListener("orientationchange",l),l(),window.addEventListener("touchmove",(function(){}),{passive:!1})},function(e,t,n){var r=n(134);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var r=n(1)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,n){"use strict";var r,o=n(3),i=n(37).f,a=n(13),s=n(173),u=n(20),c=n(174),l=n(29),h="".startsWith,f=Math.min,d=c("startsWith");o({target:"String",proto:!0,forced:!!(l||d||(r=i(String.prototype,"startsWith"),!r||r.writable))&&!d},{startsWith:function(e){var t=String(u(this));s(e);var n=a(f(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return h?h.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){var r=n(20),o="["+n(177)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(5),n(21),n(53),n(78),n(17),n(107),n(105),n(199),n(66),n(108),n(145),n(32),n(166),n(167),n(130),n(34),n(35),n(106),n(77),n(129),n(8),n(87),n(88),n(26),n(89),n(30),n(23),n(41),n(146),n(131);n(80);var s=n(64),u=n(27),c=n(48),l=(n(63),n(65)),h=n(111),f=n(14),d=function(){"use strict";function e(t){var o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.state=a,this.roomId=this.state.roomId=t,this.state.settings=this.state.settings||{},console.log(a),this.clientIds=this.state.clientIds=this.state.clientIds||[],this.inGame=!1,this.gameData={},this.setInstructions=function(e,t){var n;null!=this&&null!==(n=this.gameData)&&void 0!==n&&n.instructions||(this.gameData.instructions={}),this.gameData.instructions[e]=t}.bind(this),this.setAllInstructions=function(e,t){var n=this;this.clientIds.forEach((function(r){e.includes(r)||n.setInstructions(r,t)}))}.bind(this),Object.defineProperty(this,"hostClientId",{set:function(e){o=e,this.state.hostClientId=e},get:function(){return o}}),this.hostClientId=this.state.hostClientId,this.state.moves=this.state.moves||[];var d,p=function(){var e=this;if(this.state.seed){console.time("Loading Room State... "),this.clientIds.forEach(function(t){var n=globalThis.serverStateManager.getClient(t);n.suppress(),void 0===n.getRoomId()&&n.setRoomId(e.roomId)}.bind(this));var t=this.state.moves.slice(0);this.startGame({type:"roomActionStartGame",settings:this.state.settings}),console.log(t),t.forEach((function(t){e.onPlace.apply(e,r(t))})),this.clientIds.forEach((function(e){globalThis.serverStateManager.getClient(e).unsuppress()})),this.sendStateToClients(),delete this.init,console.timeEnd("Loading Room State... ")}}.bind(this);this.init=p,this.startGame=n(206).bind(this),this.addBot=n(227).bind(this),this.getSummary=function(e,t){var n=[];for(var r in this.gameData.playerHands){var o=this.gameData.playerHands[r],i="";i+=globalThis.serverStateManager.getClient(r).getNickname(),i+=": ",i+=o.wind;var a=o.score();if(r===e)if("american"===this.state.settings.gameStyle)f.getTileDifferential(this.gameData.card,o.contents).forEach((function(e,t){if(0===e.diff){i+=", ";var n=e.handOption;i+=n.score+" points - "+n.section+" #"+(n.cardIndex+1)}}));else a=o.score({isMahjong:!0,drewOwnTile:t});"chinese"===this.state.settings.gameStyle&&(i+=", "+a+" points"),r===e?(i+=" (Mahjong)"+(t?" - Drew Mahjong Tile":""),n.splice(0,0,i)):n.push(i)}return d=n.join("\n")}.bind(this);var v=!0;this.rotateWinds=function(){var e=["north","east","south","west"].reverse();for(var t in this.state.settings.windAssignments){var n=this.state.settings.windAssignments[t];this.state.settings.windAssignments[t]=e[(e.indexOf(n)+1)%4]}},this.goMahjong=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=globalThis.serverStateManager.getClient(e),o=this.gameData.playerHands[e],i=o.isMahjong(n?4:this.state.settings.maximumSequences);if(i instanceof s&&(o.contents=i.contents),!i&&!n&&"american"!==this.state.settings.gameStyle)return r.message("roomActionPlaceTiles","Unable to go mahjong with this hand. If you play by different rules, try again to override. ","error");this.gameData.isMahjong=!0,this.sendStateToClients(),"east"===this.state.settings.windAssignments[e]&&(v=!1),this.messageAll([e],"roomActionGameplayAlert",r.getNickname()+" has gone mahjong",{clientId:e,speech:"Mahjong"}),this.setAllInstructions([this.hostClientId],r.getNickname()+" has gone mahjong!\nPress End Game to return everybody to the room screen. "),this.setInstructions(this.hostClientId,r.getNickname()+" has gone mahjong!\nPress End Game to return everybody to the room screen. "),this.messageAll([],"displayMessage",{title:"Mahjong!",body:this.getSummary(e,t)},"success"),this.sendStateToClients()}.bind(this),this.revertState=function(t){if(!(t<1)){globalThis.serverStateManager.deleteRoom(this.roomId),this.state.moves=this.state.moves.slice(0,-t);var n=new e(this.roomId,this.state);globalThis.serverStateManager.createRoom(this.roomId,n),n.init()}}.bind(this),this.turnChoicesProxyHandler={set:n(228).bind(this)};var m=function(e){var t,n,r,o,i,a=this,s={};return s.inGame=this.inGame,s.isHost=e===this.hostClientId,this.gameData.wall&&(s.wallTiles=this.gameData.wall.tiles,this.gameData.isMahjong||(s.wallTiles=s.wallTiles.length)),s.isGameOver=(null==this||null===(t=this.gameData)||void 0===t?void 0:t.isMahjong)||(null==this||null===(n=this.gameData)||void 0===n||null===(r=n.wall)||void 0===r?void 0:r.isEmpty),s.settings=this.state.settings,s.instructions=(null==this||null===(o=this.gameData)||void 0===o||null===(i=o.instructions)||void 0===i?void 0:i[e])||"",s.discardPile=this.gameData.discardPile,this.gameData.currentTurn&&(s.currentTurn={thrown:this.gameData.currentTurn.thrown,userTurn:this.gameData.currentTurn.userTurn,playersReady:Object.keys(this.gameData.currentTurn.turnChoices||{})},e===this.gameData.currentTurn.userTurn&&(s.currentTurn.lastDrawn=this.lastDrawn),this.gameData.charleston&&(s.currentTurn.charleston=!0)),s.clients=[],this.clientIds.slice(0,s.inGame?4:1/0).forEach((function(t){var n={id:t,nickname:globalThis.serverStateManager.getClient(t).getNickname(),isHost:t===a.hostClientId};if(a.inGame){var r=a.gameData.playerHands[t];e===t?n.hand=r:(a.gameData.isMahjong||a.gameData.wall.isEmpty?n.visibleHand=r.contents:n.visibleHand=r.getExposedTiles(!0),n.wind=r.wind)}s.clients.push(n)})),s}.bind(this);this.sendStateToClients=function(){this.clientIds.forEach((function(e){var t=globalThis.serverStateManager.getClient(e),n=m(e);t.message("roomActionState",n,"success")}))}.bind(this),this.addClient=function(e){var t=globalThis.serverStateManager.getClient(e);return this.clientIds.includes(e)?t.message("joinRoom","Already In Room","error"):(t.setRoomId(this.roomId),t.message("joinRoom",this.roomId,"success"),this.hostClientId||(this.hostClientId=e),this.clientIds.push(e),this.sendStateToClients(),!0)}.bind(this),this.removeClient=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"You left the room. ",r=this.clientIds.findIndex((function(t){return t===e}));if(-1===r)return"Client Not Found";this.clientIds.splice(r,1),this.hostClientId===e&&(this.hostClientId=null,this.clientIds.forEach(function(e){t.hostClientId||globalThis.serverStateManager.getClient(e).isBot||(t.hostClientId=e)}.bind(this))),this.sendStateToClients();var o=globalThis.serverStateManager.getClient(e);o&&(o.message("roomActionLeaveRoom",n,"success"),globalThis.serverStateManager.deleteClient(e)),null===this.hostClientId&&globalThis.serverStateManager.deleteRoom(this.roomId)}.bind(this),this.messageAll=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.clientIds.forEach((function(t){if(!e.includes(t)){var r=globalThis.serverStateManager.getClient(t);r.message.apply(r,n)}}))}.bind(this),this.drawTile=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=-1;!(t instanceof u);){if(r++,!(t=this.gameData.wall.drawFirst()))return console.log("Wall Empty"),this.messageAll([],"displayMessage",{title:"Game Over - Wall Empty",body:this.getSummary()},"success"),this.setInstructions([this.hostClientId],"The Wall is empty. \nPress End Game to return everybody to the room screen. "),this.setInstructions(this.hostClientId,"The Wall is empty. \nPress End Game to return everybody to the room screen. Press New Game to play again with the same settings. "),this.gameData.wall.isEmpty=!0,void this.sendStateToClients();this.gameData.playerHands[e].add(t)}var o=globalThis.serverStateManager.getClient(e);n?r>0&&o.message("roomActionGameplayAlert","You drew a pretty!","success"):(this.lastDrawn=t,this.setInstructions(o.clientId,"You drew "+(r>0?1===r?"a pretty and a ":r+" prettys and a ":"a ")+t.getTileName(this.state.settings.gameStyle)+". To discard, select a tile and press proceed. To kong, select 4 matching tiles and press Proceed. If you are Mahjong, press Mahjong. "),r>0&&this.messageAll([e],"roomActionGameplayAlert",o.getNickname()+" drew "+(1===r?"a pretty!":r+" prettys!"),{clientId:e,speech:"I'm pretty!"}))}.bind(this),this.endGame=function(e,t){var n="The Game Has Ended";t&&(n="The game has been ended by "+globalThis.serverStateManager.getClient(t).getNickname()+".");v&&this.rotateWinds(),v=!0,this.inGame=!1,delete this.state.seed,delete this.state.wall,this.state.moves=[],this.gameData={},this.messageAll([t],e.type,n,"success"),this.sendStateToClients()}.bind(this);var g=!1,y=!1;this.onPlace=function(e,t){var n=this,r=[e,t];if(this.state.moves.push(r),this.logFile)try{this.logFile.write(JSON.stringify(r)+"\n")}catch(e){console.error("ERROR WRITING TO ROOM LOGFILE: ",e)}var o,i=globalThis.serverStateManager.getClient(t),a=this.gameData.playerHands[t];if(this.gameData.isMahjong)return i.message("displayMessage",{title:"Mahjong!",body:d});if(this.gameData.wall.isEmpty)return i.message("displayMessage",{title:"Game Over - Wall Empty",body:d});if(!a)return i.message("displayMessage",{title:"Access Denied",body:"It appears that you spectating. "});try{if(o=s.convertStringsToTiles(e.message),this.state.settings.charleston.length>0&&void 0===this.gameData.charleston&&1!==o.length&&"east"===a.wind)if(3===o.length)this.gameData.charleston={directions:this.state.settings.charleston.slice(0)},this.setAllInstructions([],"Welcome to the Charleston. Select 3 tiles you would like to pass "+this.gameData.charleston.directions[0][0].direction+", then hit Proceed. ","success");else{if(!e.mahjong)return i.message(e.type,"The very first throw must be either 1 tile, to initiate the game, or 3 tiles, to initiate charleston. ","error");e.mahjong&&(o=void 0)}else if(this.gameData.charleston);else if(o.length>1)if("american"===this.state.settings.gameStyle)o=new h({tiles:o});else if(c.isValidMatch(o))o=new c({exposed:!0,amount:o.length,type:o[0].type,value:o[0].value});else{if(!l.isValidSequence(o))return i.message(e.type,"Unable to create a sequence, or match. Please check your tiles. ","error");o=new l({exposed:!0,tiles:o})}else o=o[0],this.gameData.charleston=this.gameData.charleston||!1}catch(t){return i.message(e.type,"Error: "+t.message,"error")}if(o instanceof Array){if(this.gameData.currentTurn.turnChoices[t])return i.message(e.type,"You have already passed tiles for this charleston round. ","error");this.gameData.currentTurn.turnChoices[t]=o,this.sendStateToClients()}else if(!1===this.gameData.currentTurn.thrown||void 0===this.gameData.currentTurn.thrown){if(t!==this.gameData.currentTurn.userTurn)return i.message(e.type,"Can't place after draw before throw","error");if(o instanceof u){if(e.mahjong)return i.message(e.type,"You can't discard and go mahjong. ","error");if(!a.removeMatchingTilesFromHand(o))return i.message(e.type,"You can't place a tile you do not possess - try reloading the page or restarting the app","error");if(a.contents.some(function(e){return e instanceof c&&e.type===o.type&&e.value===o.value&&(e.amount=4,n.drawTile(t),!0)}.bind(this)))return this.messageAll([t],"roomActionGameplayAlert",i.getNickname()+" has upgraded an exposed pong into a kong. ",{clientId:t,speech:"Make that a kong",durationMultiplier:1.1}),void this.sendStateToClients();if(e.swapJoker){var f;if(!0===e.swapJoker)f=[t].concat(this.clientIds);else{if(-1===this.clientIds.indexOf(e.swapJoker))return i.message(e.type,"Unable to identify which player you want to swap with. ","error");f=[e.swapJoker]}if(f.some((function(e){return n.gameData.playerHands[e].contents.some((function(e){if(e.exposed){var t=e.tiles.find((function(e){return"joker"!==e.type})),n=e.tiles.findIndex((function(e){return"joker"===e.type}));if(-1!==n&&t.matches(o))return a.add(e.tiles[n]),e.tiles.splice(n,1),e.tiles.push(o),!0}}))})))return i.message("roomActionGameplayAlert","Successfully Swapped",{clientId:t,speech:"Swapped",durationMultiplier:.5}),this.messageAll([t],"roomActionGameplayAlert",i.getNickname()+" has swapped a "+o.getTileName(this.state.settings.gameStyle)+" for a joker",{clientId:t,speech:"Swap",durationMultiplier:1}),this.sendStateToClients();if(!0!==e.swapJoker)return a.add(o),i.message(e.type,"Could not find a joker to swap with. ","error")}if(!e.swapJoker||!0===e.swapJoker){var p=o.getTileName(this.state.settings.gameStyle),v=i.getNickname()+" has thrown a "+p,m=1;this.state.settings.checkForCalling&&!a.calling&&a.isCalling(this.gameData.discardPile,this.state.settings.maximumSequences)&&(a.calling=!0,v+=", and is calling",m=1.5),this.gameData.currentTurn.thrown=o,delete this.lastDrawn,this.gameData.currentTurn.turnChoices[t]="Next",g=!1,this.messageAll([t],"roomActionGameplayAlert",v,{clientId:t,speech:p,durationMultiplier:m,optional:!a.calling}),this.setAllInstructions([t],v+". To skip, press Proceed. To claim this tile, select the tiles you are placing it with, and press Proceed (or Mahjong if this tile makes you Mahjong). "),this.sendStateToClients()}}else if(o instanceof c){if(4!==o.amount)return i.message(e.type,"Can't expose in hand pong, sequence, or pair. This can only be done via mahjong.","error");if(e.mahjong)return i.message(e.type,"You can't go mahjong while placing a kong. ","error");if(!a.removeMatchingTilesFromHand(o.getComponentTile(),4))return i.message(e.type,"You can't place tiles you do not possess - try reloading the page or restarting the app","error");a.contents.push(o),o.exposed=!1,this.drawTile(t),this.sendStateToClients(),this.messageAll([t],"roomActionGameplayAlert",i.getNickname()+" has placed an in-hand kong of "+o.getTileName(this.state.settings.gameStyle)+"s",{clientId:t,speech:"kong"}),console.log("Kong")}else{if(!e.mahjong)return i.message(e.type,"Invalid placement attempt for current game status","error");this.goMahjong(t,!this.gameData.previousTurnPickedUp,g),globalThis.serverStateManager.getClient(t).isBot?console.log("Bots are not allowed to obtain override power"):g=!0}}else if(void 0===o){if(this.gameData.charleston)return globalThis.serverStateManager.getClient(t).message("roomActionPlaceTiles","You must choose 3 tiles to pass during charleston. ","error");this.gameData.currentTurn.turnChoices[t]="Next",this.sendStateToClients()}else{if(e.mahjong)o.mahjong=e.mahjong;else{if(!(o instanceof c||o instanceof l||o instanceof h))return i.message(e.type,"You can't discard when it is not your turn","error");if(o instanceof l&&!y&&a.contents.reduce((function(e,t){return t instanceof l?++e:e}),0)>=this.state.settings.maximumSequences)return y=!0,i.message(e.type,"Host game settings allow only "+this.state.settings.maximumSequences+" sequence(s). Repeat your same move to ignore this setting, and place this sequence. Overriding this setting may cause minor issues in scoring, and may require a Mahjong override. ","error")}console.log("Scheduling"),this.gameData.currentTurn.turnChoices[t]=o,this.sendStateToClients()}}.bind(this),this.onIncomingMessage=function(e,t){var n=this,r=globalThis.serverStateManager.getClient(e),o=e===this.hostClientId;if("roomActionLeaveRoom"===t.type)return this.removeClient(e);if("roomActionKickFromRoom"===t.type)return o?this.inGame?r.message(t.type,"Can't Kick During Game","error"):(this.removeClient(t.id,"You have been kicked from the room. "),r.message(t.type,"Kicked Client","success")):(console.log(r),console.log(r.message),r.message(t.type,"Only Host Can Kick","error"));if("roomActionStartGame"===t.type){if(!o)return r.message("displayMessage",{title:"Error Starting Game",body:"Only Host Can Start"});if(this.inGame)return r.message("displayMessage",{title:"Error Starting Game",body:"Already in Game"});var i=this.startGame(t);return"string"==typeof i?r.message("displayMessage",{title:"Error Starting Game",body:i}):void 0}if("roomActionEndGame"===t.type){if(!this.inGame)return r.message(t.type,"No Game In Progress","error");if(this.clientIds.indexOf(e)>3)return this.removeClient(e);this.endGame(t,e)}else if("roomActionCloseRoom"===t.type){if(!o)return r.message(t.type,"Only Host Can Close Room","error");var a=this.hostClientId;this.clientIds.slice(0).forEach((function(e){e!==a&&n.removeClient(e,"The room has been closed. ")})),this.removeClient(a,"You closed the room. "),globalThis.serverStateManager.deleteRoom(this.roomId)}else{if("roomActionPlaceTiles"===t.type)return this.onPlace(t,e);if("roomActionAddBot"===t.type)return o?this.addBot(t):r.message(t.type,"Only Host Can Add Bots","error");if("roomActionRevertState"===t.type)return this.clientIds.indexOf(e)>3?r.message("displayMessage",{title:"Access Denied",body:"It appears that you spectating. "}):isNaN(t.message)?r.message("roomActionGameplayAlert","Invalid Reversion Amount","error"):(this.messageAll([],"roomActionGameplayAlert",r.getNickname()+" is reverting the state "+Number(t.message)+" moves. ","success"),this.revertState(Number(t.message)));if("roomActionState"===t.type)return r.message(t.type,m(e),"success");if("roomActionChangeNickname"===t.type){var s,u=globalThis.serverStateManager.getClient(t.targetId);return t.targetId===e?s=u.getNickname()+" renamed to "+t.nickname:o&&(s="The host renamed "+u.getNickname()+" to "+t.nickname),void(s&&(u.setNickname(t.nickname),this.messageAll([e],"roomActionGameplayAlert",s,"success"),this.sendStateToClients()))}}}.bind(this),this.toJSON=function(){var e=this.state.moves;delete this.state.moves;var t=JSON.stringify(this.state);return this.state.moves=e,t+="\n",this.state.moves.forEach((function(e){t+=JSON.stringify(e)+"\n"})),t}.bind(this)}var t,o,d;return t=e,d=[{key:"fromJSON",value:function(t){var n=t.trim().split("\n"),r=JSON.parse(n[0]),o=n.slice(1);return o=o.map((function(e){return JSON.parse(e)})),r.moves=o,new e(r.roomId,r)}}],(o=null)&&a(t.prototype,o),d&&a(t,d),e}();e.exports=d},function(e,t,n){var r=n(1);t.f=r},function(e,t,n){var r=n(95),o=n(6),i=n(179),a=n(11).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},function(e,t,n){"use strict";(function(t){var n=[],r=void 0===t?window:t,o=Math.pow(256,6),i=Math.pow(2,52),a=2*i,s=Math.random;function u(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);o<256;)a[o]=o++;for(o=0;o<256;o++)a[o]=a[i=255&i+e[o%n]+(t=a[o])],a[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,a=r.S;e--;)t=a[o=255&o+1],n=256*n+a[255&(a[o]=a[i=255&i+t])+(a[i]=t)];return r.i=o,r.j=i,n})(256)}function c(e,t){var n,r=[],o=(typeof e)[0];if(t&&"o"==o)for(n in e)try{r.push(c(e[n],t-1))}catch(e){}return r.length?r:"s"==o?e:e+"\0"}function l(e,t){for(var n,r=e+"",o=0;o<r.length;)t[255&o]=255&(n^=19*t[255&o])+r.charCodeAt(o++);return f(t)}function h(e){try{return r.crypto.getRandomValues(e=new Uint8Array(256)),f(e)}catch(e){return[+new Date,r,r.navigator&&r.navigator.plugins,r.screen,f(n)]}}function f(e){return String.fromCharCode.apply(0,e)}e.exports=function(t,r){if(r&&!0===r.global)return r.global=!1,Math.random=e.exports(t,r),r.global=!0,Math.random;var s=r&&r.entropy||!1,d=[],p=(l(c(s?[t,f(n)]:0 in arguments?t:h(),3),d),new u(d));return l(f(p.S),n),function(){for(var e=p.g(6),t=o,n=0;e<i;)e=256*(e+n),t*=256,n=p.g(1);for(;e>=a;)e/=2,t/=2,n>>>=1;return(e+n)/t}},e.exports.resetGlobal=function(){Math.random=s},l(Math.random(),n)}).call(this,n(93))},function(e,t,n){n(5),n(34),n(35),n(21),n(66),n(17),n(32);var r=n(27);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],o=[];console.log(this.contents.length),this.contents.forEach((function(e){n.push(e.toJSON())})),console.log(this.inPlacemat.length),this.inPlacemat.forEach((function(e){e.evicting||n.push(e.toJSON())})),e.forEach((function(e){o.push(e.toJSON())}));for(var i=0;i<n.length;i++){var a=n[i];a&&o.includes(a)&&(n[i]=null,o[o.indexOf(a)]=null)}var s=this.contents.slice(0);s=this.inPlacemat[0]&&this.inPlacemat[0].evicting?s.concat(this.inPlacemat.slice(1)):s.concat(this.inPlacemat.slice(0));for(var u=0;u<n.length;u++){var c=n[u];c&&this.remove(s[u])}for(var l=0;l<o.length;l++){var h=o[l];h&&(t&&this.inPlacemat.length<3&&e[l]instanceof r?this.inPlacemat.push(e[l]):this.add(e[l]))}}},function(e,t,n){n(17);var r=n(48),o=n(27);e.exports=function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=0,i=0,a=!1,s=this.contents.slice(0),u=function(t){var s=e.contents[t];s instanceof o&&[4,3,2].forEach(function(n){s instanceof o?e.removeMatchingTilesFromHand(s,n)&&(t--,s=new r({amount:n,type:s.type,value:s.value,exposed:!1})):c=t}.bind(e)),n+=s.isDouble(e.wind),i+=s.getPoints(e.wind),a=a||s.isSequence,c=t},c=0;c<this.contents.length;c++)u(c);return t.isMahjong&&(i+=20,t.drewOwnTile&&(i+=10),a||(i+=10)),this.contents=s,n+=this.getClearHandDoubles(),i*Math.pow(2,n)}},function(e,t,n){n(5),n(21),n(108);var r=n(65),o=n(63);e.exports=function(){var e={},t=!1,n=!0;return this.contents.forEach((function(t){t instanceof r?(e[t.tiles[0].type]=!0,n=!1):t instanceof o||(e[t.type]=!0,["wind","dragon"].includes(t.type)||1===t.value||9===t.value||(n=!1))})),(e.wind||e.dragon)&&(delete e.wind,delete e.dragon,t=!0),0===(e=Object.keys(e).length)?3:1!==e||t?1===e&&t?1:n&&!t?3:n&&t?1:0:3}},function(e,t,n){function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(113),n(17),n(5),n(168),n(90),n(30),n(23),n(41),n(32),n(110),n(167),n(130),n(26),n(131),n(146),n(87),n(88),n(89);var i=n(65),a=n(63),s=n(80),u=n(48),c=n(27),l=n(64);e.exports=function(){for(var e=regeneratorRuntime.mark(b),t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=0,o=0,h=0,f=[],d=[],p=0;p<this.contents.length;p++){var v=this.contents[p];v.isPongOrKong?(n++,d.push(v)):v.isPair?(o++,d.push(v)):v.isSequence?(h++,d.push(v)):v instanceof a?d.push(v):f.push(v)}if(1===o&&Math.min(h,t)+n===4)return 2;var m=l.sortTiles(s.getNonPrettyTiles(1)),g=[],y=[],w=new l;function b(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e,i){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.length!=n){r.next=5;break}return r.next=3,i;case 3:r.next=11;break;case 5:a=e;case 6:if(!(a<t.length)){r.next=11;break}return r.delegateYield(o(a+1,i.concat(t[a])),"t0",8);case 8:a++,r.next=6;break;case 11:case"end":return r.stop()}}),r)},r=regeneratorRuntime.mark(o),e.delegateYield(o(0,[]),"t0",3);case 3:case"end":return e.stop()}}),e)}w.contents=f.slice(0),m.forEach((function(e){w.removeMatchingTilesFromHand(e,3,!0)&&g.push(e)})),m.forEach((function(e,n){if(i.isValidSequence(m.slice(n,n+3))){for(var r=0,o=m.slice(n,n+3);r<t;){var a=Array(r+1).fill(o).flat();if(!w.removeTilesFromHand(a,!0))break;r++}for(var s=0;s<r;s++)y.push(new i({exposed:!1,tiles:o}))}}));var S=[],E=g,T=4;t>h?(E=E.concat(y),T-=h):T-=Math.min(h,1);var x,C=r(b(E,T-=n));try{for(C.s();!(x=C.n()).done;){var k=x.value,O=k.reduce((function(e,t){return e+Number(t instanceof i)}),0),M=T-O;O+=h,4-n-M>Math.min(t,O)||S.push(k)}}catch(e){C.e(e)}finally{C.f()}e:for(var A=0;A<S.length;A++){var I=S[A],j=new l;j.contents=w.contents.slice(0);for(var P=0;P<I.length;P++){var N=I[P];if(N instanceof c){if(!j.removeMatchingTilesFromHand(N,3))continue e;j.add(new u({type:N.type,value:N.value,exposed:!1,amount:3}))}else if(N instanceof i){if(!j.removeTilesFromHand(N))continue e;j.add(N)}}var L=j.contents.filter((function(e){return e instanceof c}))[0];if(0!==o||j.removeMatchingTilesFromHand(L,2,!0))return 0===o&&(j.add(new u({type:L.type,value:L.value,exposed:!1,amount:2})),j.removeMatchingTilesFromHand(L,2)),j.contents=j.contents.concat(d.slice(0)),j}return 0}},function(e,t,n){"use strict";var r=n(74),o=n(13),i=n(40),a=function(e,t,n,s,u,c,l,h){for(var f,d=u,p=0,v=!!l&&i(l,h,3);p<s;){if(p in n){if(f=v?v(n[p],p,t):n[p],c>0&&r(f))d=a(e,t,f,o(f.length),d,c-1)-1;else{if(d>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[d]=f}d++}p++}return d};e.exports=a},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(5),n(90),n(87),n(88),n(26),n(89),n(30),n(23),n(41);var o=n(65),i=(n(63),n(80)),a=n(48),s=n(27),u=n(64);e.exports=function(e,t){var n=this,c=new u;c.contents=i.getNonPrettyTiles(),e.forEach((function(e){c.removeMatchingTile(e)})),this.contents.forEach((function(e){e instanceof s?c.removeMatchingTile(e):e instanceof o?e.tiles.forEach((function(e){c.removeMatchingTile(e)})):e instanceof a&&new Array(e.amount).fill().forEach((function(){c.removeMatchingTile(e.getComponentTile())}))}));for(var l=function(){for(var e=c.contents[0];c.removeMatchingTile(e););var r=n.contents.some((function(t,n){return e.matches(t)}));if(!r&&!isNaN(e.value)){var o=[,,!0,,,];n.contents.forEach((function(t){t.type===e.type&&Math.abs(t.value-e.value)<=2&&(o[2-(t.value-e.value)]=!0)})),(o[0]&&o[1]||o[1]&&o[3]||o[3]&&o[4])&&(r=!0)}return r?(n.add(e),n.isMahjong(t)?(n.remove(e),{v:e}):void n.remove(e)):"continue"};c.contents.length;){var h=l();if("continue"!==h&&"object"===r(h))return h.v}return!1}},function(e,t,n){n(108);var r={"2020 National Mahjongg League":n(207),"2021 National Mahjongg League":n(217)},o=Object.keys(r);Object.defineProperty(r,"Other Card - Bots Use Random Card",{get:function(){return r[o[Math.floor(Math.random()*o.length)]]}}),e.exports=r},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(32),n(21),n(53),n(229),n(230),n(87),n(88),n(26),n(89),n(30),n(23),n(41);var c=function(e){"use strict";!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,e);var t=i(r);function r(e,o){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(i=t.call(this,e,o)).isBot=!0;var a,u,c=n(232).bind(s(i)),l=n(233).bind(s(i)),h=i.message;return i.message=function(t,n,r){if(u)u=!1;else if(!this.suppressed){if(this.websocket&&h(t,n,r),"roomActionState"===t){var o,i,s,f,d,p,v,m,g,y,w,b;if(null!==(o=this.getRoom())&&void 0!==o&&null!==(i=o.gameData)&&void 0!==i&&i.isMahjong||null!==(s=this.getRoom())&&void 0!==s&&null!==(f=s.gameData)&&void 0!==f&&null!==(d=f.wall)&&void 0!==d&&d.isEmpty)return;var S=null===(p=this.getRoom())||void 0===p||null===(v=p.gameData)||void 0===v||null===(m=v.currentTurn)||void 0===m||null===(g=m.turnChoices)||void 0===g?void 0:g[e],E=null===(y=this.getRoom())||void 0===y||null===(w=y.gameData)||void 0===w||null===(b=w.playerHands)||void 0===b?void 0:b[e];try{var T,x,C;"american"===(null===(T=this.getRoom())||void 0===T||null===(x=T.state)||void 0===x||null===(C=x.settings)||void 0===C?void 0:C.gameStyle)?l():c()}catch(t){S&&(this.getRoom().gameData.currentTurn.turnChoices[e]=S),E&&(this.getRoom().gameData.playerHands[e]=E),console.log("FATAL BOT ERROR: "+t),console.log(t.stack),(!a||Date.now()-a>6e4)&&(a=Date.now(),this.getRoom().messageAll([this.clientId],"roomActionPlaceTiles","".concat(this.getNickname(),' has encountered an error, which affects this turn, and possibly successive ones. You can manually control the bot <a target="_blank" href="#clientId=').concat(this.clientId,'">here</a>. This message will be sent for the first error every minute. '),"error"))}}"error"!==r||!n.includes||n.includes("manually control the bot")||n.includes("higher priority placement")||(u=!0,(!a||Date.now()-a>6e4)&&(a=Date.now(),this.getRoom().messageAll([this.clientId],"roomActionPlaceTiles","".concat(this.getNickname(),' has received an error message. If it is not functioning, you can manually control the bot <a target="_blank" href="#clientId=').concat(this.clientId,'">here</a>. This message will be sent for the first error every minute. '),"error")),console.error("Bot received an error message: "+n))}}.bind(s(i)),i}return r}(n(171));e.exports=c},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(5),n(130),n(32),n(110),n(168),n(105),n(106),n(77),n(21),n(53),n(8),n(90),n(66),n(17),n(87),n(88),n(26),n(89),n(30),n(23),n(41);var o=n(27),i=n(64),a=n(80),s=n(128),u=(n(65),n(48),document.createElement("div"));function c(e){var t=document.createElement("div");return t.id=e,u.appendChild(t),t}function l(e,t){var n=c(e),r=document.createElement("div");return r.id=t,n.appendChild(r),r}u.id="gameBoard",document.body.appendChild(u);var h=new function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.id=e.id||"compass",this.compass=document.createElement("img"),this.compass.id=e.id,u.appendChild(this.compass),this.setDirectionForUserWind=function(e){this.compass.src="assets/compass-"+e+".svg"}}({id:"compass"});var f=new function(e){if(!document.fullscreenEnabled&&document.webkitFullscreenEnabled&&(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.webkitFullscreenElement}}),document.documentElement.requestFullscreen=function(){document.documentElement.webkitRequestFullScreen()},document.exitFullscreen=function(){document.webkitExitFullscreen()},document.addEventListener("webkitfullscreenchange",(function(){document.dispatchEvent(new Event("fullscreenchange"))}))),void 0!==document.fullscreenElement){this.toggleElement=document.createElement("img"),this.toggleElement.id=e,this.toggleElement.title="Toggle Full Screen",this.toggleElement.addEventListener("click",(function(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}));var t=function(){document.fullscreenElement?this.toggleElement.src="assets/exit-full-screen.svg":this.toggleElement.src="assets/go-full-screen.svg"}.bind(this);document.addEventListener("fullscreenchange",t),t()}}("fullscreenControls");f.toggleElement&&u.appendChild(f.toggleElement);var d=document.createElement("img");d.src="assets/reload-icon.svg",d.id="syncButton",d.title="Sync (Reload)",u.appendChild(d),d.addEventListener("click",(function(){window.location.reload()})),window.Tile=o,window.Sequence=n(65),window.Match=n(48);var p=function(){var e=document.createElement("div");return e.id="tilePlacemat",e}();u.appendChild(p);var v=document.createElement("button");v.id="revertStateButton",v.innerHTML="Revert",u.appendChild(v),v.addEventListener("click",(function(){var e=prompt("How many moves (4 moves per turn) would you like to revert? You can always revert more if needed, but can't undo a revert. ");null!==e&&confirm("Are you sure you would like to revert the game state? Other players will be notified, so you should clear the revert with them. ")&&window.stateManager.revertState(e)}));var m=document.createElement("button");m.id="swapJokerButton",m.innerHTML="Swap Joker",u.appendChild(m),m.addEventListener("click",(function(){if(1===M.inPlacemat.length){var e,t=document.createElement("div"),n=document.createElement("p");n.innerHTML="Who would you like to try and swap with?",t.appendChild(n),stateManager.lastState.message.clients.forEach((function(n,r){var o=document.createElement("button");o.innerHTML=n.nickname,o.className="swapJokerOptionMenuButton",n.id===window.clientId&&(o.innerHTML+=" (You)"),t.appendChild(o),o.addEventListener("click",(function(){window.stateManager.placeTiles(M.inPlacemat,!1,{swapJoker:n.id}),e.dismiss()}))})),(e=new s.Notification("Swap Tile For Joker",t)).show()}else new s.Notification("Error With Swap","You must have exactly one tile in your placemat to swap - act like you are going to discard the tile, but hit Swap Joker instead of proceed. ").show()}));var g=document.createElement("button");g.id="proceedButton",g.innerHTML="Proceed",u.appendChild(g),g.addEventListener("click",(function(){var e=M.inPlacemat;e.length!==Number(e.some((function(e){return e.evicting})))?(console.log(e),window.stateManager.placeTiles(e)):window.stateManager.placeTiles([])})),window.stateManager.onPlaceTiles=function(e){"error"===e.status&&new s.Notification("Error Placing Tiles",e.message).show()};var y=document.createElement("button");y.id="hintButton",y.innerHTML="Suggested Hands",u.appendChild(y),y.addEventListener("click",(function(){var e;try{var t=stateManager.lastState.message.settings.card;if("Other Card - Bots Use Random Card"===t)e=new s.Notification("Suggested Hands","This card does not support Suggested Hands. ");else{var r=n(188),o=n(14),i=r[t],a=M.contents.concat(M.inPlacemat.filter((function(e){return!e.evicting}))),u=o.getTileDifferential(i,a);if(0===u.length)e=new s.Notification("No Hands Found"," - Your hand might be dead<br> - You might have selected the wrong card (using ".concat(t,"). <br> - Bots might only support a portion of your card"));else{var c=document.createElement("div"),l=document.createElement("p");l.innerHTML="(Sorted by Bot - Scroll to see more)",c.appendChild(l);var h=document.createElement("table");u.forEach((function(e,t){if(t<100){var n=document.createElement("tr");h.appendChild(n);var r=document.createElement("td");r.innerHTML="".concat(e.handOption.section," #").concat(e.handOption.cardIndex+1," - ").concat(e.diff," Tiles Away (").concat(e.handOption.concealed?"C":"X",")"),n.appendChild(r);var o=document.createElement("tr");h.appendChild(o),e.handOption.tiles.flat().forEach((function(e){var t=document.createElement("img");t.src=e.imageUrl,o.appendChild(t)}))}})),c.appendChild(h),h.className="suggestedHandsTable",console.log(c),e=new s.Notification("Suggested Hands",c)}}}catch(t){console.error(t),e=new s.Notification("Suggested Hands","There was an error displaying suggested hands. Sorry. ")}e.show()})),console.log(y);var w=document.createElement("div");w.id="instructionBubble",w.style.display="none",u.appendChild(w),window.stateManager.addEventListener("onStateUpdate",(function(e){w.style.display="",w.innerHTML=e.message.instructions.split("\n").join("<br>")})),window.stateManager.onGameplayAlert=function(e){var t,n,r=document.createElement("audio"),o=[];e.message.includes("thrown")?r.volume=.5:e.message.includes("mahjong")&&(r.volume=1,o=["tiles-dropping-table.mp3"]),o.length>0&&(r.src="assets/sounds/"+o[Math.floor(Math.random()*o.length)],r.setAttribute("preload","auto"),r.setAttribute("controls","none"),r.style.display="none",document.body.appendChild(r),r.play(),setTimeout((function(){r.remove()}),2e3)),console.log(e),console.log(e.message);var i=new s.BlocklessAlert(e.message,4e3*((null==e||null===(t=e.status)||void 0===t?void 0:t.durationMultiplier)||1),{optional:null==e||null===(n=e.status)||void 0===n?void 0:n.optional});console.log(i),i.onStart.then((function(){var t,n;if(window.voiceChoices[null==e||null===(t=e.status)||void 0===t?void 0:t.clientId]&&null!=e&&null!==(n=e.status)&&void 0!==n&&n.speech){var r=new SpeechSynthesisUtterance(e.status.speech),o=window.voiceChoices[e.status.clientId].get();if(console.log(window.voiceChoices[e.status.clientId]),console.log(window.voiceChoices[e.status.clientId].get()),console.log(o),"string"!=typeof o)try{r.voice=o}catch(e){console.error(e)}"none"!==o&&speechSynthesis.speak(r)}}))};var b=document.createElement("button");b.id="endGameButton",u.appendChild(b);var S=document.createElement("button");S.id="newGameNoLobbyButton",S.innerHTML="New Game",u.appendChild(S);var E=!0;b.addEventListener("click",(function(){"Leave Room"!==b.innerHTML&&E&&!confirm("Are you absolutely sure you want to end the game?")||window.stateManager.endGame()})),S.addEventListener("click",(function(){b.click(),document.getElementById("startGameButton").click()}));var T=document.createElement("button");T.id="goMahjongButton",T.innerHTML="Mahjong",u.appendChild(T),T.addEventListener("click",(function(){var e=M.inPlacemat;console.log(e),window.stateManager.placeTiles(e,{mahjong:!0})}));var x=document.createElement("div");x.id="wallAndDiscardContainer",u.appendChild(x);var C=document.createElement("div");C.id="wall",x.appendChild(C);var k=document.createElement("div");k.id="discardPile",x.appendChild(k);var O=c("userHand"),M=(c("userHandExposed"),new i({handToRender:O,handForExposed:userHandExposed,interactive:!0,tilePlacemat:p}));window.userHand=M;var A=l("rightHand","rightHandContainer"),I=new i({handToRender:A}),j=c("topHand"),P=new i({handToRender:j}),N=l("leftHand","leftHandContainer"),L=new i({handToRender:N}),R=["bottomNametag","rightNametag","topNametag","leftNametag"].map((function(e){var t=document.createElement("p");return t.id=e,u.appendChild(t),t})),D=!0,H=!1;function F(){P.renderTiles(),L.renderTiles(),I.renderTiles(),M.renderTiles()}window.stateManager.addEventListener("onStateUpdate",(function(e){var t,n,c,l,f,d;window.stateManager.isHost?S.style.display="":S.style.display="none",u.className=null==e||null===(t=e.message)||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.gameStyle;var p=e.message;if(E=!p.isGameOver,y.style.display="",g.classList.add("shrinkForHintButton"),null!=p&&null!==(c=p.settings)&&void 0!==c&&c.disableHints&&(y.style.display="none",g.classList.remove("shrinkForHintButton")),!p.inGame)return document.body.style.overflow="",void(H=!1);document.body.style.overflow="hidden",void 0!==p.wallTiles&&("object"===r(p.wallTiles)?p.wallTiles=i.convertStringsToTiles(p.wallTiles):p.wallTiles=new Array(p.wallTiles).fill(new o({faceDown:!0})),a.renderWall(C,p.wallTiles)),p.discardPile&&function(e){for(;k.firstChild;)k.firstChild.remove();var t=e.map((function(e){return o.fromJSON(e)}));(t=i.sortTiles(t)).forEach((function(e){var t,n,r,o,i=document.createElement("img");i.src=e.imageUrl,i.title=e.getTileName(null===(t=stateManager)||void 0===t||null===(n=t.lastState)||void 0===n||null===(r=n.message)||void 0===r||null===(o=r.settings)||void 0===o?void 0:o.gameStyle),k.appendChild(i)}))}(p.discardPile);var v,w=p.clients,x=["north","east","south","west"],O=[M,I,P,L];w.forEach((function(e){if(e.hand){var t;console.log("User hand stuff");var n=i.fromString(e.hand);M.syncContents(n.contents,H&&(null==p||null===(t=p.currentTurn)||void 0===t?void 0:t.charleston)),v=n.wind}})),null!=p&&null!==(l=p.currentTurn)&&void 0!==l&&l.charleston&&(H=!0);var A=x.indexOf(v),j=x.slice(A).concat(x.slice(0,A));if(v?(h.setDirectionForUserWind(v),b.innerHTML="End Game"):(h.setDirectionForUserWind(j[0]),b.innerHTML="Leave Room",D&&(new s.MessageBar("You are spectating (message will close automatically)").show(1e4),D=!1)),console.log(j),console.log(O),w.forEach((function(e){var t=0;e.wind&&(t=j.indexOf(e.wind));var n=O[t];e.visibleHand&&e.wind&&(n.syncContents(i.convertStringsToTiles(e.visibleHand)),n.wind=e.wind);var r=R[t];r.innerHTML=e.nickname,r.style.color="",n.handToRender.classList.remove("brightnessPulse"),p.currentTurn&&e.id===p.currentTurn.userTurn&&(n.handToRender.classList.add("brightnessPulse"),r.style.color="red")})),O.forEach((function(e){var t;e.renderTiles(null==p||null===(t=p.currentTurn)||void 0===t?void 0:t.lastDrawn)})),m.disabled="",(null===(f=p.currentTurn)||void 0===f||null===(d=f.playersReady)||void 0===d?void 0:d.length)>0){var N=p.currentTurn.playersReady.includes(window.clientId);g.disabled=N?"disabled":"",T.disabled=N?"disabled":"",m.disabled="disabled",g.innerHTML="Proceed ("+p.currentTurn.playersReady.length+"/4)",p.currentTurn.thrown||p.currentTurn.charleston||p.currentTurn.userTurn!==clientId||(g.disabled=""),p.currentTurn.charleston&&p.currentTurn.userTurn!==clientId&&(T.disabled="disabled"),p.currentTurn.userTurn!==clientId?M.setEvictingThrownTile(o.fromJSON(p.currentTurn.thrown)):M.setEvictingThrownTile(),M.renderPlacemat("")}else g.disabled="",T.disabled="",g.innerHTML="Proceed",M.setEvictingThrownTile(),p.currentTurn.charleston&&(T.disabled="disabled"),p.currentTurn.userTurn===window.clientId?(M.renderPlacemat("pending"),m.disabled=""):(m.disabled="disabled",p.currentTurn.charleston||(g.disabled="disabled",T.disabled="disabled"));g.disabled||p.isGameOver?g.classList.remove("scaleAnimation"):g.classList.add("scaleAnimation"),p.isGameOver&&(g.innerHTML="View Scores")})),g.addEventListener("click",(function(){g.style.animation="none",setTimeout((function(){g.style.animation=""}),100)})),document.addEventListener("keyup",(function(e){var t=["q","w","e","r","t","y","u","i","o","p","a","s","d","f"];if(stateManager.inGame)if("Space"===e.code&&e.shiftKey)T.click();else if("Space"===e.code)g.click();else if(Number(e.key)>0&&Number(e.key)<5){var n=Number(e.key)-1;M.moveTile(M.inPlacemat[n])}else if(t.includes(e.key.toLowerCase())){var r=t.indexOf(e.key.toLowerCase()),i=M.contents.filter((function(e){return e instanceof o}));M.moveTile(i[r])}})),window.addEventListener("resize",F),window.addEventListener("orientationchange",F),window.addEventListener("scroll",(function(e){window.stateManager.inGame&&window.scrollTo(0,0)})),e.exports=u},function(e,t,n){n(99),n(26),n(30),n(23),n(41),n(17),n(129),n(237),n(21),n(53),n(5),n(131),n(130),n(66);var r=n(128),o=n(192),i=n(239),a=document.createElement("div");a.id="roomManager",document.body.appendChild(a);var s=document.createElement("div");s.id="heading",a.appendChild(s);var u=document.createElement("h1");u.innerHTML="Mahjong",u.id="mahjongHeading",s.appendChild(u);var c=document.createElement("h1");c.innerHTML="4 Friends",c.id="fourFriendsHeading",s.appendChild(c);var l=document.createElement("div");l.id="notInRoomContainer",a.appendChild(l);var h=document.createElement("input");h.id="roomIdInput",h.placeholder="Enter Room Name...",l.appendChild(h),l.appendChild(document.createElement("br"));var f=document.createElement("input");f.id="nicknameInput",f.placeholder="Choose a Nickname...",l.appendChild(f);var d=new URLSearchParams(window.location.hash.slice(1));d.has("roomId")&&(h.value=d.get("roomId")),d.has("name")&&(f.value=d.get("name")),d.has("fakeNative")&&("android"===d.get("fakeNative")?window.isAndroid=!0:"ios"===d.get("fakeNative")?window.Capacitor=!0:console.error("fakeNative set and invalid"));var p=document.createElement("div");p.id="joinOrCreateRoom",l.appendChild(p);var v=document.createElement("button");v.id="joinRoom",v.innerHTML="Join Room",v.addEventListener("click",(function(){if(stateManager.offlineMode=!1,0===h.value.trim().length)return new r.Notification("Room Name Invalid",'The room name contains at least one character. Please enter it into the box labeled "Enter Room Name" ').show();window.stateManager.joinRoom(h.value.toLowerCase(),f.value)})),p.appendChild(v);var m=document.createElement("button");m.id="createRoom",m.innerHTML="Create Room",m.addEventListener("click",(function(){if(stateManager.offlineMode=!1,0===h.value.trim().length)return new r.Notification("Unable to Create Room",'Please pick a 1+ character long name, and enter it into the box labeled "Enter Room Name" ').show();window.stateManager.createRoom(h.value.toLowerCase(),f.value)})),p.appendChild(m),p.appendChild(document.createElement("br"));var g=document.createElement("button");g.id="singlePlayerGame",g.innerHTML="Single Player",g.addEventListener("click",(function(){stateManager.offlineMode=!1;var e=h.value.trim()||"sp-"+Math.floor(1e10*Math.random()),t=f.value||"Player 1";window.stateManager.createRoom(e,t),window.stateManager.addBot("Bot 1"),window.stateManager.addBot("Bot 2"),window.stateManager.addBot("Bot 3")})),p.appendChild(g);var y=document.createElement("button");y.id="offlineSinglePlayer",y.innerHTML="Offline (Single Player - Beta)",y.addEventListener("click",(function(){stateManager.offlineMode=!0;var e=h.value.trim()||"sp-"+Math.floor(1e10*Math.random()),t=f.value||"Player 1";window.stateManager.createRoom(e,t),window.stateManager.addBot("Bot 1"),window.stateManager.addBot("Bot 2"),window.stateManager.addBot("Bot 3")})),p.appendChild(y);var w=document.createElement("p");w.id="connectionStatus",l.appendChild(w);var b=1;if(window.setConnectionStatus=function(e){var t=e.connected;w.innerHTML=t?"✓ Connected to Server":"Trying To Connect"+".".repeat(1+ ++b%5),w.className=t?"connected":"",v.disabled=m.disabled=g.disabled=t?"":"disabled"},window.setConnectionStatus({connected:!1}),window.Capacitor)try{window.screen.orientation.lock("landscape")}catch(e){console.error(e)}var S=document.createElement("p");function E(e){var t,n,r=null===(t=window.screen)||void 0===t||null===(n=t.orientation)||void 0===n?void 0:n.type;(r?r.includes("portrait"):90!==Math.abs(window.orientation))&&screen.width<900?S.style.display="":S.style.display="none"}S.id="screenRotationAlert",S.innerHTML="Rotating your screen to Landscape mode is recommended. ",l.appendChild(S),window.addEventListener("orientationchange",E),E();var T=document.createElement("div");T.id="inRoomContainer",T.style.display="none",a.appendChild(T);var x=document.createElement("h2");x.id="currentRoom",T.appendChild(x);var C=document.createElement("h2");C.id="playerCount",T.appendChild(C);var k=document.createElement("div");k.id="playerView",T.appendChild(k);var O=document.createElement("button");O.innerHTML="Leave Room",O.id="leaveRoomButton",T.appendChild(O),O.addEventListener("click",(function(){confirm("Are you sure you want to leave this room?")&&window.stateManager.leaveRoom(window.stateManager.roomId)}));var M=document.createElement("button");M.innerHTML="Close Room",M.id="closeRoomButton",M.style.display="none",T.appendChild(M),M.addEventListener("click",(function(){confirm("Are you sure you want to close this room?")&&window.stateManager.closeRoom(window.stateManager.roomId)}));var A,I=document.createElement("button");I.innerHTML="Start Game",I.id="startGameButton",I.style.display="none",T.appendChild(I),I.addEventListener("click",(function(){window.stateManager.startGame(A.getChoices())}));var j=document.createElement("button");j.innerHTML="Add Bot",j.id="addBotButton",j.style.display="none",T.appendChild(j),j.addEventListener("click",(function(){var e=prompt("Please enter a name for the bot: ");window.stateManager.addBot(e)}));var P=document.createElement("div");P.id="gameSettingsElem",T.appendChild(P);var N=document.createElement("div");N.id="inviteYourFriendsElem",T.appendChild(N);var L=document.createElement("div");L.id="inviteYourFriendsDiv",N.appendChild(L);var R=document.createElement("h2");R.innerHTML="Invite Players to Join This Game!",L.appendChild(R);var D=document.createElement("p");D.id="joinRoomLinkElem",D.innerHTML="Share the link: <br>";var H=document.createElement("a");H.target="_blank",D.appendChild(H),L.appendChild(D);var F=document.createElement("img");F.id="QRImageElement",N.appendChild(F);var _=document.createElement("a");_.target="_blank",_.href="https://drive.google.com/file/d/1aGyekkldVouVY2Hy7SXTTvhS7I5X6o8O/view",_.id="tutorialLink",_.innerHTML="Mahjong 4 Friends Tutorial",a.appendChild(_),a.appendChild(document.createElement("br"));var B=document.createElement("a");B.target="_blank",B.href="https://docs.google.com/document/d/1sSGxlRHMkWYHjYhxJTLvHoFsVPAgSs7DFRpsZLmgIvc/edit#heading=h.t7shfpx0qwex",B.id="documentationLink",B.innerHTML="See Full Documentation",a.appendChild(B);var U=document.createElement("p");if(U.id="supportInfo",U.innerHTML="Questions, Comments, or Concerns? Contact <a href='mailto:support@mahjong4friends.com'>support@mahjong4friends.com</a>",a.appendChild(U),window.Capacitor||window.isAndroid){var J=document.createElement("p");J.id="supportInfo",window.Capacitor?J.innerHTML='Enjoying Mahjong 4 Friends? Please <a href="https://apps.apple.com/us/app/mahjong-4-friends/id1552704332" target="_blank">rate us in the App Store</a>!':window.isAndroid&&(J.innerHTML='Enjoying Mahjong 4 Friends? Please <a href="https://play.google.com/store/apps/details?id=com.mahjong4friends.twa" target="_blank">leave a review on Google Play</a>!'),a.appendChild(J)}else{var G=function(e,t,n){var r=document.createElement("a");r.href=e,r.target="_blank";var o=document.createElement("img");o.src=t,o.alt=n,r.appendChild(o),q.appendChild(r)},q=document.createElement("div");q.id="externalAppStoresDiv",a.appendChild(q),G("https://apps.apple.com/us/app/mahjong-4-friends/id1552704332","assets/badges/appstore.svg","Get Mahjong 4 Friends on the App Store"),G("https://play.google.com/store/apps/details?id=com.mahjong4friends.twa","assets/badges/googleplay.svg","Get Mahjong 4 Friends on Google Play")}var Y=document.createElement("div");setTimeout((function(){stateManager.inRoom.includes("fbtest")&&(Y.innerHTML+='<iframe sandbox="allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox" src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2FMahjong-4-Friends-103233541852386&tabs=timeline&width=500&height=500&small_header=true&adapt_container_width=true&hide_cover=true&show_facepile=true&appId" width="500" height="500" scrolling="no" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe>')}),2e3),a.appendChild(Y);var V=document.createElement("p");V.innerHTML="Copyright © 2020, All Rights Reserved",V.id="copyrightNotice",a.appendChild(V),speechSynthesis.getVoices();var W={};function z(){var e=document.createElement("select"),t=speechSynthesis.getVoices();console.log(t);var n=document.createElement("option");n.value="none",n.innerHTML="No Voice",n.selected=!0,e.appendChild(n);var r=document.createElement("option");r.value="default",r.innerHTML="Default Voice",e.appendChild(r),t.forEach((function(t,n){var r=document.createElement("option");r.value=n,r.innerHTML=t.lang+"("+t.name+")",e.appendChild(r)})),this.elem=e,this.get=function(){return t[Number(e.value)]||e.value},this.set=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none";e.value=n,-1!==t.indexOf(n)&&(e.value=t.indexOf(n))}}function X(){T.style.display="block",l.style.display="none";var e="#roomId="+stateManager.inRoom;H.href=e,window.isNative&&(H.href="https://mahjong4friends.com"+e),H.innerHTML=H.href;try{var t=i(0,"H");t.addData(H.href),t.make();var n=document.createElement("canvas");n.width=n.height=12*t.getModuleCount();var r=n.getContext("2d");t.renderTo2dContext(r,12);var o=document.createElement("canvas");o.width=o.height=n.width+48;var a=o.getContext("2d");a.fillStyle="white",a.fillRect(0,0,o.width,o.height),a.drawImage(n,24,24);var s=document.createElement("img");s.src="assets/tiles/dragons/green.png",s.addEventListener("load",(function(){var e=.3*o.width,t=s.width,n=s.height,r=Math.max(1,Math.max(t,n)/e);t/=r,n/=r;var i=o.width/2-t/2,u=o.height/2-n/2;a.fillRect(i-12,u-12,t+24,n+24),a.drawImage(s,i,u,t,n),F.src=o.toDataURL("image/png"),F.width=F.height=o.width/4})),F.src=o.toDataURL("image/png"),F.width=F.height=o.width/4}catch(e){console.error(e)}}window.voiceChoices=W;var K=!0;window.stateManager.onJoinRoom=function(e){if("error"===e.status)return new r.Notification("Unable to Join Room",e.message).show();K&&d.has("roomId")&&d.get("roomId")!==e.message&&(new r.Notification("Room Restored","You followed a link to room "+d.get("roomId")+", but were already in room "+e.message+". Your room has been restored - to join a new room, leave your current one. ").show(),K=!1),x.innerHTML="You are in room "+e.message,X()},window.stateManager.onCreateRoom=function(e){if("error"===e.status)return new r.Notification("Unable to Create Room",e.message).show();x.innerHTML="You are hosting room "+e.message,X()},window.stateManager.onLeaveRoom=function(e){T.style.display="none",l.style.display="block";var t=n(164);t.setClientId(t.createNewClientId()),"You closed the room. "!==e.message&&"You left the room. "!==e.message&&new r.Notification("Out of Room",e.message).show()},window.stateManager.addEventListener("onStateUpdate",(function(e){var t;C.innerHTML=e.message.clients.length+"/4 Players are Present";var n=null===(t=A)||void 0===t?void 0:t.getChoices();window.stateManager.isHost?(I.style.display="none",j.style.display="",M.style.display="",O.style.display="",(A=new o(P,!0)).setChoices(n),1===e.message.clients.length?O.style.display="none":e.message.clients.length>=4&&(I.style.display="",j.style.display="none")):(j.style.display="none",M.style.display="none",I.style.display="none",O.style.display="",(A=new o(P,!1)).setChoices(n)),window.gameSettings=A,function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;k.firstChild;)k.firstChild.remove();e.forEach((function(e){var n=document.createElement("div");n.classList.add("playerViewRow");var r=document.createElement("span");r.classList.add("playerViewNameSpan"),r.innerHTML=e.nickname,n.appendChild(r);var o=document.createElement("span");o.classList.add("playerViewCard"),n.appendChild(o);var i=document.createElement("span");function a(t,n){t.classList.add("editableName");var o="Enter a new nickname for ".concat(e.nickname,": ");n===window.clientId&&(o="Enter a new nickname: "),r.addEventListener("click",(function(){var t=prompt(o);null!==t&&window.stateManager.setNickname(t,e.id)}))}if(i.classList.add("playerViewVoiceChoice"),n.appendChild(i),e.id===window.clientId)i.innerHTML="N/A",a(r,e.id),window.stateManager.isHost?o.innerHTML="You (Host)":o.innerHTML="You";else if(W[e.id]=W[e.id]||new z,i.appendChild(W[e.id].elem),e.isHost)o.innerHTML="Host";else if(window.stateManager.isHost){a(r,e.id);var s=document.createElement("button");s.innerHTML="Remove "+e.nickname,s.classList.add("playerViewKickButton"),s.addEventListener("click",(function(){confirm("Are you sure you want to remove "+e.nickname)&&t(e.id)})),o.appendChild(s)}else o.innerHTML="Player";k.appendChild(n)}))}(e.message.clients,(function(e){window.stateManager.kickUser(window.stateManager.roomId,e)}))})),window.stateManager.getCurrentRoom(),window.stateManager.addEventListener("onStartGame",(function(){a.style.display="none"})),window.stateManager.addEventListener("onEndGame",(function(e){a.style.display="","State Sync"!==e.message&&new r.Notification("Game Ended",e.message).show()})),e.exports=a},function(e,t,n){function r(e,t){var n=t.americanMahjongInfo,r=t.chineseMahjongInfo,o=document.createElement("div");o.id="gameStyleSelectorDiv",o.style.marginBottom="10px";var i=document.createElement("button");i.innerHTML="Chinese/British/HK Mahjong",i.value="chinese",i.id="selectChineseMahjong",o.appendChild(i);var a=document.createElement("button");a.innerHTML="American Mahjong",a.value="american",a.id="selectAmericanMahjong",o.appendChild(a);var s=[i,a];function u(t){for(var o in s.forEach((function(e){e.disabled=e===t?"disabled":""})),n.style.display="american"===t.value?"":"none",r.style.display="chinese"===t.value?"":"none",e){var i=e[o];!i.displayFor||i.displayFor.includes(t.value)?i.elem.style.display="":i.elem.style.display="none"}}s.forEach((function(e){e.addEventListener("click",(function(){u(e)}))})),this.elem=o,this.get=function(){for(var e=0;e<s.length;e++){var t=s[e];if(t.disabled)return t.value}},this.set=function(e){u("mustbeset"),s.forEach((function(t,n){t.value===e&&u(t)}))},this.isHost=!0}function o(){var e=document.createElement("div");e.id="checkForCallingSelectorDiv";var t=document.createElement("input");t.id="checkForCallingSelectorCheckbox",t.type="checkbox";var n=document.createElement("label");n.for="checkForCallingSelectorCheckbox",n.innerHTML="Check and Alert for Calling/Ready Hands",n.addEventListener("click",(function(){t.click()})),n.style.fontSize="1.4em",t.style.fontSize="1.4em",this.elem=e,e.appendChild(t),e.appendChild(n),this.get=function(){return t.checked},this.set=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.checked=e},this.displayFor=["chinese"],this.isHost=!0}function i(){var e=document.createElement("div");e.id="maximumSequencesSelectorDiv";var t=document.createElement("input");t.id="maximumSequencesSelector",t.type="number";var n=document.createElement("label");n.for="maximumSequencesSelector",n.innerHTML="Maximum Sequences: ",n.style.fontSize="1.4em",t.style.fontSize="1.4em",this.elem=e,e.appendChild(n),e.appendChild(t),this.get=function(){return t.value},this.set=function(e){t.value=null!=e?e:4},this.displayFor=["chinese"],this.isHost=!0}function a(){var e=document.createElement("div");e.id="botSelectorDiv";var t=document.createElement("input");t.id="botSelectorCheckbox",t.type="checkbox";var n=document.createElement("label");n.for="botSelectorCheckbox",n.innerHTML="Allow bot to charleston",n.addEventListener("click",(function(){t.click()})),n.style.fontSize="1.4em",t.style.fontSize="1.4em",this.elem=e,e.appendChild(t),e.appendChild(n),this.get=function(){return{canCharleston:t.checked}},this.set=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.checked=null!==(e=null==n?void 0:n.canCharleston)&&void 0!==e&&e},this.displayFor=["chinese"],this.isHost=!0}function s(){var e=document.createElement("div");e.style.marginBottom="5px";var t=document.createElement("select");t.style.fontSize="1.4em",["2021 National Mahjongg League","2020 National Mahjongg League","Other Card - Bots Use Random Card"].forEach((function(e,n){var r=document.createElement("option");r.value=e,r.innerHTML=e,t.appendChild(r)}));var n=document.createElement("label");n.innerHTML="Select Mahjong Card: ",n.style.fontSize="1.4em",this.elem=e,e.appendChild(n),e.appendChild(t),this.get=function(){return t.value},this.set=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2021 National Mahjongg League";t.value=e},this.displayFor=["american"],this.isHost=!0}function u(){var e=document.createElement("div");e.style.fontSize="1.4em";var t=document.createElement("input");t.type="range",t.min=0,t.max=100;var n=document.createElement("label");n.innerHTML="Bot Difficulty:  Medium";var r=document.createElement("label");r.innerHTML="Superhuman",this.elem=e,e.appendChild(n),e.appendChild(t),e.appendChild(r),this.get=function(){return t.value},this.set=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;t.value=e},this.displayFor=["american"],this.isHost=!0}function c(){var e=document.createElement("div"),t=document.createElement("input");t.type="checkbox";var n=document.createElement("label");n.innerHTML="Disable Hints/Suggested Hands",n.addEventListener("click",(function(){t.click()})),n.style.fontSize="1.4em",t.style.fontSize="1.4em",this.elem=e,e.appendChild(t),e.appendChild(n),this.get=function(){return t.checked},this.set=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.checked=e},this.displayFor=["american"],this.isHost=!0}n(169),n(108),n(5),n(21),n(53),e.exports=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.firstChild;)e.firstChild.remove();var n=document.createElement("h2");n.innerHTML="Game Settings",n.style.marginTop="0",n.style.marginBottom="0.5em",e.appendChild(n);var l=document.createElement("p");l.innerHTML='2021 Card Now Supported! Play with bots or friends (link and/or QR below!) You can play with any card you want - the selected card is only used for automated scoring and bots (which will still run, just on whichever card is selected). <br><br>Not all moves are validated - if you make a mistake, you can use the "Revert" button to undo it. ',l.style.fontSize="1.3em";var h=document.createElement("p");h.innerHTML="Most variants should be supported, although overrides may be needed, and you might need to score your own hands. Can't play your way? Have suggestions? Need different bots? Send an email to support@mahjong4friends.com!",h.style.fontSize="1.3em";var f={};Object.assign(f,{gameStyle:new r(f,{americanMahjongInfo:l,chineseMahjongInfo:h}),maximumSequences:new i,checkForCalling:new o,botSettings:new a,card:new s,americanBotDifficulty:new u,disableHints:new c});var d=!1;for(var p in f){var v=f[p];!v.isHost||t?(d=!0,e.appendChild(v.elem),v.set()):delete f[p]}e.style.display=d?"":"none",e.appendChild(l),e.appendChild(h),0===Object.keys(f).length&&n.remove(),this.getChoices=function(){var e={};for(var t in f)e[t]=f[t].get();try{localStorage.setItem("gameSettings",JSON.stringify(e))}catch(e){console.error(e)}return e},this.setChoices=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)f[t]&&f[t].set(e[t])},localStorage.getItem("gameSettings")&&this.setChoices(JSON.parse(localStorage.getItem("gameSettings")))}},function(e,t,n){"use strict";(function(e){function r(){if(void 0===e){var t="undefined"!=typeof window?window:{},n=Date.now(),r=!1;t.document.addEventListener("deviceready",(function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-n)+" ms"),r=!0})),setTimeout((function(){!r&&t.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")}),5e3)}}n.d(t,"a",(function(){return r}))}).call(this,n(162))},function(e,t,n){!function(e){"use strict";function t(e){return e===document.body||e===document.documentElement}function n(e,n){var r;if(t(e))r=0===n?e.clientLeft:e.clientTop;else{var o=e.getBoundingClientRect();r=0===n?o.left:o.top}return r}function r(e,n){return t(e)?0===n?window.innerWidth:window.innerHeight:0===n?e.clientWidth:e.clientHeight}function o(e,n,r){var o=0===n?"scrollLeft":"scrollTop",i=t(e);if(2===arguments.length)return i?document.body[o]||document.documentElement[o]:e[o];i?(document.documentElement[o]+=r,document.body[o]+=r):e[o]+=r}function i(e){var t=getComputedStyle(e);return e.scrollHeight>e.clientHeight&&("scroll"===t.overflowY||"auto"===t.overflowY)||e.scrollWidth>e.clientWidth&&("scroll"===t.overflowX||"auto"===t.overflowX)}function a(e,t,n){return e<n?-1:t-e<n?1:0}function s(e,t,n,r){return-1===e?Math.abs(t-r):1===e?Math.abs(n-t-r):0}function u(e,t,n){var r=0===e?n.scrollX:n.scrollY;return 1===t?r>=(0===e?n.scrollWidth-n.width:n.scrollHeight-n.height):-1!==t||r<=0}var c,l,h,f,d,p=75,v=function(e,t){var n=e/t;return n*n*n*t},m={horizontal:0,vertical:0},g={x:0,y:0};function y(){c||(c=window.requestAnimationFrame(w))}function w(){var e=0,n=0,r=t(f);0!==m.horizontal&&(e=Math.round(v(g.x,p)*m.horizontal),o(f,0,e)),0!==m.vertical&&(n=Math.round(v(g.y,p)*m.vertical),o(f,1,n)),r?d(e,n):d(0,0),c=null,b(l,f,p,m,g)&&y()}function b(e,t,i,c,l){if(!e||!t)return!1;var h={x:n(t,0),y:n(t,1),width:r(t,0),height:r(t,1),scrollX:o(t,0),scrollY:o(t,1),scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight},f={x:e.x-h.x,y:e.y-h.y};return c.horizontal=a(f.x,h.width,i),c.vertical=a(f.y,h.height,i),c.horizontal&&u(0,c.horizontal,h)?c.horizontal=0:c.horizontal&&(l.x=s(c.horizontal,f.x,h.width,i)),c.vertical&&u(1,c.vertical,h)?c.vertical=0:c.vertical&&(l.y=s(c.vertical,f.y,h.height,i)),!(!c.horizontal&&!c.vertical)}var S=function(e,t,n,r){l=t,d=r,h!==n&&(f=function(e){do{if(!e)return;if(i(e))return e;if(e===document.documentElement)return null}while(e=e.parentNode);return null}(h=n)),b(l,f,p,m,g)?y():c&&(window.cancelAnimationFrame(c),c=null)};e.scrollBehaviourDragImageTranslateOverride=S,Object.defineProperty(e,"__esModule",{value:!0})}(t)},,function(e,t,n){"use strict";var r=n(12),o=n(4),i=n(2),a=n(139),s=RegExp.prototype,u=s.toString,c=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l="toString"!=u.name;(c||l)&&r(RegExp.prototype,"toString",(function(){var e=o(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in s)?a.call(e):n)}),{unsafe:!0})},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(129),n(78),n(34),n(35);var i=n(178),a=n(171),s=n(189);try{n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()),n(170)}catch(e){console.warn(e)}var u=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),t=new Proxy(t,{get:function(e,t){var n=e[t];return n instanceof String?n.trim():n},set:function(e,t,n){return n instanceof String&&(n=n.trim()),e[t]=n,!0}}),this.getRoom=function(e){return t[e]},this.createRoom=function(e,n){return!t[e]&&(t[e]=n||new i(e))},this.deleteRoom=function(e){delete t[e]},this.getClient=function(e){return n[e]},this.createClient=function(e,t){return n[e]=new a(e,t),n[e]},this.createBot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.findUniqueId(n,"bot"),r=arguments.length>1?arguments[1]:void 0;return n[t]=new s(t,r),n[t]},this.deleteClient=function(e){delete n[e]},this.getAllClients=function(){var e=[];for(var t in n)e.push(n[t]);return e},this.init=function(e){console.time("Initializing server state... ");var r=JSON.parse(e),o=r.clients,s=r.rooms;for(var u in o)n[u]=a.fromJSON(o[u]);for(var c in s)t[c]=i.fromJSON(s[c]),t[c].init(),console.log(globalThis.serverStateManager.getRoom(c));console.timeEnd("Initializing server state... ")}.bind(this),this.toJSON=function(){return JSON.stringify({rooms:t,clients:n})}.bind(this)}var t,n,u;return t=e,u=[{key:"findUniqueId",value:function(e){for(var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.pow(2,9);!n||e[r+t];)n=r+(t=Math.floor(Math.random()*o)),o=Math.min(Math.pow(2,53),2*o);return n}}],(n=null)&&o(t.prototype,n),u&&o(t,u),e}();e.exports=u},function(e,t,n){var r=n(2),o=n(177);e.exports=function(e){return r((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},function(e,t,n){"use strict";var r=n(3),o=n(74),i=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),i.call(this)}})},function(e,t,n){var r=n(25),o=n(15),i=n(43),a=n(13),s=function(e){return function(t,n,s,u){r(n);var c=o(t),l=i(c),h=a(c.length),f=e?h-1:0,d=e?-1:1;if(s<2)for(;;){if(f in l){u=l[f],f+=d;break}if(f+=d,e?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:h>f;f+=d)f in l&&(u=n(u,l[f],f,c));return u}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){var r=n(7),o=n(136);e.exports=function(e,t,n){var i,a;return o&&"function"==typeof(i=t.constructor)&&i!==n&&r(a=i.prototype)&&a!==n.prototype&&o(e,a),e}},function(e,t,n){var r=n(22),o=n(69).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return a.slice()}}(e):o(r(e))}},function(e,t,n){"use strict";var r=n(15),o=n(70),i=n(13);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:o(u,n);c>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(3),o=n(186),i=n(15),a=n(13),s=n(25),u=n(86);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=i(this),r=a(n.length);return s(e),(t=u(n,0)).length=o(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},function(e,t,n){n(73)("flatMap")},function(e,t,n){n(21),n(130),n(17),n(105),n(78),n(53),n(66),n(107),n(5),n(109),n(32);var r,o,i=n(80),a=n(64),s=n(188);try{r=n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()),o=n(170)}catch(e){console.warn(e)}e.exports=function(e){if(this.clientIds.length<4)return"Not Enough Clients";var t,n,u,c,l,h,f,d,p,v;if(!["chinese","american"].includes(null==e||null===(t=e.settings)||void 0===t?void 0:t.gameStyle))return"You must select either Chinese or American Mahjong in Game Settings (scroll down if not visible). ";if(this.state.settings.gameStyle=null==e||null===(p=e.settings)||void 0===p?void 0:p.gameStyle,this.inGame=!0,this.messageAll([],e.type,"Game Started","success"),this.state.settings.charleston=[[{direction:"across"},{direction:"right"},{direction:"left"}]],this.state.settings.botSettings=this.state.settings.botSettings||{},this.state.settings.disableHints=(null==e||null===(n=e.settings)||void 0===n?void 0:n.disableHints)||!1,this.state.settings.botSettings.canCharleston=null!==(u=null==e||null===(c=e.settings)||void 0===c||null===(l=c.botSettings)||void 0===l?void 0:l.canCharleston)&&void 0!==u&&u,this.state.settings.windAssignments=this.state.settings.windAssignments||{},this.state.settings.checkForCalling=null===(h=null==e||null===(f=e.settings)||void 0===f?void 0:f.checkForCalling)||void 0===h||h,isNaN(null==e||null===(d=e.settings)||void 0===d?void 0:d.maximumSequences)?this.state.settings.maximumSequences=4:this.state.settings.maximumSequences=Math.max(0,Math.round(Number(null==e||null===(v=e.settings)||void 0===v?void 0:v.maximumSequences))),this.state.seed=this.state.seed||Math.random(),"chinese"===this.state.settings.gameStyle)this.gameData.wall=new i(this.state.seed);else{if("american"!==this.state.settings.gameStyle)throw"Unknown gameStyle";var m,g,y,w;this.gameData.wall=new i(this.state.seed,{prettysAsTiles:!0,includeJokers:8}),this.state.settings.checkForCalling=!1,this.state.settings.charleston=[[{direction:"right"},{direction:"across"},{direction:"left",blind:!0}],[{direction:"left",allAgree:!0},{direction:"across"},{direction:"right",blind:!0}],[{direction:"across",blind:!0}]],s[null==e||null===(m=e.settings)||void 0===m?void 0:m.card]?this.state.settings.card=null==e||null===(y=e.settings)||void 0===y?void 0:y.card:(console.error("Unknown Card",null==e||null===(w=e.settings)||void 0===w?void 0:w.card),this.state.settings.card="2021 National Mahjongg League");this.gameData.card=s[this.state.settings.card],this.gameData.charleston={directions:this.state.settings.charleston.slice(0)},this.state.settings.americanBotDifficulty=Math.max(0,Number(null==e||null===(g=e.settings)||void 0===g?void 0:g.americanBotDifficulty)),isNaN(this.state.settings.americanBotDifficulty)&&(this.state.settings.americanBotDifficulty=50),console.log("Bot Difficulty: "+this.state.settings.americanBotDifficulty)}this.state.hostClientId=this.hostClientId,this.state.moves=[],r&&(this.logFile=r.createWriteStream(o.join(globalThis.serverStateManager.serverDataDirectory,this.roomId+"-"+Date.now()+".room"))),this.gameData.discardPile=[],this.gameData.playerHands={};var b=["north","east","south","west"],S=b.slice(0),E={};for(var T in this.state.settings.windAssignments){var x=this.state.settings.windAssignments[T];if(this.clientIds.includes(T)){var C=b.indexOf(x);-1!==C&&(b.splice(C,1),E[T]=x)}}var k=[],O=[],M=[];this.clientIds.slice(0,4).forEach((function(e){E[e]||(E[e]=b.splice(Math.floor(Math.random()*b.length),1)[0]);var t=globalThis.serverStateManager.getClient(e);t.isBot?(k.push(t.getNickname()),O.push(e)):M.push(e)})),M=M.sort(),k=k.sort();var A,I=S.indexOf(E[M[0]]);for(var j in-1===I&&(I=0),S=S.slice(I).concat(S.slice(0,I)),(O=O.sort((function(e,t){return S.indexOf(E[e])-S.indexOf(E[t])}))).forEach((function(e,t){globalThis.serverStateManager.getClient(e).setNickname(k[t])})),E){var P=E[j],N=new a({wind:P});this.gameData.playerHands[j]=N;var L=13;"east"===P&&(A=j,L=14);for(var R=0;R<L;R++)this.drawTile(j,!0)}this.state.settings.windAssignments=E,this.gameData.currentTurn={thrown:!1,userTurn:A},this.gameData.currentTurn.turnChoices=new Proxy({},this.turnChoicesProxyHandler),this.logFile&&this.logFile.write(JSON.stringify(this.state)+"\n"),"chinese"===this.state.settings.gameStyle?(this.setInstructions(this.gameData.currentTurn.userTurn,"As East wind, you get to make the first throw. Select one tile and press Proceed.\n\nTo initiate a Charleston, select 3 tiles and hit Proceed."),this.setAllInstructions([this.gameData.currentTurn.userTurn],"Waiting on East Wind to make a play. ")):"american"===this.state.settings.gameStyle&&this.setAllInstructions([],"Welcome to the Charleston. Select 3 tiles you would like to pass "+this.gameData.charleston.directions[0][0].direction+", then hit Proceed. ","success"),this.sendStateToClients()}},function(e,t,n){n(32);var r=n(14),o=[];o=(o=(o=(o=(o=(o=(o=(o=(o=o.concat(n(208))).concat(n(209))).concat(n(210))).concat(n(211))).concat(n(212))).concat(n(213))).concat(n(214))).concat(n(215))).concat(n(216)),o=r.outputExpander(o),console.log(o),e.exports=o},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=r.allSuits,a=(r.allSuitArrangements,r.oddOptions),s=r.evenOptions,u=(r.allOptions,r.dragonOptions),c=r.dragonArrangments;r.suitDragonConversion;e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[0].forEach((function(t){var n=[];e.push(n),n.push(o({type:"wind",value:"north",amount:4})),n.push(o({type:"wind",value:"east",amount:3})),n.push(o({type:"wind",value:"west",amount:3})),n.push(o({type:"wind",value:"south",amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return c.forEach((function(t){var n=[];e.push(n),n.push(o({type:"wind",value:"north",amount:1})),n.push(o({type:"wind",value:"east",amount:1})),n.push(o({type:"wind",value:"west",amount:1})),n.push(o({type:"wind",value:"south",amount:1})),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"dragon",value:t[0],amount:4})),n.push(o({type:"dragon",value:t[1],amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"wind",value:"north",amount:4})),n.push(o({type:"wind",value:"south",amount:4})),i.forEach((function(e){n.push(o({type:e,value:t,amount:2}))}))})),{tiles:e,score:30,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.forEach((function(t){var n=[];e.push(n),n.push(o({type:"wind",value:"east",amount:4})),n.push(o({type:"wind",value:"west",amount:4})),i.forEach((function(e){n.push(o({type:e,value:t,amount:2}))}))})),{tiles:e,score:30,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u.forEach((function(t){var n=[];e.push(n),n.push(o({type:"wind",value:"north",amount:2})),n.push(o({type:"wind",value:"east",amount:3})),n.push(o({type:"wind",value:"west",amount:3})),n.push(o({type:"wind",value:"south",amount:2})),n.push(o({type:"dragon",value:t,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"wind",value:"north",amount:4})),n.push(o({type:t,value:2,amount:2})),n.push(o({type:"dragon",value:"white",amount:2})),n.push(o({type:"wind",value:"south",amount:4}))})),i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"wind",value:"east",amount:4})),n.push(o({type:t,value:2,amount:2})),n.push(o({type:"dragon",value:"white",amount:2})),n.push(o({type:"wind",value:"west",amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[0].forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"wind",value:"north",amount:3})),n.push(o({type:"wind",value:"east",amount:3})),n.push(o({type:"wind",value:"west",amount:3})),n.push(o({type:"wind",value:"south",amount:3}))})),{tiles:e,score:30,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="Winds and Dragons",n}))},function(e,t,n){n(8),n(5),n(17);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions,r.allOptions),u=(r.dragonOptions,r.dragonArrangments,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){[0,4].forEach((function(n){var r=[];e.push(r),r.push(o({type:t,value:1+n,amount:2})),r.push(o({type:t,value:2+n,amount:2})),r.push(o({type:t,value:3+n,amount:3})),r.push(o({type:t,value:4+n,amount:3})),r.push(o({type:t,value:5+n,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-2).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:4})),r.push(o({type:n[0],value:t,amount:4})),r.push(o({type:n[1],value:1+t,amount:2})),r.push(o({type:n[2],value:2+t,amount:4}))})),i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:4})),r.push(o({type:n,value:t,amount:4})),r.push(o({type:n,value:1+t,amount:2})),r.push(o({type:n,value:2+t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-3).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:t,amount:3})),r.push(o({type:n[0],value:1+t,amount:3})),r.push(o({type:n[1],value:2+t,amount:4})),r.push(o({type:n[1],value:3+t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-2).forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:n,value:t,amount:3})),r.push(o({type:n,value:1+t,amount:4})),r.push(o({type:n,value:2+t,amount:3})),r.push(o({type:"dragon",value:u[n],amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-4).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:t,amount:2})),r.push(o({type:n[0],value:1+t,amount:2})),r.push(o({type:n[0],value:2+t,amount:2})),r.push(o({type:n[1],value:3+t,amount:4})),r.push(o({type:n[2],value:4+t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-3).forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:4})),r.push(o({type:n,value:t,amount:1})),r.push(o({type:n,value:1+t,amount:2})),r.push(o({type:n,value:2+t,amount:3})),r.push(o({type:n,value:3+t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-2).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:t,amount:3})),r.push(o({type:n[0],value:1+t,amount:2})),r.push(o({type:n[0],value:2+t,amount:3})),r.push(o({type:"dragon",value:u[n[1]],amount:3})),r.push(o({type:"dragon",value:u[n[2]],amount:3}))}))})),{tiles:e,score:30,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-2).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:t,amount:3})),r.push(o({type:n[0],value:1+t,amount:3})),r.push(o({type:n[1],value:t,amount:3})),r.push(o({type:n[1],value:1+t,amount:3})),r.push(o({type:n[2],value:2+t,amount:2}))}))})),{tiles:e,score:30,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="Consecutive Run",n}))},function(e,t,n){n(8),n(5),n(17);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions,r.allOptions),u=r.dragonOptions;r.dragonArrangments,r.suitDragonConversion;e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){s.forEach((function(n){u.forEach((function(r){var i=[];e.push(i),i.push(o({type:"dragon",value:r,amount:4})),i.push(o({type:t,value:n,amount:5})),i.push(o({type:"flower",value:"4",amount:5}))}))}))})),{tiles:e,score:40,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-2).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:t,amount:2})),r.push(o({type:n[0],value:1+t,amount:2})),r.push(o({type:n[1],value:2+t,amount:5})),r.push(o({type:n[2],value:2+t,amount:5}))}))})),{tiles:e,score:45,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[1,5].forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:n,value:t,amount:5})),r.push(o({type:n,value:2+t,amount:4})),r.push(o({type:n,value:4+t,amount:5}))}))})),{tiles:e,score:45,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-3).forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:n,value:t,amount:5})),r.push(o({type:n,value:1+t,amount:2})),r.push(o({type:n,value:2+t,amount:2})),r.push(o({type:n,value:3+t,amount:5}))}))})),{tiles:e,score:45,concealed:!1}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="Quints",n}))},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions,r.allOptions),u=(r.dragonOptions,r.dragonArrangments,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),i.forEach((function(e){n.push(o({type:e,value:t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:2})),r.push(o({type:n[0],value:t,amount:4})),r.push(o({type:"dragon",value:u[n[0]],amount:2})),r.push(o({type:n[1],value:t,amount:4})),r.push(o({type:"dragon",value:u[n[1]],amount:2}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:5})),r.push(o({type:n[0],value:t,amount:2})),r.push(o({type:n[1],value:t,amount:3})),r.push(o({type:n[2],value:t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="Any Like Numbers",n}))},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions,r.allOptions,r.dragonOptions,r.dragonArrangments,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:4})),n.push(o({type:t,value:2,amount:1})),n.push(o({type:t,value:4,amount:2})),n.push(o({type:t,value:6,amount:3})),n.push(o({type:t,value:8,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:2,amount:2})),n.push(o({type:t[0],value:4,amount:2})),n.push(o({type:t[1],value:6,amount:3})),n.push(o({type:t[1],value:8,amount:3})),n.push(o({type:"dragon",value:s[t[2]],amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:t,value:2,amount:4})),n.push(o({type:t,value:4,amount:4})),n.push(o({type:t,value:6,amount:4})),n.push(o({type:t,value:8,amount:2}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:2,amount:3})),n.push(o({type:t[0],value:4,amount:3})),n.push(o({type:t[1],value:6,amount:4})),n.push(o({type:t[1],value:8,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:4})),n.push(o({type:t[0],value:4,amount:4})),n.push(o({type:t[1],value:6,amount:4})),n.push(o({type:t[2],value:2,amount:1})),n.push(o({type:t[2],value:4,amount:1}))})),a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:4})),n.push(o({type:t[0],value:6,amount:4})),n.push(o({type:t[1],value:8,amount:4})),n.push(o({type:t[2],value:4,amount:1})),n.push(o({type:t[2],value:8,amount:1}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:2,amount:2})),n.push(o({type:t[0],value:4,amount:3})),n.push(o({type:t[1],value:4,amount:2})),n.push(o({type:t[1],value:6,amount:3})),n.push(o({type:t[2],value:8,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"dragon",value:s[t],amount:4})),n.push(o({type:t,value:2,amount:2})),n.push(o({type:t,value:4,amount:3})),n.push(o({type:t,value:6,amount:3})),n.push(o({type:t,value:8,amount:2}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t[0],value:2,amount:3})),n.push(o({type:t[0],value:8,amount:3})),n.push(o({type:t[1],value:4,amount:3})),n.push(o({type:t[1],value:6,amount:3}))})),{tiles:e,score:30,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="2468",n}))},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements;r.oddOptions,r.evenOptions,r.allOptions,r.dragonOptions,r.dragonArrangments,r.suitDragonConversion;e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"dragon",value:"white",amount:2})),n.push(o({type:t[0],value:2,amount:2})),n.push(o({type:t[1],value:2,amount:4})),n.push(o({type:t[2],value:2,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"dragon",value:"white",amount:2})),n.push(o({type:t,value:2,amount:2})),n.push(o({type:"dragon",value:"green",amount:4})),n.push(o({type:"dragon",value:"red",amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:5})),n.push(o({type:"dragon",value:"white",amount:2})),n.push(o({type:t[0],value:2,amount:2})),n.push(o({type:t[1],value:2,amount:3})),n.push(o({type:t[2],value:2,amount:2}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"wind",value:"north",amount:2})),n.push(o({type:"wind",value:"east",amount:3})),n.push(o({type:"wind",value:"west",amount:3})),n.push(o({type:"wind",value:"south",amount:2})),n.push(o({type:"dragon",value:"white",amount:2})),n.push(o({type:t,value:2,amount:2}))})),{tiles:e,score:30,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="2020",n}))},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions,r.allOptions,r.dragonOptions,r.dragonArrangments,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:t,value:1,amount:2})),n.push(o({type:t,value:3,amount:2})),n.push(o({type:t,value:5,amount:3})),n.push(o({type:t,value:7,amount:3})),n.push(o({type:t,value:9,amount:4}))})),a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:1,amount:2})),n.push(o({type:t[0],value:3,amount:2})),n.push(o({type:t[1],value:5,amount:3})),n.push(o({type:t[1],value:7,amount:3})),n.push(o({type:t[2],value:9,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:4})),n.push(o({type:t[0],value:3,amount:4})),n.push(o({type:t[1],value:5,amount:4})),n.push(o({type:t[2],value:1,amount:1})),n.push(o({type:t[2],value:5,amount:1}))})),a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:4})),n.push(o({type:t[0],value:5,amount:4})),n.push(o({type:t[1],value:7,amount:4})),n.push(o({type:t[2],value:3,amount:1})),n.push(o({type:t[2],value:5,amount:1}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:1,amount:3})),n.push(o({type:t[0],value:3,amount:3})),n.push(o({type:t[1],value:3,amount:4})),n.push(o({type:t[1],value:5,amount:4}))})),a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:5,amount:3})),n.push(o({type:t[0],value:7,amount:3})),n.push(o({type:t[1],value:7,amount:4})),n.push(o({type:t[1],value:9,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:1,amount:4})),n.push(o({type:t[1],value:3,amount:2})),n.push(o({type:t[0],value:3,amount:2})),n.push(o({type:t[2],value:3,amount:2})),n.push(o({type:t[0],value:5,amount:4}))})),{tiles:e,score:30,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:5,amount:4})),n.push(o({type:t[1],value:7,amount:2})),n.push(o({type:t[0],value:7,amount:2})),n.push(o({type:t[2],value:7,amount:2})),n.push(o({type:t[0],value:9,amount:4}))})),{tiles:e,score:30,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[1,5].forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"dragon",value:s[n],amount:4})),r.push(o({type:n,value:t,amount:3})),r.push(o({type:n,value:t+2,amount:4})),r.push(o({type:n,value:t+4,amount:3}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t[0],value:1,amount:1})),n.push(o({type:t[0],value:3,amount:2})),n.push(o({type:t[0],value:5,amount:3})),n.push(o({type:t[1],value:5,amount:1})),n.push(o({type:t[1],value:7,amount:2})),n.push(o({type:t[1],value:9,amount:3}))})),{tiles:e,score:35,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="13579",n}))},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions,r.allOptions,r.dragonOptions,r.dragonArrangments,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:3,amount:3})),n.push(o({type:t[0],value:6,amount:3})),n.push(o({type:t[1],value:6,amount:4})),n.push(o({type:t[1],value:9,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[3,6,9].forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:3,amount:2})),r.push(o({type:n[0],value:6,amount:2})),r.push(o({type:n[0],value:9,amount:2})),r.push(o({type:n[1],value:t,amount:4})),r.push(o({type:n[2],value:t,amount:4}))}))})),{tiles:e,score:30,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:t,value:3,amount:3})),n.push(o({type:t,value:6,amount:4})),n.push(o({type:t,value:9,amount:3})),n.push(o({type:"dragon",value:s[t],amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:3,amount:2})),n.push(o({type:t[0],value:6,amount:3})),n.push(o({type:t[1],value:3,amount:2})),n.push(o({type:t[1],value:6,amount:3})),n.push(o({type:t[2],value:9,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t,value:3,amount:4})),n.push(o({type:t,value:6,amount:4})),n.push(o({type:t,value:9,amount:4}))})),a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t[0],value:3,amount:4})),n.push(o({type:t[1],value:6,amount:4})),n.push(o({type:t[2],value:9,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t[0],value:3,amount:1})),n.push(o({type:t[0],value:6,amount:2})),n.push(o({type:t[0],value:9,amount:3})),n.push(o({type:t[1],value:3,amount:1})),n.push(o({type:t[1],value:6,amount:2})),n.push(o({type:t[1],value:9,amount:3}))})),{tiles:e,score:35,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="369",n}))},function(e,t,n){n(8),n(5),n(17);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions,r.allOptions),u=(r.dragonOptions,r.dragonArrangments,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-2).forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"wind",value:"north",amount:2})),r.push(o({type:"wind",value:"east",amount:2})),r.push(o({type:"wind",value:"west",amount:2})),r.push(o({type:"wind",value:"south",amount:2})),r.push(o({type:n,value:t,amount:2})),r.push(o({type:n,value:1+t,amount:2})),r.push(o({type:n,value:2+t,amount:2}))}))})),{tiles:e,score:50,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-4).forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:2})),r.push(o({type:"dragon",value:u[n],amount:2})),r.push(o({type:n,value:t,amount:2})),r.push(o({type:n,value:1+t,amount:2})),r.push(o({type:n,value:2+t,amount:2})),r.push(o({type:n,value:3+t,amount:2})),r.push(o({type:n,value:4+t,amount:2}))}))})),{tiles:e,score:50,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-1).forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:i[0],value:t,amount:2})),n.push(o({type:i[0],value:1+t,amount:2})),n.push(o({type:i[1],value:t,amount:2})),n.push(o({type:i[1],value:1+t,amount:2})),n.push(o({type:i[2],value:t,amount:2})),n.push(o({type:i[2],value:1+t,amount:2}))})),{tiles:e,score:50,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t[0],value:2,amount:1})),n.push(o({type:t[0],value:4,amount:1})),n.push(o({type:t[0],value:6,amount:1})),n.push(o({type:t[0],value:8,amount:1})),n.push(o({type:"dragon",value:u[t[0]],amount:2})),n.push(o({type:t[1],value:2,amount:1})),n.push(o({type:t[1],value:4,amount:1})),n.push(o({type:t[1],value:6,amount:1})),n.push(o({type:t[1],value:8,amount:1})),n.push(o({type:"dragon",value:u[t[1]],amount:2}))})),{tiles:e,score:50,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:3,amount:2})),n.push(o({type:t[0],value:6,amount:1})),n.push(o({type:t[1],value:3,amount:2})),n.push(o({type:t[1],value:6,amount:2})),n.push(o({type:t[1],value:9,amount:1})),n.push(o({type:t[2],value:3,amount:2})),n.push(o({type:t[2],value:6,amount:2})),n.push(o({type:t[2],value:9,amount:2}))})),{tiles:e,score:50,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:1,amount:2})),n.push(o({type:t[0],value:3,amount:1})),n.push(o({type:t[0],value:5,amount:1})),n.push(o({type:t[0],value:7,amount:1})),n.push(o({type:t[0],value:9,amount:2})),n.push(o({type:t[1],value:1,amount:2})),n.push(o({type:t[1],value:3,amount:1})),n.push(o({type:t[1],value:5,amount:1})),n.push(o({type:t[1],value:7,amount:1})),n.push(o({type:t[1],value:9,amount:2}))})),{tiles:e,score:50,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"dragon",value:"white",amount:4})),n.push(o({type:"wind",value:"north",amount:1})),n.push(o({type:"wind",value:"east",amount:1})),n.push(o({type:"wind",value:"west",amount:1})),n.push(o({type:"wind",value:"south",amount:1})),n.push(o({type:t[0],value:2,amount:2})),n.push(o({type:t[1],value:2,amount:2}))})),{tiles:e,score:85,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="Singles and Pairs",n}))},function(e,t,n){n(32);var r=n(14),o=[];o=(o=(o=(o=(o=(o=(o=(o=(o=o.concat(n(218))).concat(n(219))).concat(n(220))).concat(n(221))).concat(n(222))).concat(n(223))).concat(n(224))).concat(n(225))).concat(n(226)),o=r.outputExpander(o),console.log(o),e.exports=o},function(e,t,n){n(8),n(5),n(17);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions,r.allOptions),u=(r.dragonOptions,r.dragonArrangments,r.windOptions);r.suitDragonConversion;e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){s.forEach((function(n){u.forEach((function(r){var i=[];e.push(i),i.push(o({type:"wind",value:r,amount:5})),i.push(o({type:t,value:n,amount:4})),i.push(o({type:"flower",value:"4",amount:5}))}))}))})),{tiles:e,score:40,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-3).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:t,amount:5})),r.push(o({type:n[1],value:1+t,amount:2})),r.push(o({type:n[1],value:2+t,amount:2})),r.push(o({type:n[0],value:3+t,amount:5}))}))})),{tiles:e,score:45,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-2).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:t,amount:5})),r.push(o({type:n[1],value:1+t,amount:4})),r.push(o({type:n[2],value:2+t,amount:5}))}))})),s.slice(0,-2).forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:n,value:t,amount:5})),r.push(o({type:n,value:1+t,amount:4})),r.push(o({type:n,value:2+t,amount:5}))}))})),{tiles:e,score:45,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-1).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:t,amount:2})),r.push(o({type:n[0],value:1+t,amount:5})),r.push(o({type:n[1],value:t,amount:2})),r.push(o({type:n[1],value:1+t,amount:5}))}))})),{tiles:e,score:45,concealed:!1}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="Quints",n}))},function(e,t,n){n(8),n(5),n(17);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions,r.allOptions),u=(r.dragonOptions,r.dragonArrangments,r.windOptions,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){[0,4].forEach((function(n){var r=[];e.push(r),r.push(o({type:t,value:1+n,amount:2})),r.push(o({type:t,value:2+n,amount:3})),r.push(o({type:t,value:3+n,amount:4})),r.push(o({type:t,value:4+n,amount:3})),r.push(o({type:t,value:5+n,amount:2}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-3).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:t,amount:3})),r.push(o({type:n[0],value:1+t,amount:4})),r.push(o({type:n[1],value:2+t,amount:3})),r.push(o({type:n[1],value:3+t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-3).forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:n,value:t,amount:1})),r.push(o({type:n,value:1+t,amount:2})),r.push(o({type:n,value:2+t,amount:3})),r.push(o({type:n,value:3+t,amount:4})),r.push(o({type:"dragon",value:u[n],amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-2).forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:5})),r.push(o({type:n,value:t,amount:2})),r.push(o({type:n,value:1+t,amount:3})),r.push(o({type:n,value:2+t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-2).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:2})),r.push(o({type:n[0],value:t,amount:4})),r.push(o({type:n[1],value:1+t,amount:4})),r.push(o({type:n[2],value:2+t,amount:4}))})),i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:2})),r.push(o({type:n,value:t,amount:4})),r.push(o({type:n,value:1+t,amount:4})),r.push(o({type:n,value:2+t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-2).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:0+t,amount:2})),r.push(o({type:n[0],value:1+t,amount:3})),r.push(o({type:n[1],value:0+t,amount:2})),r.push(o({type:n[1],value:1+t,amount:3})),r.push(o({type:n[2],value:2+t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-3).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:0+t,amount:2})),r.push(o({type:n[0],value:1+t,amount:2})),r.push(o({type:n[0],value:2+t,amount:2})),r.push(o({type:n[1],value:3+t,amount:4})),r.push(o({type:n[2],value:3+t,amount:4}))}))})),{tiles:e,score:30,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s.slice(0,-1).forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:2})),r.push(o({type:n[0],value:0+t,amount:3})),r.push(o({type:n[0],value:1+t,amount:3})),r.push(o({type:"dragon",value:u[n[1]],amount:3})),r.push(o({type:"dragon",value:u[n[2]],amount:3}))}))})),{tiles:e,score:30,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="Consecutive Run",n}))},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions,r.allOptions,r.dragonOptions,r.dragonArrangments,r.windOptions,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:t,value:1,amount:2})),n.push(o({type:t,value:3,amount:3})),n.push(o({type:t,value:5,amount:4})),n.push(o({type:t,value:7,amount:3})),n.push(o({type:t,value:9,amount:2}))})),a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:1,amount:2})),n.push(o({type:t[0],value:3,amount:3})),n.push(o({type:t[1],value:5,amount:4})),n.push(o({type:t[2],value:7,amount:3})),n.push(o({type:t[2],value:9,amount:2}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[1,5].forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:2})),r.push(o({type:n,value:0+t,amount:2})),r.push(o({type:n,value:2+t,amount:3})),r.push(o({type:n,value:4+t,amount:4})),r.push(o({type:"dragon",value:s[n],amount:3}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[1,5].forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:0+t,amount:3})),r.push(o({type:n[0],value:2+t,amount:4})),r.push(o({type:n[1],value:2+t,amount:4})),r.push(o({type:n[1],value:4+t,amount:3}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[1,5].forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:0+t,amount:2})),r.push(o({type:n[0],value:2+t,amount:3})),r.push(o({type:n[1],value:2+t,amount:3})),r.push(o({type:n[1],value:4+t,amount:2})),r.push(o({type:"dragon",value:s[n[2]],amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[1,5].forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:4})),r.push(o({type:n,value:0+t,amount:4})),r.push(o({type:n,value:2+t,amount:2})),r.push(o({type:n,value:4+t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[1].forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:0+t,amount:2})),r.push(o({type:n[0],value:2+t,amount:2})),r.push(o({type:n[0],value:4+t,amount:2})),r.push(o({type:n[1],value:6+t,amount:4})),r.push(o({type:n[2],value:8+t,amount:4}))}))})),{tiles:e,score:30,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[1,5].forEach((function(t){a.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:0+t,amount:3})),r.push(o({type:n[0],value:2+t,amount:3})),r.push(o({type:n[1],value:0+t,amount:3})),r.push(o({type:n[1],value:2+t,amount:3})),r.push(o({type:n[2],value:4+t,amount:2}))}))})),{tiles:e,score:30,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="13579",n}))},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=(r.allSuits,r.allSuitArrangements),a=(r.oddOptions,r.evenOptions,r.allOptions),s=(r.dragonOptions,r.dragonArrangments,r.windOptions,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:2})),r.push(o({type:n[0],value:t,amount:4})),r.push(o({type:n[1],value:t,amount:4})),r.push(o({type:"wind",value:"north",amount:1})),r.push(o({type:"wind",value:"east",amount:1})),r.push(o({type:"wind",value:"west",amount:1})),r.push(o({type:"wind",value:"south",amount:1}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:4})),r.push(o({type:n[0],value:t,amount:4})),r.push(o({type:n[1],value:t,amount:2})),r.push(o({type:n[2],value:t,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:n[0],value:t,amount:3})),r.push(o({type:"dragon",value:s[n[0]],amount:4})),r.push(o({type:n[1],value:t,amount:3})),r.push(o({type:"dragon",value:s[n[1]],amount:4}))}))})),{tiles:e,score:25,concealed:!1}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="Any Like Numbers",n}))},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions),u=(r.allOptions,r.dragonOptions,r.dragonArrangments,r.windOptions,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:4})),n.push(o({type:t,value:2,amount:2})),n.push(o({type:t,value:4,amount:3})),n.push(o({type:t,value:6,amount:3})),n.push(o({type:t,value:8,amount:2}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:2,amount:3})),n.push(o({type:t[0],value:4,amount:4})),n.push(o({type:t[1],value:6,amount:3})),n.push(o({type:t[1],value:8,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"dragon",value:u[t],amount:4})),n.push(o({type:t,value:2,amount:2})),n.push(o({type:t,value:4,amount:2})),n.push(o({type:t,value:6,amount:3})),n.push(o({type:t,value:8,amount:3}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t[0],value:2,amount:4})),n.push(o({type:t[1],value:4,amount:2})),n.push(o({type:t[1],value:6,amount:2})),n.push(o({type:t[0],value:8,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:2,amount:3})),n.push(o({type:t[0],value:4,amount:3})),n.push(o({type:t[1],value:6,amount:4})),n.push(o({type:t[2],value:8,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:t,value:2,amount:4})),n.push(o({type:t,value:4,amount:4})),n.push(o({type:t,value:6,amount:4})),n.push(o({type:t,value:8,amount:2}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t[0],value:2,amount:1})),n.push(o({type:t[0],value:4,amount:1})),n.push(o({type:t[0],value:6,amount:1})),n.push(o({type:t[0],value:8,amount:1})),n.push(o({type:"dragon",value:u[t[1]],amount:4})),n.push(o({type:"dragon",value:u[t[2]],amount:4}))})),{tiles:e,score:30,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){s.forEach((function(n){var r=[];e.push(r),r.push(o({type:t[0],value:2,amount:3})),r.push(o({type:t[0],value:4,amount:1})),r.push(o({type:t[0],value:6,amount:1})),r.push(o({type:t[0],value:8,amount:3})),r.push(o({type:t[1],value:n,amount:3})),r.push(o({type:t[2],value:n,amount:3}))}))})),{tiles:e,score:30,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="2468",n}))},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements;r.oddOptions,r.evenOptions,r.allOptions,r.dragonOptions,r.dragonArrangments,r.windOptions,r.suitDragonConversion;e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t[0],value:2,amount:2})),n.push(o({type:"dragon",value:"white",amount:1})),n.push(o({type:t[0],value:1,amount:1})),n.push(o({type:t[1],value:2,amount:4})),n.push(o({type:t[2],value:1,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:2,amount:3})),n.push(o({type:"dragon",value:"white",amount:4})),n.push(o({type:t[1],value:2,amount:3})),n.push(o({type:t[1],value:1,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:4})),n.push(o({type:"dragon",value:"white",amount:4})),n.push(o({type:t,value:2,amount:4})),n.push(o({type:t,value:2,amount:1})),n.push(o({type:t,value:1,amount:1}))})),{tiles:e,score:30,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"wind",value:"north",amount:3})),n.push(o({type:"wind",value:"east",amount:2})),n.push(o({type:"wind",value:"west",amount:2})),n.push(o({type:"wind",value:"south",amount:3})),n.push(o({type:t,value:2,amount:2})),n.push(o({type:"dragon",value:"white",amount:1})),n.push(o({type:t,value:1,amount:1}))})),{tiles:e,score:30,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="2021",n}))},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=r.oddOptions,u=r.evenOptions,c=(r.allOptions,r.dragonOptions,r.dragonArrangments,r.windOptions,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[0].forEach((function(t){var n=[];e.push(n),n.push(o({type:"wind",value:"north",amount:4})),n.push(o({type:"wind",value:"east",amount:3})),n.push(o({type:"wind",value:"west",amount:3})),n.push(o({type:"wind",value:"south",amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){s.forEach((function(n){var r=[];e.push(r),r.push(o({type:"wind",value:"north",amount:3})),r.push(o({type:"wind",value:"south",amount:3})),r.push(o({type:t[0],value:n,amount:2})),r.push(o({type:t[1],value:n,amount:2})),r.push(o({type:t[2],value:n,amount:4}))})),u.forEach((function(n){var r=[];e.push(r),r.push(o({type:"wind",value:"east",amount:3})),r.push(o({type:"wind",value:"west",amount:3})),r.push(o({type:t[0],value:n,amount:2})),r.push(o({type:t[1],value:n,amount:2})),r.push(o({type:t[2],value:n,amount:4}))}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[0].forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:4})),n.push(o({type:"wind",value:"north",amount:3})),n.push(o({type:"wind",value:"east",amount:2})),n.push(o({type:"wind",value:"west",amount:2})),n.push(o({type:"wind",value:"south",amount:3}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[0].forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"dragon",value:"red",amount:4})),n.push(o({type:"wind",value:"north",amount:4})),n.push(o({type:"wind",value:"south",amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[0].forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"dragon",value:"green",amount:4})),n.push(o({type:"wind",value:"east",amount:4})),n.push(o({type:"wind",value:"west",amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"wind",value:"north",amount:4})),n.push(o({type:"wind",value:"south",amount:4})),n.push(o({type:"dragon",value:"white",amount:1})),n.push(o({type:t,value:2,amount:2})),n.push(o({type:t,value:1,amount:1}))})),i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"wind",value:"east",amount:4})),n.push(o({type:"wind",value:"west",amount:4})),n.push(o({type:"dragon",value:"white",amount:1})),n.push(o({type:t,value:2,amount:2})),n.push(o({type:t,value:1,amount:1}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"wind",value:"north",amount:3})),n.push(o({type:"wind",value:"east",amount:1})),n.push(o({type:"wind",value:"west",amount:1})),n.push(o({type:"wind",value:"south",amount:3})),n.push(o({type:"dragon",value:c[t[0]],amount:3})),n.push(o({type:"dragon",value:c[t[1]],amount:3}))})),{tiles:e,score:30,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="Winds and Dragons",n}))},function(e,t,n){n(8),n(5);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions,r.allOptions,r.dragonOptions,r.dragonArrangments,r.windOptions,r.suitDragonConversion);e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:3,amount:3})),n.push(o({type:t[0],value:6,amount:4})),n.push(o({type:t[1],value:6,amount:3})),n.push(o({type:t[1],value:9,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:t,value:3,amount:3})),n.push(o({type:t,value:6,amount:4})),n.push(o({type:t,value:9,amount:3})),n.push(o({type:"dragon",value:s[t],amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:3,amount:4})),n.push(o({type:t[0],value:6,amount:4})),n.push(o({type:t[1],value:9,amount:3})),n.push(o({type:t[2],value:9,amount:3}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:5})),n.push(o({type:t,value:3,amount:2})),n.push(o({type:t,value:6,amount:3})),n.push(o({type:t,value:9,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:3,amount:2})),n.push(o({type:t[0],value:6,amount:2})),n.push(o({type:t[1],value:6,amount:3})),n.push(o({type:t[1],value:9,amount:3})),n.push(o({type:"dragon",value:s[t[2]],amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t,value:3,amount:4})),n.push(o({type:t,value:6,amount:4})),n.push(o({type:t,value:9,amount:4}))})),a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t[0],value:3,amount:4})),n.push(o({type:t[1],value:6,amount:4})),n.push(o({type:t[2],value:9,amount:4}))})),{tiles:e,score:25,concealed:!1}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:t[0],value:3,amount:3})),n.push(o({type:t[0],value:6,amount:3})),n.push(o({type:t[1],value:3,amount:3})),n.push(o({type:t[1],value:6,amount:3})),n.push(o({type:t[2],value:9,amount:2}))})),{tiles:e,score:30,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="369",n}))},function(e,t,n){n(8),n(5),n(17);var r=n(14),o=r.createTiles,i=r.allSuits,a=r.allSuitArrangements,s=(r.oddOptions,r.evenOptions),u=r.allOptions;r.dragonOptions,r.dragonArrangments,r.windOptions,r.suitDragonConversion;e.exports=[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:"wind",value:"north",amount:2})),n.push(o({type:"wind",value:"east",amount:1})),n.push(o({type:"wind",value:"west",amount:1})),n.push(o({type:"wind",value:"south",amount:2})),i.forEach((function(e){n.push(o({type:e,value:t,amount:2}))}))})),{tiles:e,score:50,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){[0,4].forEach((function(n){var r=[];e.push(r),r.push(o({type:t[0],value:n+1,amount:2})),r.push(o({type:t[0],value:n+3,amount:1})),r.push(o({type:t[1],value:n+1,amount:2})),r.push(o({type:t[1],value:n+3,amount:2})),r.push(o({type:t[1],value:n+5,amount:1})),r.push(o({type:t[2],value:n+1,amount:2})),r.push(o({type:t[2],value:n+3,amount:2})),r.push(o({type:t[2],value:n+5,amount:2}))}))})),{tiles:e,score:50,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u.slice(0,-5).forEach((function(t){i.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:2})),r.push(o({type:n,value:t,amount:2})),r.push(o({type:n,value:1+t,amount:2})),r.push(o({type:n,value:2+t,amount:2})),r.push(o({type:n,value:3+t,amount:2})),r.push(o({type:n,value:4+t,amount:2})),r.push(o({type:n,value:5+t,amount:2}))}))})),{tiles:e,score:50,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){s.forEach((function(n){var r=[];e.push(r),r.push(o({type:"flower",value:"4",amount:2})),r.push(o({type:t[0],value:2,amount:2})),r.push(o({type:t[0],value:4,amount:2})),r.push(o({type:t[0],value:6,amount:2})),r.push(o({type:t[0],value:8,amount:2})),r.push(o({type:t[1],value:n,amount:2})),r.push(o({type:t[2],value:n,amount:2}))}))})),{tiles:e,score:50,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),n.push(o({type:t[1],value:3,amount:2})),n.push(o({type:t[1],value:6,amount:2})),n.push(o({type:t[1],value:9,amount:2})),n.push(o({type:t[2],value:3,amount:2})),n.push(o({type:t[2],value:6,amount:2})),n.push(o({type:t[2],value:9,amount:2}))})),{tiles:e,score:50,concealed:!0}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i.forEach((function(t){var n=[];e.push(n),n.push(o({type:"flower",value:"4",amount:2})),i.forEach((function(e){n.push(o({type:e,value:2,amount:2})),n.push(o({type:e,value:1,amount:1})),n.push(o({type:"dragon",value:"white",amount:1}))}))})),{tiles:e,score:75,concealed:!0}}].map((function(e,t){var n=e();return n.cardIndex=t,n.section="Singles and Pairs",n}))},function(e,t,n){n(78),e.exports=function(e){var t=globalThis.serverStateManager.createBot();e.botName&&t.setNickname(e.botName),t.setRoomId(this.roomId),this.addClient(t.clientId),this.sendStateToClients()}},function(e,t,n){n(66),n(78),n(21),n(5),n(17),n(34),n(35),n(53),n(109),n(108),n(8),n(105);var r=n(48),o=n(65),i=n(27),a=n(64),s=n(111),u=n(80),c=["north","east","south","west"];function l(e,t){for(var n=c.indexOf(e),r=0;c[n]!==t;)r++,-1===--n&&(n=c.length-1);return r}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("Next"===e[t])return!0;var u,c=globalThis.serverStateManager.getClient(t),h=this.gameData.playerHands[this.gameData.currentTurn.userTurn].wind,f=this.gameData.playerHands[t],d=f.wind;if(this.gameData.charleston){if(e[t].length>3)return c.message("roomActionPlaceTiles","You can pass no more than 3 tiles during one Charleston round. ","error"),!1;if(this.gameData.charleston.directions[0][0].allAgree){if(![0,3].includes(e[t].length))return c.message("roomActionPlaceTiles","Pass zero tiles (press proceed on nothing) to veto this round. Pass three tiles to vote in favor. ","error"),!1;if(0===e[t].length)return this.messageAll([t],"roomActionGameplayAlert","Charleston Round Vetoed by "+c.getNickname(),"success"),c.message("roomActionGameplayAlert","Charleston Round Vetoed","success"),this.clientIds.slice(0,4).forEach((function(t){e[t]||(e[t]=[])})),!0}else if(this.gameData.charleston.directions[0][0].blind);else if(3!==e[t].length)return c.message("roomActionPlaceTiles","This Charleston round requires exactly three tiles. ","error"),!1;return e[t].some((function(e){return"joker"===e.type}))?(c.message("roomActionPlaceTiles","Jokers may not be passed during Charleston. ","error"),!1):!!f.removeTilesFromHand(e[t])||(c.message("roomActionPlaceTiles","You can't pass tiles you don't possess. ","error"),!1)}if(e[t]instanceof s||"american"===this.state.settings.gameStyle&&e[t].mahjong){if("joker"===this.gameData.currentTurn.thrown.type)return c.message("roomActionPlaceTiles","You can't pick up a joker! Jokers are dead when thrown! ","error"),!1;if(e[t]instanceof s){if(!e[t].mahjong){if(e[t].tiles.length<3)return c.message("roomActionPlaceTiles","Except for Mahjong, you can only call for matches of 3+ tiles and/or jokers. ","error"),!1;if(!e[t].isValidMatch(!0))return c.message("roomActionPlaceTiles","Except for Mahjong, you can only call for matches. ","error"),!1}}else{var p=new s({tiles:[e[t]]});p.mahjong=e[t].mahjong,e[t]=p}if(2===e[t].tiles.length&&!1===e[t].isValidMatch()&&e[t].isValidMatch(!0))return c.message("roomActionPlaceTiles","Jokers can't be used to make a pair. ","error"),!1;u=89-l(d,h),e[t].mahjong&&(u+=20)}else{f.add(this.gameData.currentTurn.thrown);var v=f.isMahjong(this.state.settings.maximumSequences),m=!!v;if(f.remove(this.gameData.currentTurn.thrown),v instanceof a&&!n){var g=v.getStringContents(),y=e[t].exposed;e[t].exposed=!1;var w=e[t].toJSON();e[t].exposed=!0;var b=e[t].toJSON();e[t].exposed=y,g.includes(w)||g.includes(b)||(m=!1)}var S=!1;if(e[t]instanceof i&&e[t].mahjong&&v)console.log("Naked Mahjong Bypassing Checks"),S=!0;else if(e[t].mahjong&&!m&&!n)return c.message("roomActionPlaceTiles","Unable to detect a mahjong in your hand. (Press 'Mahjong' again to override). ","error"),!1;if((m||S)&&e[t].mahjong){u=109;var E=l(d,h);console.log(E),u-=E}else if(e[t]instanceof r){if(2===e[t].amount){if(!m&&!n)return c.message("roomActionPlaceTiles","You can't place a pair when it will not make you mahjong. (Press 'Proceed' or 'Mahjong' again to override)","error"),!1;n||(placement.mahjong=!0)}u=104-l(d,h)}else if(e[t]instanceof o){if(l(d,h)>1&&!n)return c.message("roomActionPlaceTiles","You can only take a sequence from the player before you, except with mahjong. (Press 'Proceed' again to override) ","error"),!1;u=99-l(d,h)}else console.error("Unknown Placement in turnChoicesProxyHandler"),u=89-l(d,h)}return[u,t]}function f(e,t){var n=this;if(this.gameData.charleston){var i,a=[],l=[];for(var f in this.gameData.playerHands){var d=this.gameData.playerHands[f],p=c.indexOf(d.wind);a[p]=d,l[p]=e[f]}var v,m=this.gameData.charleston.directions[0].shift();switch(m.allAgree&&!l.every((function(e){return 3===e.length}))&&(this.gameData.charleston.directions.shift(),m.direction="none"),0===this.gameData.charleston.directions[0].length&&this.gameData.charleston.directions.shift(),m.direction){case"right":v=1;break;case"across":v=2;break;case"left":v=3;break;case"none":v=0;break;default:throw"Unknown Direction"+m}if(2===v)[0,1].forEach((function(e){for(var t=l[e],n=a[e],r=e+2,o=a[r],i=l[r],s=0;s<Math.max(t.length,i.length);s++)t[s]&&i[s]?(o.add(t[s]),n.add(i[s])):t[s]?n.add(t[s]):i[s]&&o.add(i[s])}));else{var g=[];l.forEach((function(e){var t,r=n.roomId+(null===(t=e[0])||void 0===t?void 0:t.type);u.shuffleArray(e,r),e.forEach((function(e){g.push(e)}))})),l.forEach((function(e,t){for(var n=(t+v)%4,r=l[n].length,o=a[n],i=0;i<r;i++)o.add(g.shift())}))}var y=null===(i=this.gameData.charleston.directions[0])||void 0===i?void 0:i[0];y?(this.messageAll([],"roomActionGameplayAlert","The next Charleston pass is "+y.direction,"success"),y.allAgree?this.setAllInstructions([],"Round Vote - Pass 3 tiles "+y.direction+" for another Charleston round. Pass 0 to block it. Tap tiles to add/remove from placemat. Hit Proceed when ready. ","success"):y.blind?this.setAllInstructions([],"Optional Charleston Pass - Pass 0-3 tiles "+y.direction+". Tap tiles to add/remove from placemat. Hit Proceed when ready. ","success"):this.setAllInstructions([],"The next Charleston pass is "+y.direction+". The tiles passed to you are in the placemat - tap to move tiles between the placemat and your hand. Hit Proceed when ready. ","success")):(this.setInstructions(this.gameData.currentTurn.userTurn,"The Charleston is over. \n\nAs East wind, you get to make the first throw. Select one tile and press Proceed."),this.setAllInstructions([this.gameData.currentTurn.userTurn],"The Charleston is over. Waiting on East Wind to make a play. "),this.gameData.charleston=!1)}else{this.gameData.previousTurnPickedUp=!0;var w=[];for(var b in e){var S=h.call(this,e,b,t.includes(b));S instanceof Array&&w.push(S)}var E=!1;if(0!==w.length){w.sort((function(e,t){return t[0]-e[0]}));for(var T=0;T<w.length;T++){var x=w[T][1],C=globalThis.serverStateManager.getClient(x);if(!0!==E){var k=e[x],O=this.gameData.playerHands[x];if(console.log(k),k instanceof o){var M=!1;k.tiles.forEach((function(e){e.value===n.gameData.currentTurn.thrown.value&&e.type===n.gameData.currentTurn.thrown.type&&(M=!0)})),console.log(M),M?(O.add(this.gameData.currentTurn.thrown),O.removeTilesFromHand(k)?(E=!0,O.add(k),k.exposed=!0,this.messageAll([x],"roomActionGameplayAlert",C.getNickname()+" has placed a sequence of "+k.tiles[0].type+"s",{clientId:x,speech:"Chow"}),k.mahjong&&this.goMahjong(x,void 0,t.includes(x)),this.gameData.currentTurn.userTurn=x):(O.remove(this.gameData.currentTurn.thrown),C.message("roomActionPlaceTiles","You can't place a sequence of tiles you do not possess - try reloading the page or restarting the app","error"))):C.message("roomActionPlaceTiles","Are you trying to hack? You must use the thrown tile when attempting to place off turn. ","error")}else if(k instanceof r)if(k.value===this.gameData.currentTurn.thrown.value&&k.type===this.gameData.currentTurn.thrown.type)if(O.removeMatchingTilesFromHand(k.getComponentTile(),k.amount-1)){E=!0,O.add(k),k.exposed=!0;var A=[,,"pair","pong","kong"][k.amount];this.messageAll([x],"roomActionGameplayAlert",C.getNickname()+" has placed a "+A+" of "+k.getTileName(this.state.settings.gameStyle)+"s",{clientId:x,speech:A}),k.mahjong&&this.goMahjong(x,void 0,t.includes(x)),4===k.amount&&this.drawTile(x),this.gameData.currentTurn.userTurn=x}else console.log("Attempted to place invalid match"),C.message("roomActionPlaceTiles","You can't place a match of tiles you do not possess - try reloading the page or restarting the app","error");else C.message("roomActionPlaceTiles","Are you trying to hack? You must use the thrown tile when attempting to place off turn. ","error");else if(k instanceof s){var I=!1;if(k.tiles.forEach((function(e){e.value===n.gameData.currentTurn.thrown.value&&e.type===n.gameData.currentTurn.thrown.type&&(I=!0)})),I)if(O.add(this.gameData.currentTurn.thrown),O.removeTilesFromHand(k)){E=!0,O.add(k);var j="match",P=k.isValidMatch(!0);P&&(j=[,,"pair","pong","kong","quint","sextet"][k.tiles.length],j+=" of "+P.getTileName(this.state.settings.gameStyle)+"s"),this.messageAll([x],"roomActionGameplayAlert",C.getNickname()+" has placed a "+j,{clientId:x,speech:"I'll take that"}),k.mahjong&&this.goMahjong(x,void 0,t.includes(x)),this.gameData.currentTurn.userTurn=x}else O.remove(this.gameData.currentTurn.thrown),C.message("roomActionPlaceTiles","You can't place tiles you do not possess - try reloading the page or restarting the app","error");else C.message("roomActionPlaceTiles","Are you trying to hack? You must use the thrown tile when attempting to place off turn. ","error")}else if(k.mahjong){console.log("Attempting Naked Mahjong"),O.add(this.gameData.currentTurn.thrown),this.goMahjong(x,void 0,t.includes(x));try{O.remove(this.gameData.currentTurn.thrown)}catch(e){console.log("Unable to remove. Appears Naked Mahjong Successful")}}else console.error("No known operation to perform when processing turn. ")}else C.message("roomActionPlaceTiles","Placing tiles failed because another player had a higher priority placement (mahjong>match>sequence, and by order within category).","error")}}if(!1===E){this.gameData.previousTurnPickedUp=!1;var N=c[(c.indexOf(this.gameData.playerHands[this.gameData.currentTurn.userTurn].wind)+1)%4];for(var L in this.gameData.playerHands){var R=this.gameData.playerHands[L];R.wind===N&&(R.contents.forEach((function(e){e instanceof r&&e.type===n.gameData.currentTurn.thrown.type&&e.value===n.gameData.currentTurn.thrown.value&&(E=!0,e.amount=4)})),!1===E?(this.gameData.discardPile.push(this.gameData.currentTurn.thrown),this.drawTile(L)):this.drawTile(L),this.gameData.currentTurn.userTurn=L)}}if(!this.gameData.isMahjong&&!this.gameData.wall.isEmpty){var D=globalThis.serverStateManager.getClient(this.gameData.currentTurn.userTurn);this.setAllInstructions([D.clientId],"Waiting on ".concat(D.getNickname()," to make a move. \n\nIs someone's game frozen? Clicking the sync icon (below this message) might fix that! "))}this.gameData.currentTurn.thrown=!1}for(var H in e)delete e[H];this.sendStateToClients()}var d=[];e.exports=function(e,t,n){if(e[t]=n,!1===h.call(this,e,t,d.includes(t))&&(delete e[t],globalThis.serverStateManager.getClient(t).isBot?console.log("Bots are not allowed to obtain override power. "):d.push(t)),this.gameData.charleston||(e[this.gameData.currentTurn.userTurn]="Next"),4===Object.keys(e).length)f.call(this,e,d),d=[];else{var r="Waiting on: ",o=[];this.clientIds.slice(0,4).forEach((function(t){e[t]||o.push(t)})),r+=o.map((function(e){return globalThis.serverStateManager.getClient(e).getNickname()})).join(", "),r+="\n\nIs someone's game frozen? Clicking the sync icon (below this message) might fix that! ",this.setAllInstructions(o,r)}return!0}},function(e,t,n){var r=n(3),o=n(2),i=n(15),a=n(100),s=n(135);r({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!s},{getPrototypeOf:function(e){return a(i(e))}})},function(e,t,n){var r=n(3),o=n(16),i=n(25),a=n(4),s=n(7),u=n(52),c=n(231),l=n(2),h=o("Reflect","construct"),f=l((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),d=!l((function(){h((function(){}))})),p=f||d;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){i(e),a(t);var n=arguments.length<3?e:i(arguments[2]);if(d&&!f)return h(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var o=n.prototype,l=u(s(o)?o:Object.prototype),p=Function.apply.call(e,l,t);return s(p)?p:l}})},function(e,t,n){"use strict";var r=n(25),o=n(7),i=[].slice,a={},s=function(e,t,n){if(!(t in a)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";a[t]=Function("C,a","return new C("+r.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=i.call(arguments,1),a=function(){var r=n.concat(i.call(arguments));return this instanceof a?s(t,r.length,r):t.apply(e,r)};return o(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(8),n(34),n(35),n(110),n(169),n(5),n(21),n(109),n(108),n(32),n(90),n(17),n(167),n(87),n(88),n(26),n(89),n(30),n(23),n(41),n(146),n(131);var i=n(27),a=n(64),s=n(48),u=n(63);e.exports=function(){var e=this.getRoom();if(!1!==e.inGame){var t=e.gameData,n=t.playerHands[this.clientId];if(!t.currentTurn.turnChoices[this.clientId]){var o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.isMahjong(e.state.settings.maximumSequences);t instanceof Array||(t=[t]),e.onPlace({mahjong:r||void 0,type:"roomActionPlaceTiles",message:t=t.map((function(e){return e.toJSON()}))},this.clientId)}.bind(this);if(n.isMahjong(e.state.settings.maximumSequences))return o();if(t.charleston)o(p());else if(t.currentTurn.userTurn===this.clientId){var c=d(n.contents,n.wind,{chooseSecondarySuit:!1,looseTileCost:5});if("east"===n.wind&&e.state.settings.charleston.length>0&&!1!==t.charleston&&e.state.settings.botSettings.canCharleston){var l=["circle","character","bamboo","honor"].map((function(e){var t;return(null===(t=c[e])||void 0===t?void 0:t.value)||0}));o(Math.max.apply(Math,r(l))>55?c.strategy.throw:p())}else o(c.strategy.throw)}else if(t.currentTurn.thrown){n.add(t.currentTurn.thrown);var h=n.isMahjong(e.state.settings.maximumSequences),f=t.currentTurn.thrown;if(h)return console.log("Naked Mahjong"),n.remove(t.currentTurn.thrown),o([t.currentTurn.thrown],h);if(n.removeMatchingTilesFromHand(f,4,!0))return n.remove(t.currentTurn.thrown),o(new Array(4).fill(t.currentTurn.thrown),h);if(n.removeMatchingTilesFromHand(f,3,!0))return n.remove(t.currentTurn.thrown),o(new Array(3).fill(t.currentTurn.thrown),h);if(h&&n.removeMatchingTilesFromHand(f,2,!0))return n.remove(t.currentTurn.thrown),o(new Array(2).fill(t.currentTurn.thrown),h);n.remove(t.currentTurn.thrown),o([])}}}function d(e,t){var n,r,o=this,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=e.filter((function(e){return!(e instanceof u)}));var l={looseTileCost:5,possibleDoubleRatio:.4,chooseSecondarySuit:!1,charleston:!1};Object.assign(l,c);var h={};function f(e){return e instanceof i?Math.random():e.amount}function d(e){return e.sort((function(e,t){return f(e)-f(t)})),e=e.filter((function(e){return!(!e.isGenerated&&e instanceof s)}))}e.forEach((function(e){var t=e.type;["wind","dragon"].includes(e.type)&&(t="honor"),h[t]=h[t]||[],h[t].push(e)}));var p=function(e){var n=h[e],r=new a;r.contents=n.slice(0);for(var u=function(e){var t=r.contents[e];if(!(t instanceof i))return c=e,"continue";[4,3,2].forEach(function(n){if(r.removeMatchingTilesFromHand(t,n)){e--;var o=new s({amount:n,type:t.type,value:t.value,exposed:!1});o.isGenerated=!0,r.contents.push(o)}}.bind(o)),c=e},c=0;c<r.contents.length;c++)u(c);var f=r.contents.reduce((function(e,n){return e.weight+=l.looseTileCost*(n.amount||1),n.isDouble(t)?e.valueMult+=1:n.isDouble(t,!0)&&(Math.round(e.valueMult)===e.valueMult?e.valueMult+=l.possibleDoubleRatio:e.valueMult+=1),2===n.amount?e.value+=10:3===n.amount?e.value+=25:4===n.amount&&(e.value+=40),e}),{weight:0,value:0,valueMult:0});f.value*=Math.pow(2,f.valueMult),delete f.valueMult,Object.assign(f,{tiles:n,contents:r.contents}),f.contents=d(f.contents),h[e]=f};for(var v in h)p(v);var m=Object.assign({},h);delete m.honor;var g={honors:!1},y=Object.keys(m);if(y.length>1&&(g.honors=!0),1===y.length)g.suit=y[0];else{var w=[];for(var b in m)0!==m[b].contents.length&&w.push([b,m[b].value+m[b].weight]);0!==w.length?(g.results=w,w.sort((function(e,t){return t[1]-e[1]})),g.suit=w[0][0],g.throwSuit=w[w.length-1][0],l.chooseSecondarySuit&&3===w.length&&(g.throwSuit=w[1][0])):(g.suit="honor",g.throwSuit="honor")}for(var S in"honor"!==g.suit&&h.honor&&h.honor.value+h.honor.weight>m[g.suit].value/2&&(g.honors=!0),g.throwSuit===g.suit&&!1===g.honors&&(g.throwSuit="honor"),g.throw=null===(n=h[g.throwSuit])||void 0===n||null===(r=n.contents)||void 0===r?void 0:r[0],h.tiles=[],h.contents=[],h)h[S].tiles&&(h.tiles=h.tiles.concat(h[S].tiles),h.contents=h.contents.concat(h[S].contents));return g.throw||(console.warn("WARNING: A throw was not found through normal measures. Picking tile to avoid crash. "),h.contents=d(h.contents),g.throw=h.contents[0]),g.throw instanceof s&&(g.throw=g.throw.getComponentTile()),!1===l.charleston&&h.contents.forEach((function(e){4===e.amount&&(g.throw=new Array(4).fill(e.getComponentTile()))})),h.strategy=g,h}function p(){for(var e=[],t=0;t<3;t++){var r=d(n.contents,n.wind,{chooseSecondarySuit:Boolean(t%2),looseTileCost:2,charleston:!0}).strategy;n.removeMatchingTile(r.throw),e.push(r.throw)}return e.forEach((function(e){n.add(e)})),e}}},function(e,t,n){n(8),n(34),n(35),n(110),n(17),n(145),n(107),n(5),n(32),n(166);var r=n(27),o=(n(64),n(48),n(63),n(111),n(14)),i=(Math.random(),n(181));e.exports=function(){var e=this.getRoom();if(!1!==e.inGame){var t=e.gameData,n=t.playerHands[this.clientId];if(!t.currentTurn.turnChoices[this.clientId]){var a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;t instanceof Array||(t=[t]),e.onPlace({mahjong:n||void 0,swapJoker:!0,type:"roomActionPlaceTiles",message:t=t.map((function(e){return e.toJSON()}))},this.clientId)}.bind(this),s=t.card,u={botDifficulty:e.state.settings.americanBotDifficulty};if(u.cardPercentage=2*Math.pow(50,u.botDifficulty/100),u.maxAnalysisRounds=1/0,u.botDifficulty<100&&(u.maxAnalysisRounds=Math.max(1,100*Math.pow(.7,100-u.botDifficulty))),u.averageAnalyzedCharlestonTiles=3-1.5*(100-u.botDifficulty)/100,u.cardPercentage<100){var c=i(this.clientId+e.state.seed);s=s.filter((function(e,t){return!t||100*c()<u.cardPercentage}))}var l=Math.floor(u.averageAnalyzedCharlestonTiles+Math.random()),h=o.getTileDifferential(s,n.contents);if(t.charleston){var f=t.charleston.directions[0][0];if(f.blind)a(g(h,l,!0));else if(f.allAgree&&g(h,3,!0).length<3)a([]);else{var d=[];for(g(h,l,!0).forEach((function(e){d.push(e),n.remove(e)}));d.length<3;){var p=n.contents[Math.floor(Math.random()*n.contents.length)];"joker"!==p.type&&(d.push(p),n.remove(p))}d.forEach((function(e){n.add(e)})),a(d)}}else if(t.currentTurn.userTurn===this.clientId){if(h[0].notUsed.length>0){var v=g(h,1);a(v)}else if(0===h[0].diff)a([],!0);else if(console.error("Bot hand appears to be dead. Initiating emergency pick. "),!n.contents.some((function(e){if(e instanceof r)return a(e),!0})))throw"Bot was unable to choose a discard tile. "}else if(t.currentTurn.thrown){if("joker"===t.currentTurn.thrown.type)return a([]);var m=o.getTileDifferential(s,n.contents.concat(t.currentTurn.thrown));if(console.log(m),console.log(m[0]),m[0].handOption.concealed&&0!==m[0].diff);else if(m.some((function(e){if(e.diff<h[0].diff){console.log(e);var r=e.handOption.tiles.find((function(e){if(e[0].matches(t.currentTurn.thrown))return!0}));if(console.warn("Want Tile"),r){console.log(r);var o=[];if(n.contents.forEach((function(e){r[0].matches(e)&&o.push(e)})),console.log(o),r.length>2){if(n.contents.forEach((function(e){o.length!==r.length-1&&"joker"===e.type&&o.push(e)})),console.log(o),o.length===r.length-1)return a(o.concat(t.currentTurn.thrown)),!0;console.warn("Continuing")}else if(0===e.diff){if(o.length===r.length-1)return a(o.concat(t.currentTurn.thrown),!0),!0;console.warn("Continuing Needs Mahjong")}else console.warn("Mahj only. Continuing. ")}else console.warn(t.currentTurn.thrown,n.contents,h[0],e),console.warn("Something odd happened, probably in sorting, causing a match not including the thrown tile to be provided. ")}})))return void console.warn("Returned");a([])}}}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=Math.max(1,t);var r=e[0].notUsed.slice(0);n&&(r=r.filter((function(e){return"joker"!==e.type})));e:for(var o=0;o<e.length;o++)for(var i=e[o],a=function(e){if(r.length<=t)return s=e,"break|analysisLoop";if(e>u.maxAnalysisRounds)return s=e,"break|analysisLoop";var n=r[e];-1===("joker"===n.type?-1:i.notUsed.findIndex((function(t){return s=e,t.matches(n)})))&&(r.splice(e,1),e--),s=e},s=0;s<r.length;s++){var c=a(s);if("break|analysisLoop"===c)break e}for(;t<r.length;)r.splice(Math.floor(Math.random()*r.length),1);return r}}},function(e,t,n){n(5),n(78),n(175),n(129),n(105),n(21),n(53);var r,o,i=n(178);n(171);try{r=n(170),o=n(!function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){console.warn(e)}function a(e,t,n){return JSON.stringify({type:e,message:t,status:n})}e.exports=function(e){var t;e.on("message",(function(n){try{var s,u;try{s=JSON.parse(n)}catch(t){return e.send(a("error","Message must be valid JSON"))}if(console.log("received: "+JSON.stringify(s)),"callServerSave"===s.type||"messageAllServerClients"===s.type)return s.auth?"014eea3157474ede4dccc818d1a84efff650b82b8d67d3470f46e4ecc2f5d829"!==crypto.createHash("sha256").update(s.auth).digest("hex")?e.send(a("displayMessage",{title:"Auth Error",body:"Invalid Admin Password"},"error")):"callServerSave"===s.type?e.send(a("displayMessage",{title:"Server Save",body:saveServerState(s.saveName)},"error")):void("messageAllServerClients"===s.type&&globalThis.serverStateManager.getAllClients().forEach((function(e){e.message("displayMessage",{title:s.title,body:s.body},"error")}))):e.send(a("displayMessage",{title:"Auth Error",body:"This command must be authed"},"error"));if(!t&&!s.clientId)return e.send(a("error","No clientId specified"));if(t=s.clientId,globalThis.serverStateManager.getClient(t)?(u=globalThis.serverStateManager.getClient(t)).setWebsocket(e):u=t.startsWith("bot")?globalThis.serverStateManager.createBot(t,e):globalThis.serverStateManager.createClient(t,e),"createRoom"===s.type)return"string"!=typeof s.roomId||0===s.roomId.trim().length?e.send(a("createRoom","roomId must be a string with at least one character","error")):globalThis.serverStateManager.getRoom(s.roomId)?e.send(a("createRoom","Room Already Exists","error")):(u.setNickname(s.nickname),globalThis.serverStateManager.createRoom(s.roomId).addClient(t),u.setRoomId(s.roomId),e.send(a("createRoom",s.roomId,"success")));if("joinRoom"===s.type)return globalThis.serverStateManager.getRoom(s.roomId)?(u.setNickname(s.nickname),globalThis.serverStateManager.getRoom(s.roomId).addClient(t)):e.send(a("joinRoom","Room Does Not Exist","error"));if("getCurrentRoom"===s.type){console.log(u.getRoomId());var c=u.getRoomId();return u.message(s.type,c,"success"),e.send(a(s.type,c,"success"))}if("createRoomFromState"===s.type){try{var l=r.join(globalThis.serverStateManager.serverDataDirectory,s.saveId+".room");if(o.existsSync(l)){var h=i.fromJSON(o.readFileSync(l,{encoding:"utf8"})),f=h.roomId;if(!globalThis.serverStateManager.createRoom(f,h))return console.warn("Room already exists. ");h.init()}else console.warn("Invalid save path")}catch(e){console.error(e)}return}if(s.type.includes("roomAction")){var d=globalThis.serverStateManager.getRoom(s.roomId)||u.getRoom();if(!d)return e.send(a(s.type,"Room Does Not Exist","error"));try{return d.onIncomingMessage(t,s)}catch(e){return console.error(e),void console.error(e.stack)}}console.log("Nothing happened. ")}catch(e){console.error(e)}}))}},function(e,t,n){
/*! mobile-drag-drop 2.3.0-rc.1 | Copyright (c) 2019 Tim Ruffles | MIT License */
!function(e){"use strict";var t="dnd-poly-",n=["none","copy","copyLink","copyMove","link","linkMove","move","all"],r=["none","copy","move","link"],o=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}();function i(e){return e&&e.tagName}function a(e,t,n){void 0===n&&(n=!0),document.addEventListener(e,t,!!o&&{passive:n})}function s(e,t){document.removeEventListener(e,t)}function u(e,t,n,r){void 0===r&&(r=!1);var i=o?{passive:!0,capture:r}:r;return e.addEventListener(t,n,i),{off:function(){e.removeEventListener(t,n,i)}}}function c(e){return 0===e.length?0:e.reduce((function(e,t){return t+e}),0)/e.length}function l(e,t){for(var n=0;n<e.changedTouches.length;n++)if(e.changedTouches[n].identifier===t)return!0;return!1}function h(e,t,n){for(var r=[],o=[],i=0;i<t.touches.length;i++){var a=t.touches[i];r.push(a[e+"X"]),o.push(a[e+"Y"])}n.x=c(r),n.y=c(o)}var f=["","-webkit-"];function d(e,t,n,r,o){void 0===o&&(o=!0);var i=t.x,a=t.y;r&&(i+=r.x,a+=r.y),o&&(i-=parseInt(e.offsetWidth,10)/2,a-=parseInt(e.offsetHeight,10)/2);for(var s="translate3d("+i+"px,"+a+"px, 0)",u=0;u<f.length;u++){var c=f[u]+"transform";e.style[c]=s+" "+n[u]}}var p=function(){function e(e,t){this.t=e,this.i=t,this.s=r[0]}return Object.defineProperty(e.prototype,"dropEffect",{get:function(){return this.s},set:function(e){0!==this.t.mode&&n.indexOf(e)>-1&&(this.s=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"types",{get:function(){if(0!==this.t.mode)return Object.freeze(this.t.types)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectAllowed",{get:function(){return this.t.effectAllowed},set:function(e){2===this.t.mode&&n.indexOf(e)>-1&&(this.t.effectAllowed=e)},enumerable:!0,configurable:!0}),e.prototype.setData=function(e,t){if(2===this.t.mode){if(e.indexOf(" ")>-1)throw new Error("illegal arg: type contains space");this.t.data[e]=t,-1===this.t.types.indexOf(e)&&this.t.types.push(e)}},e.prototype.getData=function(e){if(1===this.t.mode||2===this.t.mode)return this.t.data[e]||""},e.prototype.clearData=function(e){if(2===this.t.mode){if(e&&this.t.data[e]){delete this.t.data[e];var t=this.t.types.indexOf(e);return void(t>-1&&this.t.types.splice(t,1))}this.t.data={},this.t.types=[]}},e.prototype.setDragImage=function(e,t,n){2===this.t.mode&&this.i(e,t,n)},e}();function v(e,t){return e?e===n[0]?r[0]:0===e.indexOf(n[1])||e===n[7]?r[1]:0===e.indexOf(n[4])?r[3]:e===n[6]?r[2]:r[1]:3===t.nodeType&&"A"===t.tagName?r[3]:r[1]}function m(e,t,n,r,o,i,a){void 0===i&&(i=!0),void 0===a&&(a=null);var s=function(e,t,n,r,o,i,a){void 0===a&&(a=null);var s=t.changedTouches[0],u=new Event(n,{bubbles:!0,cancelable:r});u.dataTransfer=i,u.relatedTarget=a,u.screenX=s.screenX,u.screenY=s.screenY,u.clientX=s.clientX,u.clientY=s.clientY,u.pageX=s.pageX,u.pageY=s.pageY;var c=e.getBoundingClientRect();return u.offsetX=u.clientX-c.left,u.offsetY=u.clientY-c.top,u}(t,n,e,i,document.defaultView,o,a),u=!t.dispatchEvent(s);return r.mode=0,u}function g(e,t){if(!e||e===n[7])return t;if(t===r[1]){if(0===e.indexOf(r[1]))return r[1]}else if(t===r[3]){if(0===e.indexOf(r[3])||e.indexOf("Link")>-1)return r[3]}else if(t===r[2]&&(0===e.indexOf(r[2])||e.indexOf("Move")>-1))return r[2];return r[0]}var y,w=function(){function e(e,t,n,r){this.h=e,this.o=t,this.u=n,this.l=r,this.v=0,this.p=null,this.g=null,this.m=e,this.I=e.changedTouches[0],this.j=this.C.bind(this),this.S=this.k.bind(this),a("touchmove",this.j,!1),a("touchend",this.S,!1),a("touchcancel",this.S,!1)}return e.prototype.A=function(){var e=this;this.v=1,this.O=r[0],this.D={data:{},effectAllowed:void 0,mode:3,types:[]},this.M={x:null,y:null},this.F={x:null,y:null};var t=this.u;if(this.N=new p(this.D,(function(n,r,o){t=n,"number"!=typeof r&&"number"!=typeof o||(e.P={x:r||0,y:o||0})})),this.D.mode=2,this.N.dropEffect=r[0],m("dragstart",this.u,this.m,this.D,this.N))return this.v=3,this.T(),!1;h("page",this.m,this.F);var n,o=this.o.dragImageSetup(t);if(this.L=(n=o,f.map((function(e){var t=n.style[e+"transform"];return t&&"none"!==t?t.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""):""}))),o.style.position="absolute",o.style.left="0px",o.style.top="0px",o.style.zIndex="999999",o.classList.add("dnd-poly-drag-image"),o.classList.add("dnd-poly-icon"),this._=o,!this.P)if(this.o.dragImageOffset)this.P={x:this.o.dragImageOffset.x,y:this.o.dragImageOffset.y};else if(this.o.dragImageCenterOnTouch){var i=getComputedStyle(t);this.P={x:0-parseInt(i.marginLeft,10),y:0-parseInt(i.marginTop,10)}}else{var a=t.getBoundingClientRect();i=getComputedStyle(t),this.P={x:a.left-this.I.clientX-parseInt(i.marginLeft,10)+a.width/2,y:a.top-this.I.clientY-parseInt(i.marginTop,10)+a.height/2}}return d(this._,this.F,this.L,this.P,this.o.dragImageCenterOnTouch),document.body.appendChild(this._),this.V=window.setInterval((function(){e.X||(e.X=!0,e.Y(),e.X=!1)}),this.o.iterationInterval),!0},e.prototype.T=function(){this.V&&(clearInterval(this.V),this.V=null),s("touchmove",this.j),s("touchend",this.S),s("touchcancel",this.S),this._&&(this._.parentNode.removeChild(this._),this._=null),this.l(this.o,this.m,this.v)},e.prototype.C=function(e){var t=this;if(!1!==l(e,this.I.identifier)){if(this.m=e,0===this.v){var n=void 0;if(this.o.dragStartConditionOverride)try{n=this.o.dragStartConditionOverride(e)}catch(e){n=!1}else n=1===e.touches.length;return n?void(!0===this.A()&&(this.h.preventDefault(),e.preventDefault())):void this.T()}if(e.preventDefault(),h("client",e,this.M),h("page",e,this.F),this.o.dragImageTranslateOverride)try{var r=!1;if(this.o.dragImageTranslateOverride(e,{x:this.M.x,y:this.M.y},this.p,(function(e,n){t._&&(r=!0,t.M.x+=e,t.M.y+=n,t.F.x+=e,t.F.y+=n,d(t._,t.F,t.L,t.P,t.o.dragImageCenterOnTouch))})),r)return}catch(e){}d(this._,this.F,this.L,this.P,this.o.dragImageCenterOnTouch)}},e.prototype.k=function(e){if(!1!==l(e,this.I.identifier)){if(this.o.dragImageTranslateOverride)try{this.o.dragImageTranslateOverride(void 0,void 0,void 0,(function(){}))}catch(e){}0!==this.v?(e.preventDefault(),this.v="touchcancel"===e.type?3:2):this.T()}},e.prototype.Y=function(){var e=this,n=this.O;this.D.mode=3,this.N.dropEffect=r[0];var o=m("drag",this.u,this.m,this.D,this.N);if(o&&(this.O=r[0]),o||2===this.v||3===this.v)return this.q(this.v)?void function(e,t,n,r){var o=getComputedStyle(e);if("hidden"!==o.visibility&&"none"!==o.display){t.classList.add("dnd-poly-snapback");var i=getComputedStyle(t),a=parseFloat(i.transitionDuration);if(isNaN(a)||0===a)r();else{var s=e.getBoundingClientRect(),u={x:s.left,y:s.top};u.x+=document.body.scrollLeft||document.documentElement.scrollLeft,u.y+=document.body.scrollTop||document.documentElement.scrollTop,u.x-=parseInt(o.marginLeft,10),u.y-=parseInt(o.marginTop,10);var c=parseFloat(i.transitionDelay),l=Math.round(1e3*(a+c));d(t,u,n,void 0,!1),setTimeout(r,l)}}else r()}(this.u,this._,this.L,(function(){e.B()})):void this.B();var a=this.o.elementFromPoint(this.M.x,this.M.y),s=this.g;a!==this.p&&a!==this.g&&(this.p=a,null!==this.g&&(this.D.mode=3,this.N.dropEffect=r[0],m("dragexit",this.g,this.m,this.D,this.N,!1)),null===this.p?this.g=this.p:(this.D.mode=3,this.N.dropEffect=v(this.D.effectAllowed,this.u),m("dragenter",this.p,this.m,this.D,this.N)?(this.g=this.p,this.O=g(this.N.effectAllowed,this.N.dropEffect)):this.p!==document.body&&(this.g=document.body))),s!==this.g&&i(s)&&(this.D.mode=3,this.N.dropEffect=r[0],m("dragleave",s,this.m,this.D,this.N,!1,this.g)),i(this.g)&&(this.D.mode=3,this.N.dropEffect=v(this.D.effectAllowed,this.u),!1===m("dragover",this.g,this.m,this.D,this.N)?this.O=r[0]:this.O=g(this.N.effectAllowed,this.N.dropEffect)),n!==this.O&&this._.classList.remove(t+n);var u=t+this.O;this._.classList.add(u)},e.prototype.q=function(e){var t=this.O===r[0]||null===this.g||3===e;return t?i(this.g)&&(this.D.mode=3,this.N.dropEffect=r[0],m("dragleave",this.g,this.m,this.D,this.N,!1)):i(this.g)&&(this.D.mode=1,this.N.dropEffect=this.O,!0===m("drop",this.g,this.m,this.D,this.N)?this.O=this.N.dropEffect:this.O=r[0]),t},e.prototype.B=function(){this.D.mode=3,this.N.dropEffect=this.O,m("dragend",this.u,this.m,this.D,this.N,!1),this.v=2,this.T()},e}(),b={iterationInterval:150,tryFindDraggableTarget:function(e){var t=e.target;do{if(!1!==t.draggable){if(!0===t.draggable)return t;if(t.getAttribute&&"true"===t.getAttribute("draggable"))return t}}while((t=t.parentNode)&&t!==document.body)},dragImageSetup:function(e){var t=e.cloneNode(!0);return function e(t,n){if(1===t.nodeType){for(var r=getComputedStyle(t),o=0;o<r.length;o++){var i=r[o];n.style.setProperty(i,r.getPropertyValue(i),r.getPropertyPriority(i))}if(n.style.pointerEvents="none",n.removeAttribute("id"),n.removeAttribute("class"),n.removeAttribute("draggable"),"CANVAS"===n.nodeName){var a=t,s=n,u=a.getContext("2d").getImageData(0,0,a.width,a.height);s.getContext("2d").putImageData(u,0,0)}}if(t.hasChildNodes())for(o=0;o<t.childNodes.length;o++)e(t.childNodes[o],n.childNodes[o])}(e,t),t},elementFromPoint:function(e,t){return document.elementFromPoint(e,t)}};function S(e){if(!y){var t=b.tryFindDraggableTarget(e);if(t)try{y=new w(e,b,t,T)}catch(t){throw T(b,e,3),t}}}function E(e){var t=e.target,n=function(e){o.off(),i.off(),a.off(),s.off(),t&&t.dispatchEvent(new CustomEvent("dnd-poly-dragstart-cancel",{bubbles:!0,cancelable:!0})),clearTimeout(r)};t&&t.dispatchEvent(new CustomEvent("dnd-poly-dragstart-pending",{bubbles:!0,cancelable:!0}));var r=window.setTimeout((function(){o.off(),i.off(),a.off(),s.off(),S(e)}),b.holdToDrag),o=u(t,"touchend",n),i=u(t,"touchcancel",n),a=u(t,"touchmove",n),s=u(window,"scroll",n,!0)}function T(e,t,n){if(0===n&&e.defaultActionOverride)try{e.defaultActionOverride(t),t.defaultPrevented}catch(e){}y=null}e.polyfill=function(e){if(e&&Object.keys(e).forEach((function(t){b[t]=e[t]})),!b.forceApply){var t=(n={dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,userAgentSupportingNativeDnD:void 0},r=!!window.chrome||/chrome/i.test(navigator.userAgent),n.userAgentSupportingNativeDnD=!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||r&&"ontouchstart"in document.documentElement),n);if(t.userAgentSupportingNativeDnD&&t.draggable&&t.dragEvents)return!1}var n,r;return b.holdToDrag?a("touchstart",E,!1):a("touchstart",S,!1),!0},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){var r={"./GameBoard.js":190,"./Hand.js":64,"./Hand/getClearHandDoubles.js":184,"./Hand/isCalling.js":187,"./Hand/isMahjong.js":185,"./Hand/score.js":183,"./Hand/syncContents.js":182,"./Match.js":48,"./Popups.js":128,"./Pretty.js":63,"./RoomManager.js":191,"./RoomManager/SettingsMenu.js":192,"./Sequence.js":65,"./StateManager.js":164,"./Tile.js":27,"./TileContainer.js":111,"./Wall.js":80,"./index.js":172,"./universalLinks.js":144};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=236},function(e,t,n){n(3)({target:"String",proto:!0},{repeat:n(238)})},function(e,t,n){"use strict";var r=n(31),o=n(20);e.exports="".repeat||function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},function(e,t,n){var r,o,i,a=function(){var e=function(e,t){var n=e,r=u[t],o=null,i=0,a=null,s=[],c={},l=function(e,t){o=function(e){for(var t=new Array(e),n=0;n<e;n+=1){t[n]=new Array(e);for(var r=0;r<e;r+=1)t[n][r]=null}return t}(i=4*n+17),h(0,0),h(i-7,0),h(0,i-7),d(),f(),v(e,t),n>=7&&p(e),null==a&&(a=y(n,r,s)),m(a,t)},h=function(e,t){for(var n=-1;n<=7;n+=1)if(!(e+n<=-1||i<=e+n))for(var r=-1;r<=7;r+=1)t+r<=-1||i<=t+r||(o[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},f=function(){for(var e=8;e<i-8;e+=1)null==o[e][6]&&(o[e][6]=e%2==0);for(var t=8;t<i-8;t+=1)null==o[6][t]&&(o[6][t]=t%2==0)},d=function(){for(var e=g.getPatternPosition(n),t=0;t<e.length;t+=1)for(var r=0;r<e.length;r+=1){var i=e[t],a=e[r];if(null==o[i][a])for(var s=-2;s<=2;s+=1)for(var u=-2;u<=2;u+=1)o[i+s][a+u]=-2==s||2==s||-2==u||2==u||0==s&&0==u}},p=function(e){for(var t=g.getBCHTypeNumber(n),r=0;r<18;r+=1){var a=!e&&1==(t>>r&1);o[Math.floor(r/3)][r%3+i-8-3]=a}for(r=0;r<18;r+=1){a=!e&&1==(t>>r&1);o[r%3+i-8-3][Math.floor(r/3)]=a}},v=function(e,t){for(var n=r<<3|t,a=g.getBCHTypeInfo(n),s=0;s<15;s+=1){var u=!e&&1==(a>>s&1);s<6?o[s][8]=u:s<8?o[s+1][8]=u:o[i-15+s][8]=u}for(s=0;s<15;s+=1){u=!e&&1==(a>>s&1);s<8?o[8][i-s-1]=u:s<9?o[8][15-s-1+1]=u:o[8][15-s-1]=u}o[i-8][8]=!e},m=function(e,t){for(var n=-1,r=i-1,a=7,s=0,u=g.getMaskFunction(t),c=i-1;c>0;c-=2)for(6==c&&(c-=1);;){for(var l=0;l<2;l+=1)if(null==o[r][c-l]){var h=!1;s<e.length&&(h=1==(e[s]>>>a&1)),u(r,c-l)&&(h=!h),o[r][c-l]=h,-1==(a-=1)&&(s+=1,a=7)}if((r+=n)<0||i<=r){r-=n,n=-n;break}}},y=function(e,t,n){for(var r=b.getRSBlocks(e,t),o=S(),i=0;i<n.length;i+=1){var a=n[i];o.put(a.getMode(),4),o.put(a.getLength(),g.getLengthInBits(a.getMode(),e)),a.write(o)}var s=0;for(i=0;i<r.length;i+=1)s+=r[i].dataCount;if(o.getLengthInBits()>8*s)throw"code length overflow. ("+o.getLengthInBits()+">"+8*s+")";for(o.getLengthInBits()+4<=8*s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*s||(o.put(236,8),o.getLengthInBits()>=8*s));)o.put(17,8);return function(e,t){for(var n=0,r=0,o=0,i=new Array(t.length),a=new Array(t.length),s=0;s<t.length;s+=1){var u=t[s].dataCount,c=t[s].totalCount-u;r=Math.max(r,u),o=Math.max(o,c),i[s]=new Array(u);for(var l=0;l<i[s].length;l+=1)i[s][l]=255&e.getBuffer()[l+n];n+=u;var h=g.getErrorCorrectPolynomial(c),f=w(i[s],h.getLength()-1).mod(h);a[s]=new Array(h.getLength()-1);for(l=0;l<a[s].length;l+=1){var d=l+f.getLength()-a[s].length;a[s][l]=d>=0?f.getAt(d):0}}var p=0;for(l=0;l<t.length;l+=1)p+=t[l].totalCount;var v=new Array(p),m=0;for(l=0;l<r;l+=1)for(s=0;s<t.length;s+=1)l<i[s].length&&(v[m]=i[s][l],m+=1);for(l=0;l<o;l+=1)for(s=0;s<t.length;s+=1)l<a[s].length&&(v[m]=a[s][l],m+=1);return v}(o,r)};c.addData=function(e,t){var n=null;switch(t=t||"Byte"){case"Numeric":n=E(e);break;case"Alphanumeric":n=T(e);break;case"Byte":n=x(e);break;case"Kanji":n=C(e);break;default:throw"mode:"+t}s.push(n),a=null},c.isDark=function(e,t){if(e<0||i<=e||t<0||i<=t)throw e+","+t;return o[e][t]},c.getModuleCount=function(){return i},c.make=function(){if(n<1){for(var e=1;e<40;e++){for(var t=b.getRSBlocks(e,r),o=S(),i=0;i<s.length;i++){var a=s[i];o.put(a.getMode(),4),o.put(a.getLength(),g.getLengthInBits(a.getMode(),e)),a.write(o)}var u=0;for(i=0;i<t.length;i++)u+=t[i].dataCount;if(o.getLengthInBits()<=8*u)break}n=e}l(!1,function(){for(var e=0,t=0,n=0;n<8;n+=1){l(!0,n);var r=g.getLostPoint(c);(0==n||e>r)&&(e=r,t=n)}return t}())},c.createTableTag=function(e,t){e=e||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(t=void 0===t?4*e:t)+"px;",n+='">',n+="<tbody>";for(var r=0;r<c.getModuleCount();r+=1){n+="<tr>";for(var o=0;o<c.getModuleCount();o+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+e+"px;",n+=" height: "+e+"px;",n+=" background-color: ",n+=c.isDark(r,o)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},c.createSvgTag=function(e,t,n,r){var o={};"object"==typeof arguments[0]&&(e=(o=arguments[0]).cellSize,t=o.margin,n=o.alt,r=o.title),e=e||2,t=void 0===t?4*e:t,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var i,a,s,u,l=c.getModuleCount()*e+2*t,h="";for(u="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",h+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',h+=o.scalable?"":' width="'+l+'px" height="'+l+'px"',h+=' viewBox="0 0 '+l+" "+l+'" ',h+=' preserveAspectRatio="xMinYMin meet"',h+=r.text||n.text?' role="img" aria-labelledby="'+k([r.id,n.id].join(" ").trim())+'"':"",h+=">",h+=r.text?'<title id="'+k(r.id)+'">'+k(r.text)+"</title>":"",h+=n.text?'<description id="'+k(n.id)+'">'+k(n.text)+"</description>":"",h+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',h+='<path d="',a=0;a<c.getModuleCount();a+=1)for(s=a*e+t,i=0;i<c.getModuleCount();i+=1)c.isDark(a,i)&&(h+="M"+(i*e+t)+","+s+u);return h+='" stroke="transparent" fill="black"/>',h+="</svg>"},c.createDataURL=function(e,t){e=e||2,t=void 0===t?4*e:t;var n=c.getModuleCount()*e+2*t,r=t,o=n-t;return M(n,n,(function(t,n){if(r<=t&&t<o&&r<=n&&n<o){var i=Math.floor((t-r)/e),a=Math.floor((n-r)/e);return c.isDark(a,i)?0:1}return 1}))},c.createImgTag=function(e,t,n){e=e||2,t=void 0===t?4*e:t;var r=c.getModuleCount()*e+2*t,o="";return o+="<img",o+=' src="',o+=c.createDataURL(e,t),o+='"',o+=' width="',o+=r,o+='"',o+=' height="',o+=r,o+='"',n&&(o+=' alt="',o+=k(n),o+='"'),o+="/>"};var k=function(e){for(var t="",n=0;n<e.length;n+=1){var r=e.charAt(n);switch(r){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=r}}return t};return c.createASCII=function(e,t){if((e=e||1)<2)return function(e){e=void 0===e?2:e;var t,n,r,o,i,a=1*c.getModuleCount()+2*e,s=e,u=a-e,l={"██":"█","█ ":"▀"," █":"▄","  ":" "},h={"██":"▀","█ ":"▀"," █":" ","  ":" "},f="";for(t=0;t<a;t+=2){for(r=Math.floor((t-s)/1),o=Math.floor((t+1-s)/1),n=0;n<a;n+=1)i="█",s<=n&&n<u&&s<=t&&t<u&&c.isDark(r,Math.floor((n-s)/1))&&(i=" "),s<=n&&n<u&&s<=t+1&&t+1<u&&c.isDark(o,Math.floor((n-s)/1))?i+=" ":i+="█",f+=e<1&&t+1>=u?h[i]:l[i];f+="\n"}return a%2&&e>0?f.substring(0,f.length-a-1)+Array(a+1).join("▀"):f.substring(0,f.length-1)}(t);e-=1,t=void 0===t?2*e:t;var n,r,o,i,a=c.getModuleCount()*e+2*t,s=t,u=a-t,l=Array(e+1).join("██"),h=Array(e+1).join("  "),f="",d="";for(n=0;n<a;n+=1){for(o=Math.floor((n-s)/e),d="",r=0;r<a;r+=1)i=1,s<=r&&r<u&&s<=n&&n<u&&c.isDark(o,Math.floor((r-s)/e))&&(i=0),d+=i?l:h;for(o=0;o<e;o+=1)f+=d+"\n"}return f.substring(0,f.length-1)},c.renderTo2dContext=function(e,t){t=t||2;for(var n=c.getModuleCount(),r=0;r<n;r++)for(var o=0;o<n;o++)e.fillStyle=c.isDark(r,o)?"black":"white",e.fillRect(r*t,o*t,t,t)},c};e.stringToBytes=(e.stringToBytesFuncs={default:function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(255&r)}return t}}).default,e.createStringToBytes=function(e,t){var n=function(){for(var n=O(e),r=function(){var e=n.read();if(-1==e)throw"eof";return e},o=0,i={};;){var a=n.read();if(-1==a)break;var s=r(),u=r()<<8|r();i[String.fromCharCode(a<<8|s)]=u,o+=1}if(o!=t)throw o+" != "+t;return i}(),r="?".charCodeAt(0);return function(e){for(var t=[],o=0;o<e.length;o+=1){var i=e.charCodeAt(o);if(i<128)t.push(i);else{var a=n[e.charAt(o)];"number"==typeof a?(255&a)==a?t.push(a):(t.push(a>>>8),t.push(255&a)):t.push(r)}}return t}};var t,n,r,o=1,i=2,a=4,s=8,u={L:1,M:0,Q:3,H:2},c=0,l=1,h=2,f=3,d=4,p=5,v=6,m=7,g=(t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],r=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t},(n={}).getBCHTypeInfo=function(e){for(var t=e<<10;r(t)-r(1335)>=0;)t^=1335<<r(t)-r(1335);return 21522^(e<<10|t)},n.getBCHTypeNumber=function(e){for(var t=e<<12;r(t)-r(7973)>=0;)t^=7973<<r(t)-r(7973);return e<<12|t},n.getPatternPosition=function(e){return t[e-1]},n.getMaskFunction=function(e){switch(e){case c:return function(e,t){return(e+t)%2==0};case l:return function(e,t){return e%2==0};case h:return function(e,t){return t%3==0};case f:return function(e,t){return(e+t)%3==0};case d:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case p:return function(e,t){return e*t%2+e*t%3==0};case v:return function(e,t){return(e*t%2+e*t%3)%2==0};case m:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},n.getErrorCorrectPolynomial=function(e){for(var t=w([1],0),n=0;n<e;n+=1)t=t.multiply(w([1,y.gexp(n)],0));return t},n.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case o:return 10;case i:return 9;case a:case s:return 8;default:throw"mode:"+e}else if(t<27)switch(e){case o:return 12;case i:return 11;case a:return 16;case s:return 10;default:throw"mode:"+e}else{if(!(t<41))throw"type:"+t;switch(e){case o:return 14;case i:return 13;case a:return 16;case s:return 12;default:throw"mode:"+e}}},n.getLostPoint=function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r+=1)for(var o=0;o<t;o+=1){for(var i=0,a=e.isDark(r,o),s=-1;s<=1;s+=1)if(!(r+s<0||t<=r+s))for(var u=-1;u<=1;u+=1)o+u<0||t<=o+u||0==s&&0==u||a==e.isDark(r+s,o+u)&&(i+=1);i>5&&(n+=3+i-5)}for(r=0;r<t-1;r+=1)for(o=0;o<t-1;o+=1){var c=0;e.isDark(r,o)&&(c+=1),e.isDark(r+1,o)&&(c+=1),e.isDark(r,o+1)&&(c+=1),e.isDark(r+1,o+1)&&(c+=1),0!=c&&4!=c||(n+=3)}for(r=0;r<t;r+=1)for(o=0;o<t-6;o+=1)e.isDark(r,o)&&!e.isDark(r,o+1)&&e.isDark(r,o+2)&&e.isDark(r,o+3)&&e.isDark(r,o+4)&&!e.isDark(r,o+5)&&e.isDark(r,o+6)&&(n+=40);for(o=0;o<t;o+=1)for(r=0;r<t-6;r+=1)e.isDark(r,o)&&!e.isDark(r+1,o)&&e.isDark(r+2,o)&&e.isDark(r+3,o)&&e.isDark(r+4,o)&&!e.isDark(r+5,o)&&e.isDark(r+6,o)&&(n+=40);var l=0;for(o=0;o<t;o+=1)for(r=0;r<t;r+=1)e.isDark(r,o)&&(l+=1);return n+=Math.abs(100*l/t/t-50)/5*10},n),y=function(){for(var e=new Array(256),t=new Array(256),n=0;n<8;n+=1)e[n]=1<<n;for(n=8;n<256;n+=1)e[n]=e[n-4]^e[n-5]^e[n-6]^e[n-8];for(n=0;n<255;n+=1)t[e[n]]=n;var r={glog:function(e){if(e<1)throw"glog("+e+")";return t[e]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]}};return r}();function w(e,t){if(void 0===e.length)throw e.length+"/"+t;var n=function(){for(var n=0;n<e.length&&0==e[n];)n+=1;for(var r=new Array(e.length-n+t),o=0;o<e.length-n;o+=1)r[o]=e[o+n];return r}(),r={getAt:function(e){return n[e]},getLength:function(){return n.length},multiply:function(e){for(var t=new Array(r.getLength()+e.getLength()-1),n=0;n<r.getLength();n+=1)for(var o=0;o<e.getLength();o+=1)t[n+o]^=y.gexp(y.glog(r.getAt(n))+y.glog(e.getAt(o)));return w(t,0)},mod:function(e){if(r.getLength()-e.getLength()<0)return r;for(var t=y.glog(r.getAt(0))-y.glog(e.getAt(0)),n=new Array(r.getLength()),o=0;o<r.getLength();o+=1)n[o]=r.getAt(o);for(o=0;o<e.getLength();o+=1)n[o]^=y.gexp(y.glog(e.getAt(o))+t);return w(n,0).mod(e)}};return r}var b=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n},n={};return n.getRSBlocks=function(n,r){var o=function(t,n){switch(n){case u.L:return e[4*(t-1)+0];case u.M:return e[4*(t-1)+1];case u.Q:return e[4*(t-1)+2];case u.H:return e[4*(t-1)+3];default:return}}(n,r);if(void 0===o)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+r;for(var i=o.length/3,a=[],s=0;s<i;s+=1)for(var c=o[3*s+0],l=o[3*s+1],h=o[3*s+2],f=0;f<c;f+=1)a.push(t(l,h));return a},n}(),S=function(){var e=[],t=0,n={getBuffer:function(){return e},getAt:function(t){var n=Math.floor(t/8);return 1==(e[n]>>>7-t%8&1)},put:function(e,t){for(var r=0;r<t;r+=1)n.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return t},putBit:function(n){var r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1}};return n},E=function(e){var t=o,n=e,r={getMode:function(){return t},getLength:function(e){return n.length},write:function(e){for(var t=n,r=0;r+2<t.length;)e.put(i(t.substring(r,r+3)),10),r+=3;r<t.length&&(t.length-r==1?e.put(i(t.substring(r,r+1)),4):t.length-r==2&&e.put(i(t.substring(r,r+2)),7))}},i=function(e){for(var t=0,n=0;n<e.length;n+=1)t=10*t+a(e.charAt(n));return t},a=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+e};return r},T=function(e){var t=i,n=e,r={getMode:function(){return t},getLength:function(e){return n.length},write:function(e){for(var t=n,r=0;r+1<t.length;)e.put(45*o(t.charAt(r))+o(t.charAt(r+1)),11),r+=2;r<t.length&&e.put(o(t.charAt(r)),6)}},o=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);if("A"<=e&&e<="Z")return e.charCodeAt(0)-"A".charCodeAt(0)+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return r},x=function(t){var n=a,r=e.stringToBytes(t),o={getMode:function(){return n},getLength:function(e){return r.length},write:function(e){for(var t=0;t<r.length;t+=1)e.put(r[t],8)}};return o},C=function(t){var n=s,r=e.stringToBytesFuncs.SJIS;if(!r)throw"sjis not supported.";!function(e,t){var n=r("友");if(2!=n.length||38726!=(n[0]<<8|n[1]))throw"sjis not supported."}();var o=r(t),i={getMode:function(){return n},getLength:function(e){return~~(o.length/2)},write:function(e){for(var t=o,n=0;n+1<t.length;){var r=(255&t[n])<<8|255&t[n+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(n+1)+"/"+r;r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13),n+=2}if(n<t.length)throw"illegal char at "+(n+1)}};return i},k=function(){var e=[],t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,n,r){n=n||0,r=r||e.length;for(var o=0;o<r;o+=1)t.writeByte(e[o+n])},writeString:function(e){for(var n=0;n<e.length;n+=1)t.writeByte(e.charCodeAt(n))},toByteArray:function(){return e},toString:function(){var t="";t+="[";for(var n=0;n<e.length;n+=1)n>0&&(t+=","),t+=e[n];return t+="]"}};return t},O=function(e){var t=e,n=0,r=0,o=0,i={read:function(){for(;o<8;){if(n>=t.length){if(0==o)return-1;throw"unexpected end of file./"+o}var e=t.charAt(n);if(n+=1,"="==e)return o=0,-1;e.match(/^\s$/)||(r=r<<6|a(e.charCodeAt(0)),o+=6)}var i=r>>>o-8&255;return o-=8,i}},a=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw"c:"+e};return i},M=function(e,t,n){for(var r=function(e,t){var n=e,r=t,o=new Array(e*t),i={setPixel:function(e,t,r){o[t*n+e]=r},write:function(e){e.writeString("GIF87a"),e.writeShort(n),e.writeShort(r),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(n),e.writeShort(r),e.writeByte(0);var t=a(2);e.writeByte(2);for(var o=0;t.length-o>255;)e.writeByte(255),e.writeBytes(t,o,255),o+=255;e.writeByte(t.length-o),e.writeBytes(t,o,t.length-o),e.writeByte(0),e.writeString(";")}},a=function(e){for(var t=1<<e,n=1+(1<<e),r=e+1,i=s(),a=0;a<t;a+=1)i.add(String.fromCharCode(a));i.add(String.fromCharCode(t)),i.add(String.fromCharCode(n));var u=k(),c=function(e){var t=e,n=0,r=0,o={write:function(e,o){if(e>>>o!=0)throw"length over";for(;n+o>=8;)t.writeByte(255&(e<<n|r)),o-=8-n,e>>>=8-n,r=0,n=0;r|=e<<n,n+=o},flush:function(){n>0&&t.writeByte(r)}};return o}(u);c.write(t,r);var l=0,h=String.fromCharCode(o[l]);for(l+=1;l<o.length;){var f=String.fromCharCode(o[l]);l+=1,i.contains(h+f)?h+=f:(c.write(i.indexOf(h),r),i.size()<4095&&(i.size()==1<<r&&(r+=1),i.add(h+f)),h=f)}return c.write(i.indexOf(h),r),c.write(n,r),c.flush(),u.toByteArray()},s=function(){var e={},t=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;e[r]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return n};return i}(e,t),o=0;o<t;o+=1)for(var i=0;i<e;i+=1)r.setPixel(i,o,n(i,o));var a=k();r.write(a);for(var s=function(){var e=0,t=0,n=0,r="",o={},i=function(e){r+=String.fromCharCode(a(63&e))},a=function(e){if(e<0);else{if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(62==e)return 43;if(63==e)return 47}throw"n:"+e};return o.writeByte=function(r){for(e=e<<8|255&r,t+=8,n+=1;t>=6;)i(e>>>t-6),t-=6},o.flush=function(){if(t>0&&(i(e<<6-t),e=0,t=0),n%3!=0)for(var o=3-n%3,a=0;a<o;a+=1)r+="="},o.toString=function(){return r},o}(),u=a.toByteArray(),c=0;c<u.length;c+=1)s.writeByte(u[c]);return s.flush(),"data:image/gif;base64,"+s};return e}();a.stringToBytesFuncs["UTF-8"]=function(e){return function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return t}(e)},o=[],void 0===(i="function"==typeof(r=function(){return a})?r.apply(t,o):r)||(e.exports=i)},,,function(e,t,n){"use strict";n.r(t),n.d(t,"HTTP",(function(){return c}));var r=n(193),o=n(18);var i=function(){function e(){}return e.installed=function(){return!0===Object(o.a)(this.pluginRef)},e.getPlugin=function(){return"undefined"!=typeof window?function(e,t){for(var n=t.split("."),r=e,o=0;o<n.length;o++){if(!r)return null;r=r[n[o]]}return r}(window,this.pluginRef):null},e.getPluginName=function(){return this.pluginName},e.getPluginRef=function(){return this.pluginRef},e.getPluginInstallName=function(){return this.plugin},e.getSupportedPlatforms=function(){return this.platforms},e.pluginName="",e.pluginRef="",e.plugin="",e.repo="",e.platforms=[],e.install="",e}();function a(e,t,n,r){return Object(o.c)(e,t,n).apply(this,r)}n(148);Object(r.a)();var s,u=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.getBasicAuthHeader=function(e,t){return a(this,"getBasicAuthHeader",{sync:!0},arguments)},t.prototype.useBasicAuth=function(e,t){return a(this,"useBasicAuth",{sync:!0},arguments)},t.prototype.getHeaders=function(e){return a(this,"getHeaders",{sync:!0},arguments)},t.prototype.setHeader=function(e,t,n){return a(this,"setHeader",{sync:!0},arguments)},t.prototype.getDataSerializer=function(){return a(this,"getDataSerializer",{sync:!0},arguments)},t.prototype.setDataSerializer=function(e){return a(this,"setDataSerializer",{sync:!0},arguments)},t.prototype.setCookie=function(e,t){return a(this,"setCookie",{sync:!0},arguments)},t.prototype.clearCookies=function(){return a(this,"clearCookies",{sync:!0},arguments)},t.prototype.removeCookies=function(e,t){return a(this,"removeCookies",{sync:!0},arguments)},t.prototype.getCookieString=function(e){return a(this,"getCookieString",{sync:!0},arguments)},t.prototype.getRequestTimeout=function(){return a(this,"getRequestTimeout",{sync:!0},arguments)},t.prototype.setRequestTimeout=function(e){return a(this,"setRequestTimeout",{sync:!0},arguments)},t.prototype.getFollowRedirect=function(){return a(this,"getFollowRedirect",{sync:!0},arguments)},t.prototype.setFollowRedirect=function(e){return a(this,"setFollowRedirect",{sync:!0},arguments)},t.prototype.setServerTrustMode=function(e){return a(this,"setServerTrustMode",{},arguments)},t.prototype.post=function(e,t,n){return a(this,"post",{},arguments)},t.prototype.postSync=function(e,t,n,r,o){return a(this,"post",{methodName:"post",sync:!0},arguments)},t.prototype.get=function(e,t,n){return a(this,"get",{},arguments)},t.prototype.getSync=function(e,t,n,r,o){return a(this,"get",{methodName:"get",sync:!0},arguments)},t.prototype.put=function(e,t,n){return a(this,"put",{},arguments)},t.prototype.putSync=function(e,t,n,r,o){return a(this,"put",{methodName:"put",sync:!0},arguments)},t.prototype.patch=function(e,t,n){return a(this,"patch",{},arguments)},t.prototype.patchSync=function(e,t,n,r,o){return a(this,"patch",{methodName:"patch",sync:!0},arguments)},t.prototype.delete=function(e,t,n){return a(this,"delete",{},arguments)},t.prototype.deleteSync=function(e,t,n,r,o){return a(this,"delete",{methodName:"delete",sync:!0},arguments)},t.prototype.head=function(e,t,n){return a(this,"head",{},arguments)},t.prototype.headSync=function(e,t,n,r,o){return a(this,"head",{methodName:"head",sync:!0},arguments)},t.prototype.options=function(e,t,n){return a(this,"options",{},arguments)},t.prototype.optionsSync=function(e,t,n,r,o){return a(this,"options",{methodName:"options",sync:!0},arguments)},t.prototype.uploadFile=function(e,t,n,r,o){return a(this,"uploadFile",{},arguments)},t.prototype.uploadFileSync=function(e,t,n,r,o,i,s){return a(this,"uploadFile",{methodName:"uploadFile",sync:!0},arguments)},t.prototype.downloadFile=function(e,t,n,r){return a(this,"downloadFile",{},arguments)},t.prototype.downloadFileSync=function(e,t,n,r,o,i){return a(this,"downloadFile",{methodName:"downloadFile",sync:!0},arguments)},t.prototype.sendRequest=function(e,t){return a(this,"sendRequest",{},arguments)},t.prototype.sendRequestSync=function(e,t,n,r){return a(this,"sendRequest",{methodName:"sendRequest",sync:!0},arguments)},t.prototype.abort=function(e){return a(this,"abort",{},arguments)},Object.defineProperty(t.prototype,"ErrorCode",{get:function(){return e=this,t="ErrorCode",!0===Object(o.a)(e,t)?Object(o.b)(e.constructor.getPluginRef())[t]:null;var e,t},set:function(e){!function(e,t,n){!0===Object(o.a)(e,t)&&(Object(o.b)(e.constructor.getPluginRef())[t]=n)}(this,"ErrorCode",e)},enumerable:!1,configurable:!0}),t.pluginName="HTTP",t.plugin="cordova-plugin-advanced-http",t.pluginRef="cordova.plugin.http",t.repo="https://github.com/silkimen/cordova-plugin-advanced-http",t.platforms=["Android","iOS"],t}(i))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(148),o=n(147),i=n(91),a=n(132),s=n(81);var u=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.thisArg))},e}(),c=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return a.a(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(s.a);function l(e,t,n,a){return Object(i.a)(n)&&(a=n,n=void 0),a?l(e,t,n).pipe((s=function(e){return Object(o.a)(e)?a.apply(void 0,e):a(e)},function(e){if("function"!=typeof s)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new u(s,c))})):new r.a((function(r){!function e(t,n,r,o,i){var a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,i),a=function(){return s.removeEventListener(n,r,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),a=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(n,r),a=function(){return c.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,h=t.length;l<h;l++)e(t[l],n,r,o,i)}o.add(a)}(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}));var s,c}}]);
//# sourceMappingURL=index.js.map